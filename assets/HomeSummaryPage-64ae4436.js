import{e as Y,r as u,g as ie,s as T,h as z,p as k,i as ae,T as ne,A as we,P as Me,j as e,C as F,a as I,b as E,c as W,d as A,m as B,L as me,B as xe,k as ge,l as re,R as te,n as ue,H as $e,S as De,o as Se,D as je}from"./index-3b3513e8.js";import{B as Fe,C as Ae,P as ye}from"./badge-10305eb2.js";import{u as Re,d as Be,A as Pe,L as ve}from"./useIncomeInsights-bfca77df.js";import{C as Le,s as Ie,e as Ee,a as Te}from"./CompactPeriodFilter-9e87c736.js";import{M as ze,F as be}from"./FinancialHealthMeter-dbd0c8f7.js";import{Z as Ve}from"./zap-1eb736bf.js";import{C as qe}from"./clock-c9707f8e.js";import{f as U}from"./index-d8b0dd58.js";import{p as K}from"./index-b05aaf76.js";import{e as pe}from"./index-cfa66166.js";import{S as Oe}from"./star-1188ef35.js";import"./extends-9b64b82e.js";import"./select-4c245e0b.js";import"./trash-2-4b712ef5.js";import"./useAdvancedMetrics-b77f76d4.js";import"./trending-down-48cab13a.js";const Ge=Y("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),He=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ye=Y("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),de=Y("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),_e=Y("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Qe=Y("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),he=Y("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ne=u.memo(function(){const{expenses:$,investments:v,investmentGoal:M,totalPatrimony:D}=ie(),b=Re(),P=u.useMemo(()=>{const c=[],n=new Date,N=T(n),a=z(n),m=Be(a,n),p=n.getDate(),R=v.filter(l=>{const d=k(l.data);return d>=N&&d<=a}),g=$.filter(l=>{const d=k(l.data);return d>=N&&d<=a}),i=R.reduce((l,d)=>l+d.valor_aporte,0),h=g.filter(l=>!l.pago).reduce((l,d)=>l+d.valor,0),S=Number(M)||0;if(S>0){const l=S-i,d=i/S*100;if(l>0){const w=m>0?l/m:l;let j="hoje",y="medium";m<=3?(y="high",j="hoje"):p<15&&m>10&&(y="low",j=`dia ${Math.min(p+5,28)}`),c.push({id:"invest",priority:d<50?"high":"medium",urgency:y,icon:ae,iconColor:"text-income",bgColor:"bg-income/10 border-income/20",title:"Fazer Aporte",context:d>=100?"Meta batida! Quer ir al√©m?":`Faltam R$ ${l.toLocaleString("pt-BR",{minimumFractionDigits:2})} para a meta`,suggestion:`Dia ideal: ${j}`,suggestedAmount:Math.ceil(l/10)*10,impact:d<100?`Voc√™ atingiria ${Math.min(100,Math.round(d+w/S*100))}% da meta!`:"Continue construindo seu patrim√¥nio!",href:"/investimentos",cta:"Investir agora"})}else c.push({id:"invest-extra",priority:"low",urgency:"low",icon:he,iconColor:"text-success",bgColor:"bg-success/10 border-success/20",title:"Meta Atingida! üéâ",context:`Voc√™ investiu R$ ${i.toLocaleString("pt-BR",{minimumFractionDigits:2})} este m√™s`,suggestion:"Que tal ver suas proje√ß√µes futuras?",impact:"Veja o impacto dos seus aportes no longo prazo",href:"/projecao-investimentos",cta:"Ver proje√ß√µes"})}else c.push({id:"set-goal",priority:"medium",urgency:"medium",icon:ne,iconColor:"text-primary",bgColor:"bg-primary/10 border-primary/20",title:"Definir Meta",context:"Voc√™ ainda n√£o tem uma meta de investimento mensal",suggestion:"Metas ajudam a manter o foco!",impact:"Defina uma meta e acompanhe seu progresso",href:"/configuracoes",cta:"Definir meta"});if(h>0){const l=g.filter(d=>!d.pago).length;c.push({id:"pending",priority:h>b.availableBalance?"high":"medium",urgency:m<=5?"high":"medium",icon:we,iconColor:"text-warning",bgColor:"bg-warning/10 border-warning/20",title:"Quitar Pend√™ncias",context:`R$ ${h.toLocaleString("pt-BR",{minimumFractionDigits:2})} em ${l} conta(s) pendente(s)`,suggestion:m<=5?"Faltam poucos dias!":"Organize suas contas",impact:"Evite juros e mantenha o controle",href:"/gastos",cta:"Ver pend√™ncias"})}if(b.availableBalance>S*.5&&S>0){const l=Math.floor(b.availableBalance*.3/100)*100;l>=100&&c.push({id:"extra-invest",priority:"low",urgency:"low",icon:Me,iconColor:"text-primary",bgColor:"bg-primary/10 border-primary/20",title:"Oportunidade de Aporte Extra",context:`Voc√™ tem saldo dispon√≠vel de R$ ${b.availableBalance.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,suggestion:`Que tal investir R$ ${l.toLocaleString("pt-BR")}?`,suggestedAmount:l,impact:"Acelere a constru√ß√£o do seu patrim√¥nio",href:"/investimentos",cta:"Investir extra"})}const V={high:3,medium:2,low:1};return c.sort((l,d)=>V[d.priority]-V[l.priority])},[$,v,M,b]),t=P[0],f=P.slice(1,3);return t?e.jsxs(F,{className:"overflow-hidden",children:[e.jsxs(I,{className:"pb-2",children:[e.jsxs(E,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Ve,{className:"h-5 w-5 text-primary"}),"Pr√≥xima A√ß√£o Sugerida"]}),e.jsx(W,{children:"Baseado na sua situa√ß√£o atual"})]}),e.jsxs(A,{className:"space-y-3",children:[e.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsx(me,{to:t.href,className:"block",children:e.jsxs("div",{className:`p-4 rounded-xl border-2 ${t.bgColor} hover:shadow-md transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.icon,{className:`h-5 w-5 ${t.iconColor}`}),e.jsx("span",{className:"font-semibold",children:t.title}),t.priority==="high"&&e.jsx(Fe,{variant:"destructive",className:"text-xs",children:"Urgente"})]}),e.jsx("p",{className:"text-sm text-card-foreground",children:t.context}),t.suggestion&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(qe,{className:"h-3 w-3"}),e.jsx("span",{children:t.suggestion})]}),t.impact&&e.jsxs("p",{className:"text-xs text-primary font-medium",children:["üí° ",t.impact]})]}),e.jsxs(xe,{size:"sm",className:"flex-shrink-0",children:[t.cta,e.jsx(He,{className:"h-4 w-4 ml-1"})]})]}),t.suggestedAmount&&e.jsx("div",{className:"mt-3 pt-3 border-t border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valor sugerido:"}),e.jsxs("span",{className:"font-bold text-lg",children:["R$ ",t.suggestedAmount.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})})]})})}),f.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:f.map((c,n)=>e.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1+n*.1},children:e.jsx(me,{to:c.href,className:"block",children:e.jsxs("div",{className:`p-3 rounded-lg border ${c.bgColor} hover:shadow-sm transition-all duration-200`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(c.icon,{className:`h-4 w-4 ${c.iconColor}`}),e.jsx("span",{className:"text-sm font-medium",children:c.title})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:c.context})]})})},c.id))})]})]}):null}),Je=u.memo(function({monthsAgo:$=6}){const{expenses:v,investments:M,investmentGoal:D,totalPatrimony:b}=ie(),{achievements:P}=ge(),t=u.useMemo(()=>{const a=new Date,m=T(a),p=z(a),R=re(a,$),g=T(R),i=z(R),h=v.filter(o=>{const x=k(o.data);return x>=m&&x<=p}),S=M.filter(o=>{const x=k(o.data);return x>=m&&x<=p}),V=v.filter(o=>{const x=k(o.data);return x>=g&&x<=i}),l=M.filter(o=>{const x=k(o.data);return x>=g&&x<=i}),d=h.reduce((o,x)=>o+x.valor,0),w=V.reduce((o,x)=>o+x.valor,0),j=S.reduce((o,x)=>o+x.valor_aporte,0),y=l.reduce((o,x)=>o+x.valor_aporte,0),H=d+j>0?j/(d+j)*100:0,_=w+y>0?y/(w+y)*100:0,X=Number(D)||0;let q=0;if(X>0)for(let o=0;o<12;o++){const x=re(a,o),Z=T(x),ee=z(x);if(M.filter(J=>{const s=k(J.data);return s>=Z&&s<=ee}).reduce((J,s)=>J+s.valor_aporte,0)>=X)q++;else break}const Q=P.filter(o=>o.unlockedAt?new Date(o.unlockedAt)>=R:!1),L=_>0?(H-_)/_*100:H>0?100:0,ce=y>0?(j-y)/y*100:j>0?100:0,C=w>0?(d-w)/w*100:d>0?100:0;return{current:{savingsRate:H,investments:j,expenses:d,streak:q},past:{savingsRate:_,investments:y,expenses:w,month:U(R,"MMM/yy",{locale:K})},changes:{savingsRate:L,investments:ce,expenses:C},newAchievements:Q.length,monthsAgo:$}},[v,M,D,P,$]),f=u.useMemo(()=>{const{current:a,past:m,changes:p}=t;return p.savingsRate>50?{type:"success",emoji:"üöÄ",message:`Incr√≠vel! Voc√™ mais que dobrou sua taxa de poupan√ßa desde ${m.month}!`}:p.savingsRate>0?{type:"success",emoji:"üìà",message:`H√° ${t.monthsAgo} meses voc√™ poupava ${Math.round(m.savingsRate)}%. Hoje s√£o ${Math.round(a.savingsRate)}%! +${Math.round(p.savingsRate)}% de evolu√ß√£o!`}:p.savingsRate<-20?{type:"warning",emoji:"üí™",message:`Sua taxa de poupan√ßa caiu um pouco, mas isso √© normal! Voc√™ j√° conseguiu ${Math.round(m.savingsRate)}% antes, pode alcan√ßar de novo.`}:a.streak>0?{type:"success",emoji:"üî•",message:`Voc√™ est√° em uma sequ√™ncia de ${a.streak} m√™s(es) batendo a meta! Continue assim!`}:{type:"neutral",emoji:"üå±",message:"Continue acompanhando sua evolu√ß√£o. Cada passo conta na jornada financeira!"}},[t]),c=(a,m=!1)=>a>0?m?"text-red-500":"text-green-500":a<0?m?"text-green-500":"text-red-500":"text-muted-foreground",n=(a,m=!1)=>a>0?m?"bg-red-500/10":"bg-green-500/10":a<0?m?"bg-green-500/10":"bg-red-500/10":"bg-muted",N=a=>a>0?Ye:a<0?Ge:ze;return e.jsxs(F,{className:"overflow-hidden",children:[e.jsxs(I,{className:"pb-2",children:[e.jsxs(E,{className:"flex items-center gap-2 text-lg",children:[e.jsx(Le,{className:"h-5 w-5 text-primary"}),"Sua Evolu√ß√£o"]}),e.jsxs(W,{children:["Comparando com voc√™ de ",t.monthsAgo," meses atr√°s"]})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`p-3 rounded-lg ${f.type==="success"?"bg-success/10 border border-success/20":f.type==="warning"?"bg-warning/10 border border-warning/20":"bg-muted/50 border border-border"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:f.emoji}),e.jsx("p",{className:"text-sm font-medium text-foreground",children:f.message})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:`p-3 rounded-lg text-center ${n(t.changes.savingsRate)}`,children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Taxa de Poupan√ßa"}),e.jsxs("div",{className:"text-lg font-bold",children:[Math.round(t.current.savingsRate),"%"]}),e.jsxs("div",{className:`flex items-center justify-center gap-0.5 text-xs ${c(t.changes.savingsRate)}`,children:[te.createElement(N(t.changes.savingsRate),{className:"h-3 w-3"}),e.jsxs("span",{children:[t.changes.savingsRate>0?"+":"",Math.round(t.changes.savingsRate),"%"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Era ",Math.round(t.past.savingsRate),"%"]})]}),e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:`p-3 rounded-lg text-center ${n(t.changes.investments)}`,children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Aportes/m√™s"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",(t.current.investments/1e3).toFixed(1),"k"]}),e.jsxs("div",{className:`flex items-center justify-center gap-0.5 text-xs ${c(t.changes.investments)}`,children:[te.createElement(N(t.changes.investments),{className:"h-3 w-3"}),e.jsxs("span",{children:[t.changes.investments>0?"+":"",Math.round(t.changes.investments),"%"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Era R$ ",(t.past.investments/1e3).toFixed(1),"k"]})]}),e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:`p-3 rounded-lg text-center ${n(t.changes.expenses,!0)}`,children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Gastos/m√™s"}),e.jsxs("div",{className:"text-lg font-bold",children:["R$ ",(t.current.expenses/1e3).toFixed(1),"k"]}),e.jsxs("div",{className:`flex items-center justify-center gap-0.5 text-xs ${c(t.changes.expenses,!0)}`,children:[te.createElement(N(t.changes.expenses),{className:"h-3 w-3"}),e.jsxs("span",{children:[t.changes.expenses>0?"+":"",Math.round(t.changes.expenses),"%"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Era R$ ",(t.past.expenses/1e3).toFixed(1),"k"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border/50",children:[t.current.streak>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-primary/10",children:e.jsx(ae,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Streak de metas"}),e.jsxs("div",{className:"text-sm font-semibold",children:[t.current.streak," m√™s(es)"]})]})]}),t.newAchievements>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-full bg-success/10",children:e.jsx(Pe,{className:"h-4 w-4 text-success"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Novas conquistas"}),e.jsxs("div",{className:"text-sm font-semibold",children:["+",t.newAchievements]})]})]})]})]})]})}),Ue=u.memo(function(){const{expenses:$,investments:v,investmentGoal:M,totalPatrimony:D,totalInvestmentBalance:b}=ie(),{achievements:P}=ge(),t=u.useMemo(()=>{const n=[],N=new Date;if(v.length===0&&$.length===0)return[];const a=[...v].sort((i,h)=>new Date(i.data).getTime()-new Date(h.data).getTime());if(a.length>0){const i=a[0];n.push({id:"first-investment",date:k(i.data),dateLabel:U(k(i.data),"MMM/yy",{locale:K}),title:"Primeiro Passo",description:"Voc√™ fez seu primeiro investimento!",amount:i.valor_aporte,icon:de,iconColor:"text-primary",bgColor:"bg-primary/10",type:"start"})}const m=Number(M)||0;if(m>0&&a.length>0){const i=pe({start:re(N,11),end:N});for(const h of i){const S=T(h),V=z(h),l=v.filter(d=>{const w=k(d.data);return w>=S&&w<=V}).reduce((d,w)=>d+w.valor_aporte,0);if(l>=m){n.push({id:`goal-achieved-${U(h,"yyyy-MM")}`,date:h,dateLabel:U(h,"MMM/yy",{locale:K}),title:"Meta Atingida!",description:`Voc√™ bateu a meta de R$ ${m.toLocaleString("pt-BR")}`,amount:l,icon:ne,iconColor:"text-success",bgColor:"bg-success/10",type:"goal"});break}}}const p=[1e4,5e4,1e5,5e5,1e6],R=D||b||0;for(const i of p)R>=i&&n.push({id:`patrimony-${i}`,date:N,dateLabel:"Atual",title:`R$ ${(i/1e3).toFixed(0)}k Alcan√ßados!`,description:"Seu patrim√¥nio chegou a um novo patamar",amount:i,icon:ae,iconColor:"text-income",bgColor:"bg-income/10",type:"patrimony"});return P.filter(i=>i.unlockedAt).sort((i,h)=>new Date(h.unlockedAt).getTime()-new Date(i.unlockedAt).getTime()).slice(0,2).forEach(i=>{n.push({id:`achievement-${i.id}`,date:new Date(i.unlockedAt),dateLabel:U(new Date(i.unlockedAt),"MMM/yy",{locale:K}),title:i.title,description:i.description,icon:ue,iconColor:"text-warning",bgColor:"bg-warning/10",type:"achievement"})}),n.sort((i,h)=>h.date.getTime()-i.date.getTime()).slice(0,5)},[v,$,M,D,b,P]),f=u.useMemo(()=>{const n=D||b||0;return n===0?{phase:"Come√ßando a Jornada",description:"Fa√ßa seu primeiro investimento para iniciar!",icon:he}:n<1e4?{phase:"Construindo a Base",description:"Foque em criar o h√°bito de investir regularmente.",icon:Me}:n<5e4?{phase:"Reserva de Emerg√™ncia",description:"Fortale√ßa sua reserva e explore novas op√ß√µes.",icon:ne}:n<1e5?{phase:"Crescimento Acelerado",description:"Os juros compostos come√ßam a trabalhar por voc√™!",icon:ae}:{phase:"Independ√™ncia Financeira",description:"Voc√™ est√° construindo liberdade financeira!",icon:Oe}},[D,b]),c=u.useMemo(()=>{const n=D||b||0,N=Number(M)||0,m=[1e4,5e4,1e5,5e5,1e6].find(p=>p>n);if(m){const p=m-n,R=N>0?Math.ceil(p/N):0;return{target:`R$ ${(m/1e3).toFixed(0)}k`,remaining:`Faltam R$ ${p.toLocaleString("pt-BR",{minimumFractionDigits:0})}`,estimate:R>0?`~${R} meses`:null}}return null},[D,b,M]);return t.length===0&&v.length===0?e.jsxs(F,{children:[e.jsx(I,{children:e.jsxs(E,{className:"flex items-center gap-2 text-lg",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Sua Jornada Financeira"]})}),e.jsx(A,{children:e.jsxs("div",{className:"text-center py-6",children:[e.jsx(he,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3"}),e.jsx("h3",{className:"font-semibold mb-1",children:"Comece sua jornada!"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fa√ßa seu primeiro investimento para come√ßar a acompanhar sua evolu√ß√£o."})]})})]}):e.jsxs(F,{className:"overflow-hidden",children:[e.jsxs(I,{className:"pb-2",children:[e.jsxs(E,{className:"flex items-center gap-2 text-lg",children:[e.jsx(de,{className:"h-5 w-5 text-primary"}),"Sua Jornada Financeira"]}),e.jsx(W,{children:"Marcos importantes da sua evolu√ß√£o"})]}),e.jsxs(A,{className:"space-y-4",children:[e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-3 rounded-lg bg-primary/5 border border-primary/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(f.icon,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-semibold text-primary",children:f.phase})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:f.description}),c&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-primary/10 text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Pr√≥ximo marco: "}),e.jsx("span",{className:"font-medium",children:c.target}),c.estimate&&e.jsxs("span",{className:"text-muted-foreground",children:[" ‚Ä¢ ",c.estimate]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-2 bottom-2 w-0.5 bg-gradient-to-b from-primary via-muted to-transparent"}),e.jsx("div",{className:"space-y-3",children:t.map((n,N)=>{const a=n.icon;return e.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.1},className:"relative pl-10",children:[e.jsx("div",{className:`absolute left-0 w-8 h-8 rounded-full ${n.bgColor} flex items-center justify-center border-2 border-background shadow-sm`,children:e.jsx(a,{className:`h-4 w-4 ${n.iconColor}`})}),e.jsx("div",{className:"p-2 rounded-lg hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:n.title}),e.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-1.5 py-0.5 rounded",children:n.dateLabel})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:n.description})]}),n.amount&&e.jsxs("span",{className:"text-sm font-semibold text-right flex-shrink-0",children:["R$ ",n.amount.toLocaleString("pt-BR",{minimumFractionDigits:0})]})]})})]},n.id)})})]}),c&&e.jsxs("div",{className:"pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1",children:[e.jsxs("span",{children:["Progresso para ",c.target]}),e.jsx("span",{children:c.remaining})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(B.div,{className:"h-full bg-gradient-to-r from-primary to-income",initial:{width:0},animate:{width:`${Math.min(100,(D||0)/parseInt(c.target.replace(/\D/g,""))/1e3*100)}%`},transition:{duration:1,ease:"easeOut"}})})]})]})]})}),xs=u.memo(function(){const{expenses:$,investments:v,categories:M,accounts:D,investmentGoal:b,totalPatrimony:P,totalInvestmentBalance:t}=ie(),f=Re(),{evaluateAchievements:c}=ge(),[n,N]=u.useState("monthly"),[a,m]=u.useState(void 0),[p,R]=u.useState(new Date().getMonth()),[g,i]=u.useState(new Date().getFullYear()),[h,S]=u.useState(!1),V=u.useCallback(s=>N(s),[]),l=u.useCallback(s=>m(s),[]),d=u.useCallback(s=>R(s),[]),w=u.useCallback(s=>i(s),[]),{startDate:j,endDate:y}=u.useMemo(()=>{let s,r;if(a&&a.from)s=a.from,r=a.to||a.from;else if(n==="yearly"&&g)s=Ie(new Date(g,0,1)),r=Ee(new Date(g,11,31));else if(n==="monthly"&&p!==void 0&&g)s=T(new Date(g,p,1)),r=z(new Date(g,p,1));else{const G=new Date;s=T(G),r=z(G)}return r.setHours(23,59,59,999),{startDate:s,endDate:r}},[a,n,p,g]),H=u.useMemo(()=>$.filter(s=>{const r=k(s.data);return r>=j&&r<=y}),[$,j,y]),_=u.useMemo(()=>v.filter(s=>{const r=k(s.data);return r>=j&&r<=y}),[v,j,y]),X=H.reduce((s,r)=>s+r.valor,0),q=H.filter(s=>s.pago).reduce((s,r)=>s+r.valor,0),Q=H.filter(s=>!s.pago).reduce((s,r)=>s+r.valor,0),L=_.reduce((s,r)=>s+r.valor_aporte,0),ce=u.useMemo(()=>{if(a&&a.from)return pe({start:T(a.from),end:z(a.to||a.from)}).length;if(n==="yearly"&&g){const s=new Date;return g<s.getFullYear()?12:g>s.getFullYear()?0:s.getMonth()+1}return 1},[a,n,g]),C=(Number(b)||0)*ce,o=C>0?L/C*100:0,x=L+q>0?L/(L+q)*100:0,Z=u.useMemo(()=>{const s=Number(b)||0;return pe({start:re(new Date,5),end:new Date}).map(G=>{const Ce=T(G),ke=z(G),fe=v.filter(le=>{const se=k(le.data);return se>=Ce&&se<=ke}).reduce((le,se)=>le+se.valor_aporte,0);return{label:U(G,"MMM/yy",{locale:K}),invested:fe,achieved:s>0?fe>=s:!1}})},[v,b]),ee=u.useMemo(()=>{const s=new Date,r=y.getTime()-j.getTime(),G=Math.min(Math.max(s.getTime()-j.getTime(),0),r);return r>0?G/r:1},[j,y]),O=u.useMemo(()=>{let s=0;for(let r=Z.length-1;r>=0&&Z[r].achieved;r--)s++;return s},[Z]);te.useEffect(()=>{c({monthlyStreak:O})},[O,c]);const J=u.useMemo(()=>{const s=[];if(C>0){const r=ee*100;o>=100?s.push({type:"success",message:"Parab√©ns! Voc√™ bateu a meta do per√≠odo. Mantenha a consist√™ncia com pequenos aportes recorrentes."}):o<r*.9?s.push({type:"tip",message:"Voc√™ est√° abaixo do ritmo esperado para a meta. Antecipe um aporte menor hoje para aliviar o fim do per√≠odo."}):s.push({type:"tip",message:"Bom ritmo! Um pequeno aporte extra pode garantir que voc√™ bata a meta antes do fim do per√≠odo."})}return Q>0&&Q>=q*.5&&s.push({type:"warning",message:"Pend√™ncias elevadas neste per√≠odo. Priorize quitar para liberar fluxo para os aportes."}),x<15?s.push({type:"tip",message:"Sua taxa de poupan√ßa est√° baixa. Avalie reduzir uma categoria de gasto e redirecionar a diferen√ßa para aportes."}):x>=25&&s.push({type:"success",message:"Excelente taxa de poupan√ßa! Considere automatizar aportes para manter esse padr√£o."}),O>=2&&s.push({type:"success",message:`√ìtimo h√°bito! Voc√™ bateu a meta por ${O} meses seguidos.`}),s.slice(0,3)},[o,ee,C,Q,q,x,O]);return e.jsxs(e.Fragment,{children:[e.jsx($e,{children:e.jsx("title",{children:"Resumo Geral - Lumify"})}),e.jsxs("div",{className:"space-y-4 md:space-y-5 page-top",children:[e.jsx(Ae,{title:"Ol√°! üëã",subtitle:"Aqui est√° seu resumo financeiro",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Te,{periodType:n,setPeriodType:V,dateRange:a,setDateRange:l,month:p,setMonth:d,year:g,setYear:w}),e.jsx(xe,{variant:"ghost",size:"sm",onClick:()=>S(!h),className:"h-8 gap-1.5 text-xs",title:h?"Modo completo":"Modo foco",children:h?e.jsxs(e.Fragment,{children:[e.jsx(_e,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Completo"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"h-3.5 w-3.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Foco"})]})})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["R$ ",P.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Patrim√¥nio Total"})]}),e.jsx(me,{to:"/configuracoes",children:e.jsx(xe,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(De,{className:"h-4 w-4"})})})]})})]})}),e.jsx(Se,{mode:"wait",children:h?e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-4",children:[e.jsx(be,{}),e.jsx(Ne,{}),e.jsx(F,{className:"border-2 border-primary/20",children:e.jsxs(A,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Meta do M√™s"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:C>0?`R$ ${L.toLocaleString("pt-BR")} de R$ ${C.toLocaleString("pt-BR")}`:"Defina uma meta para acompanhar"})]}),e.jsx("div",{className:"text-3xl font-bold text-primary",children:C>0?`${Math.round(o)}%`:"-"})]}),C>0&&e.jsx(ye,{value:Math.min(o,100),className:"h-4"}),o>=100&&e.jsx("p",{className:"text-sm text-success mt-2 font-medium text-center",children:"üéâ Parab√©ns! Meta atingida!"})]})}),e.jsx("p",{className:"text-center text-xs text-muted-foreground",children:'Clique em "Completo" para ver mais detalhes'})]},"focus-mode"):e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"space-y-4 md:space-y-5",children:[e.jsx(be,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs(F,{className:"border-l-4 border-l-destructive",children:[e.jsx(I,{className:"pb-2",children:e.jsx(E,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:"Gastos no Per√≠odo"})}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-3xl font-bold text-card-foreground",children:["R$ ",X.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["‚úÖ R$ ",q.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("span",{children:["‚è≥ R$ ",Q.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]})]}),e.jsxs(F,{className:`border-l-4 ${f.availableBalance>=0?"border-l-green-500":"border-l-red-500"}`,children:[e.jsx(I,{className:"pb-2",children:e.jsxs(E,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[e.jsx(je,{className:"h-4 w-4"}),"Saldo Dispon√≠vel"]})}),e.jsxs(A,{children:[e.jsxs("div",{className:`text-3xl font-bold ${f.availableBalance>=0?"text-success":"text-error"}`,children:["R$ ",f.availableBalance.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:e.jsxs("span",{children:["Pode gastar: R$ ",f.dailySpendingCapacity.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/dia"]})})]})]}),e.jsxs(F,{className:"border-l-4 border-l-income",children:[e.jsx(I,{className:"pb-2",children:e.jsx(E,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:"Aportes no Per√≠odo"})}),e.jsxs(A,{children:[e.jsxs("div",{className:"text-3xl font-bold text-card-foreground",children:["R$ ",L.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:e.jsxs("span",{children:["Taxa de poupan√ßa: ",Math.round(x),"%"]})})]})]}),e.jsxs(F,{className:"border-l-4 border-l-primary",children:[e.jsx(I,{className:"pb-2",children:e.jsx(E,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:"Progresso da Meta"})}),e.jsx(A,{children:C>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-3xl font-bold text-card-foreground",children:[Math.round(o),"%"]}),e.jsx(ye,{value:Math.min(o,100),className:"h-3 mt-3"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["R$ ",L.toLocaleString("pt-BR",{minimumFractionDigits:2})," de R$ ",C.toLocaleString("pt-BR",{minimumFractionDigits:2}),o>100&&e.jsxs("span",{className:"block text-success font-medium",children:["R$ ",(L-C).toLocaleString("pt-BR",{minimumFractionDigits:2})," al√©m da meta! üéâ"]})]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ne,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Defina uma meta mensal"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:[e.jsx(Ne,{}),e.jsx(Je,{monthsAgo:6})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:[f.recommendations.length>0&&e.jsxs(F,{children:[e.jsxs(I,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-primary"}),"Insights Financeiros"]}),e.jsx(W,{children:"Recomenda√ß√µes baseadas na sua situa√ß√£o atual"})]}),e.jsx(A,{className:"space-y-3",children:f.recommendations.slice(0,3).map((s,r)=>e.jsxs("div",{className:`p-4 rounded-lg text-sm flex items-start gap-3 ${s.type==="warning"?"bg-error-muted border border-error":s.type==="success"?"bg-success-muted border border-success":"bg-info-muted border border-info"}`,children:[s.type==="warning"&&e.jsx(we,{className:"h-5 w-5 text-error mt-0.5 flex-shrink-0"}),s.type==="success"&&e.jsx(ue,{className:"h-5 w-5 text-success mt-0.5 flex-shrink-0"}),s.type==="tip"&&e.jsx(ve,{className:"h-5 w-5 text-info mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-card-foreground",children:s.message}),s.action&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["üí° ",s.action]})]})]},r))})]}),e.jsx(Ue,{})]}),J.length>0&&e.jsxs(F,{children:[e.jsxs(I,{children:[e.jsxs(E,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-warning"}),"Insights para voc√™"]}),e.jsx(W,{children:"Dicas personalizadas baseadas no seu momento atual"})]}),e.jsxs(A,{className:"space-y-3",children:[O>0&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-2.5 py-1.5 rounded-full border bg-card text-xs",children:[e.jsx(ue,{className:"h-3.5 w-3.5 text-primary"}),"Streak mensal: ",O,"m üî•"]}),J.map((s,r)=>e.jsxs("div",{className:`p-4 rounded-lg text-sm flex items-start gap-3 transition-colors duration-200 ${s.type==="warning"?"bg-warning/10 border border-warning/30 hover:bg-warning/20":s.type==="success"?"bg-success/10 border border-success/30 hover:bg-success/20":"bg-primary/10 border border-primary/30 hover:bg-primary/20"}`,children:[s.type==="warning"&&e.jsx("span",{className:"text-lg",children:"‚ö†Ô∏è"}),s.type==="success"&&e.jsx("span",{className:"text-lg",children:"‚ú®"}),s.type==="tip"&&e.jsx("span",{className:"text-lg",children:"üí°"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-card-foreground",children:s.message}),s.type==="tip"&&e.jsx("p",{className:"text-xs text-muted-foreground italic mt-1",children:"Pequenos passos levam a grandes conquistas."})]})]},r))]})]})]},"full-mode")})]})]})});export{xs as HomeSummaryPage};
