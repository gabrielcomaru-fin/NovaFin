import{r as b,j as r}from"./index-dab93e87.js";import{C as d,a as u,b as f,c as p,d as h}from"./card-def18805.js";import{a as A,b as D,p as x}from"./index-b5f65b9f.js";import{f as y}from"./index-65722b09.js";import{p as C}from"./index-23bf3cd3.js";import{g as R,B as l,f as B,R as F,T as N,L as E}from"./generateCategoricalChart-39c212d1.js";import{X as j,Y as v,C as w}from"./YAxis-84e74e4e.js";const T=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});function X(s){return typeof s!="number"||Number.isNaN(s)?"-":T.format(s)}function H(s,n={maximumFractionDigits:0}){return typeof s!="number"||Number.isNaN(s)?"-":new Intl.NumberFormat("pt-BR",{style:"percent",maximumFractionDigits:n.maximumFractionDigits??0}).format(s/100)}var k=R({chartName:"BarChart",GraphicalChild:l,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:j},{axisType:"yAxis",AxisComp:v}],formatAxisMap:B});const P=({expenses:s,investments:n})=>{const i=b.useMemo(()=>A({start:D(new Date,11),end:new Date}).map(a=>{const c=new Date(a.getFullYear(),a.getMonth(),1),m=new Date(a.getFullYear(),a.getMonth()+1,0),M=s.filter(e=>{if(!e.data)return!1;try{const t=x(e.data);return t>=c&&t<=m}catch(t){return console.warn("Erro ao parsear data do gasto:",e.data,t),!1}}).reduce((e,t)=>e+(t.valor||0),0),g=n.filter(e=>{if(!e.data)return!1;try{const t=x(e.data);return t>=c&&t<=m}catch(t){return console.warn("Erro ao parsear data do investimento:",e.data,t),!1}}).reduce((e,t)=>e+(t.valor_aporte||0),0);return{name:y(a,"MMM/yy",{locale:C}),Gastos:M,Aportes:g,fullMonth:y(a,"MMMM yyyy",{locale:C})}}),[s,n]);return!i||i.length===0?r.jsxs(d,{children:[r.jsxs(u,{children:[r.jsx(f,{children:"Aportes vs. Gastos (Últimos 12 Meses)"}),r.jsx(p,{children:"Comparativo da sua evolução financeira mensal."})]}),r.jsx(h,{children:r.jsx("div",{className:"flex items-center justify-center h-64 text-muted-foreground",children:"Nenhum dado disponível para exibir"})})]}):r.jsxs(d,{children:[r.jsxs(u,{children:[r.jsx(f,{children:"Aportes vs. Gastos (Últimos 12 Meses)"}),r.jsx(p,{children:"Comparativo da sua evolução financeira mensal."})]}),r.jsx(h,{children:r.jsx(F,{width:"100%",height:300,children:r.jsxs(k,{data:i,children:[r.jsx(w,{strokeDasharray:"3 3",vertical:!1}),r.jsx(j,{dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),r.jsx(v,{tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:o=>`R$${o/1e3}k`}),r.jsx(N,{cursor:{fill:"hsl(var(--accent))"},contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"},formatter:(o,a)=>[`R$ ${o.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,a],labelFormatter:(o,a)=>a&&a[0]?a[0].payload.fullMonth:o}),r.jsx(E,{}),r.jsx(l,{dataKey:"Aportes",fill:"hsl(var(--primary))",radius:[4,4,0,0]}),r.jsx(l,{dataKey:"Gastos",fill:"hsl(var(--destructive))",radius:[4,4,0,0]})]})})})]})};export{P as M,H as a,X as f};
