import{c as Ee,i as rt,r as L,j as e,B as ve,n as Ue,D as st,C as ue,a as he,b as pe,d as je,e as de,R as Et,o as Ft,f as It,H as At,p as $e}from"./index-0f4f9cbc.js";import{u as Lt,L as Bt,T as $t,P as zt,C as Wt}from"./Pagination-024a39d9.js";import{L as we,I as Ve,C as Ut}from"./label-cb5d17e1.js";import{S as Se,a as Te,b as ke,c as Pe,d as ye}from"./select-47920f9f.js";import{D as Xe,a as Xt,P as Gt,b as Ge,c as He,d as Ye,e as Ht,C as Oe,f as Yt}from"./dialog-f052a184.js";import{b as ze,s as qt,e as Qt,C as Vt,a as Kt}from"./CompactHeader-bd48ca2c.js";import{C as Jt,E as Zt}from"./ExpenseTrendChart-b4cc8304.js";import{R as ot,C as it,T as lt,L as en,B as tn}from"./generateCategoricalChart-71812082.js";import{P as nn,a as an}from"./CategoryChart-4a62d883.js";import{W as Ke,B as rn,S as sn,F as on}from"./wallet-dba85729.js";import{B as ln}from"./building-2-fc611459.js";import{p as qe,a as Je,b as Ze,s as cn}from"./index-b30782cb.js";import{B as un}from"./BarChart-126b03d8.js";import{C as dn,X as fn,Y as mn}from"./YAxis-c072bbe5.js";import{T as hn,a as pn,b as et,c as tt}from"./tabs-97a1f38e.js";import{T as gn}from"./trash-2-e0d7746e.js";import"./index-a53a69e9.js";import"./index-65722b09.js";import"./trending-down-28adc8e8.js";import"./Area-8590cddd.js";const nt=Ee("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),xn=Ee("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),vn=Ee("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),yn=Ee("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function jn({onSubmit:M,expenseToEdit:S,onOpenChange:J,isOpen:y}){const{categories:l}=rt(),r=l.filter(d=>d.tipo==="gasto"),u={descricao:"",valor:"",categoria_id:"",recorrente:!1,pago:!1,data:new Date().toISOString().split("T")[0]},[a,c]=L.useState(u),[m,p]=L.useState(""),x=L.useRef(null),j=d=>{if(d==null||d==="")return"";const s=Number(d);return isNaN(s)?"":s.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})};L.useEffect(()=>{S!=null&&S.id?c({descricao:S.descricao||"",valor:j(S.valor),categoria_id:S.categoria_id||"",recorrente:S.recorrente||!1,pago:S.pago||!1,data:S.data?new Date(S.data).toISOString().split("T")[0]:u.data}):c(u),p("")},[S,y]),L.useEffect(()=>{var s;const d=(s=x.current)==null?void 0:s.input;if(d){const t=d.value.length;d.setSelectionRange(t,t)}},[a.valor]);const P=d=>{if(!d)return 0;const s=String(d).replace(/\./g,"").replace(",","."),t=parseFloat(s);return isNaN(t)?0:t},k=d=>{d.preventDefault();const s=P(a.valor);if(s<=0){p("Informe um valor válido maior que zero.");return}if(!a.categoria_id){p("Por favor, selecione uma categoria para a despesa.");return}M({...a,valor:s},S==null?void 0:S.id),T()},T=()=>{c(u),p("")},o=d=>{J(d),d||T()},n=d=>{c({...a,valor:d})};return e.jsxs(Xe,{open:y,onOpenChange:o,children:[!(S!=null&&S.id)&&e.jsx(Xt,{asChild:!0,children:e.jsxs(ve,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Nova Despesa"]})}),e.jsxs(Ge,{className:"sm:max-w-md",children:[e.jsxs(He,{children:[e.jsxs(Ye,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"w-5 h-5"}),S!=null&&S.id?"Editar Despesa":"Adicionar Despesa"]}),e.jsx(Ht,{children:S!=null&&S.id?"Atualize os detalhes da sua despesa.":"Registre uma nova despesa para controlar seus gastos."})]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"description",children:"Descrição"}),e.jsx(Ve,{id:"description",placeholder:"Ex: Almoço no restaurante",value:a.descricao,onChange:d=>c({...a,descricao:d.target.value}),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"amount",children:"Valor (R$)"}),e.jsx(Ut,{id:"amount",placeholder:"0,00",value:a.valor,onChange:n,ref:x,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"date",children:"Data"}),e.jsx(Ve,{id:"date",type:"date",value:a.data,onChange:d=>c({...a,data:d.target.value}),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{htmlFor:"category",children:"Categoria"}),r.length>0?e.jsxs(e.Fragment,{children:[e.jsxs(Se,{value:a.categoria_id,onValueChange:d=>{c({...a,categoria_id:d}),p("")},children:[e.jsx(Te,{children:e.jsx(ke,{placeholder:"Selecione uma categoria"})}),e.jsx(Pe,{children:r.map(d=>e.jsx(ye,{value:d.id.toString(),children:d.nome},d.id))})]}),m&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma categoria de gasto disponível."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isRecurring",checked:a.recorrente,onChange:d=>c({...a,recorrente:d.target.checked}),className:"rounded accent-primary"}),e.jsxs(we,{htmlFor:"isRecurring",className:"flex items-center gap-2 text-sm",children:[e.jsx(vn,{className:"w-4 h-4"}),"Despesa recorrente"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"isPaid",checked:a.pago,onChange:d=>c({...a,pago:d.target.checked}),className:"rounded accent-primary"}),e.jsxs(we,{htmlFor:"isPaid",className:"flex items-center gap-2 text-sm",children:[e.jsx(st,{className:"w-4 h-4"}),"Despesa já paga"]})]})]}),e.jsx(ve,{type:"submit",className:"w-full",children:S!=null&&S.id?"Salvar Alterações":"Adicionar Despesa"})]})]})]})}const bn=L.memo(function({expenses:S,paymentMethods:J}){const y=L.useMemo(()=>!S.length||!J.length?[]:J.map(c=>{const m=S.filter(x=>x.meio_pagamento_id===c.id),p=m.reduce((x,j)=>x+j.valor,0);return{name:c.nome,value:p,color:c.cor||"#3b82f6",tipo:c.tipo,count:m.length}}).filter(c=>c.value>0).sort((c,m)=>m.value-c.value),[S,J]),l=a=>({cartao_credito:Oe,cartao_debito:Oe,dinheiro:rn,pix:sn,transferencia:ln,boleto:on,outros:Ke})[a]||Ke,r=({active:a,payload:c})=>{if(a&&c&&c.length){const m=c[0].payload;return e.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[Et.createElement(l(m.tipo),{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:m.name})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Valor: R$ ",m.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Transações: ",m.count]})]})}return null},u=({payload:a})=>e.jsx("div",{className:"flex flex-wrap gap-2 justify-center mt-4",children:a.map((c,m)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:c.color}}),e.jsx("span",{className:"text-muted-foreground",children:c.value})]},m))});return y.length===0?e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Distribuição por Meio de Pagamento"]}),e.jsx(je,{children:"Nenhuma despesa encontrada com meios de pagamento"})]}),e.jsx(de,{children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto opacity-50 mb-2"}),e.jsx("p",{children:"Nenhuma despesa registrada com meio de pagamento"})]})})]}):e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5"}),"Distribuição por Meio de Pagamento"]}),e.jsx(je,{children:"Como você distribui seus gastos entre diferentes meios de pagamento"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"h-80",children:e.jsx(ot,{width:"100%",height:"100%",children:e.jsxs(nn,{children:[e.jsx(an,{data:y,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",children:y.map((a,c)=>e.jsx(it,{fill:a.color},`cell-${c}`))}),e.jsx(lt,{content:e.jsx(r,{})}),e.jsx(en,{content:e.jsx(u,{})})]})})}),e.jsx("div",{className:"mt-4 space-y-2",children:y.map((a,c)=>{const m=l(a.tipo),p=y.reduce((x,j)=>x+j.value,0)>0?a.value/y.reduce((x,j)=>x+j.value,0)*100:0;return e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-4 w-4",style:{color:a.color}}),e.jsx("span",{className:"font-medium",children:a.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold",children:["R$ ",a.value.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[p.toFixed(1),"% • ",a.count," transação",a.count!==1?"ões":""]})]})]},c)})})]})]})}),Nn=L.memo(function({expenses:S,periodType:J="monthly"}){const y=L.useMemo(()=>{if(!S.length)return[];const u={Segunda:0,Terça:0,Quarta:0,Quinta:0,Sexta:0,Sábado:0,Domingo:0},a={Segunda:0,Terça:0,Quarta:0,Quinta:0,Sexta:0,Sábado:0,Domingo:0},c=["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"];return S.forEach(m=>{const p=qe(m.data),x=c[p.getDay()];u.hasOwnProperty(x)&&(u[x]+=m.valor,a[x]+=1)}),Object.entries(u).map(([m,p])=>({day:m,total:p,count:a[m],average:a[m]>0?p/a[m]:0}))},[S]),l=L.useMemo(()=>{if(y.length===0)return[];const u=[],a=[...y].sort((P,k)=>k.total-P.total),c=[...y].sort((P,k)=>k.average-P.average);a[0]&&a[0].total>0&&u.push({type:"info",icon:"📊",title:"Dia com Maior Gasto",message:`${a[0].day} é o dia que você mais gasta (R$ ${a[0].total.toLocaleString("pt-BR",{minimumFractionDigits:2})})`}),c[0]&&c[0].average>0&&u.push({type:"tip",icon:"💡",title:"Dia com Maior Gasto Médio",message:`${c[0].day} tem o maior gasto médio por transação (R$ ${c[0].average.toLocaleString("pt-BR",{minimumFractionDigits:2})})`});const m=["Segunda","Terça","Quarta","Quinta","Sexta"],p=["Sábado","Domingo"],x=m.reduce((P,k)=>{const T=y.find(o=>o.day===k);return P+((T==null?void 0:T.total)||0)},0),j=p.reduce((P,k)=>{const T=y.find(o=>o.day===k);return P+((T==null?void 0:T.total)||0)},0);if(x>0&&j>0){const P=j/(x+j)*100;P>40&&u.push({type:"warning",icon:"⚠️",title:"Gastos de Fim de Semana",message:`${P.toFixed(1)}% dos seus gastos acontecem nos fins de semana. Considere planejar melhor essas despesas.`})}return u},[y]),r=({active:u,payload:a,label:c})=>{if(u&&a&&a.length){const m=a[0].payload;return e.jsxs("div",{className:"bg-background border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium",children:c}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: R$ ",m.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Transações: ",m.count]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Média: R$ ",m.average.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}return null};return y.length===0||y.every(u=>u.total===0)?e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Padrões de Gastos por Dia da Semana"]}),e.jsx(je,{children:"Nenhuma despesa encontrada para análise"})]}),e.jsx(de,{children:e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(ze,{className:"w-12 h-12 mx-auto opacity-50 mb-2"}),e.jsx("p",{children:"Nenhuma despesa registrada para análise de padrões"})]})})]}):e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5"}),"Padrões de Gastos por Dia da Semana"]}),e.jsx(je,{children:"Como você distribui seus gastos ao longo da semana"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"h-80",children:e.jsx(ot,{width:"100%",height:"100%",children:e.jsxs(un,{data:y,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(dn,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(fn,{dataKey:"day",tick:{fontSize:12},tickLine:{stroke:"hsl(var(--muted-foreground))"}}),e.jsx(mn,{tick:{fontSize:12},tickLine:{stroke:"hsl(var(--muted-foreground))"},tickFormatter:u=>`R$ ${(u/1e3).toFixed(0)}k`}),e.jsx(lt,{content:e.jsx(r,{})}),e.jsx(tn,{dataKey:"total",radius:[4,4,0,0],children:y.map((u,a)=>e.jsx(it,{fill:u.day==="Sábado"||u.day==="Domingo"?"#f59e0b":"#3b82f6"},`cell-${a}`))})]})})}),l.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:l.map((u,a)=>e.jsx("div",{className:`p-3 rounded-lg border ${u.type==="warning"?"bg-orange-50 border-orange-200":u.type==="tip"?"bg-blue-50 border-blue-200":"bg-gray-50 border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:u.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm",children:u.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.message})]})]})},a))})]})]})});var ct={exports:{}};(function(M,S){(function(y,l){M.exports=l(L)})(Ft,function(J){return function(y){var l={};function r(u){if(l[u])return l[u].exports;var a=l[u]={i:u,l:!1,exports:{}};return y[u].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=y,r.c=l,r.d=function(u,a,c){r.o(u,a)||Object.defineProperty(u,a,{configurable:!1,enumerable:!0,get:c})},r.n=function(u){var a=u&&u.__esModule?function(){return u.default}:function(){return u};return r.d(a,"a",a),a},r.o=function(u,a){return Object.prototype.hasOwnProperty.call(u,a)},r.p="/",r(r.s=11)}([function(y,l,r){(function(u){y.exports=r(16)()}).call(l,r(2))},function(y,l){y.exports=J},function(y,l){var r=y.exports={},u,a;function c(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=c}catch{u=c}try{typeof clearTimeout=="function"?a=clearTimeout:a=m}catch{a=m}})();function p(t){if(u===setTimeout)return setTimeout(t,0);if((u===c||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch{try{return u.call(null,t,0)}catch{return u.call(this,t,0)}}}function x(t){if(a===clearTimeout)return clearTimeout(t);if((a===m||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(t);try{return a(t)}catch{try{return a.call(null,t)}catch{return a.call(this,t)}}}var j=[],P=!1,k,T=-1;function o(){!P||!k||(P=!1,k.length?j=k.concat(j):T=-1,j.length&&n())}function n(){if(!P){var t=p(o);P=!0;for(var h=j.length;h;){for(k=j,j=[];++T<h;)k&&k[T].run();T=-1,h=j.length}k=null,P=!1,x(t)}}r.nextTick=function(t){var h=new Array(arguments.length-1);if(arguments.length>1)for(var w=1;w<arguments.length;w++)h[w-1]=arguments[w];j.push(new d(t,h)),j.length===1&&!P&&p(n)};function d(t,h){this.fun=t,this.array=h}d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function s(){}r.on=s,r.addListener=s,r.once=s,r.off=s,r.removeListener=s,r.removeAllListeners=s,r.emit=s,r.prependListener=s,r.prependOnceListener=s,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(u){return u.reduce(function(a,c){return a+c})/u.length}},function(y,l,r){function u(c){return function(){return c}}var a=function(){};a.thatReturns=u,a.thatReturnsFalse=u(!1),a.thatReturnsTrue=u(!0),a.thatReturnsNull=u(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(c){return c},y.exports=a},function(y,l,r){(function(u){function a(c,m,p,x,j,P,k,T){if(!c){var o;if(m===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var n=[p,x,j,P,k,T],d=0;o=new Error(m.replace(/%s/g,function(){return n[d++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}}y.exports=a}).call(l,r(2))},function(y,l,r){var u="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";y.exports=u},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(u){return Math.min.apply(Math,u)}},function(y,l,r){(function(u){var a=r(4),c=a;y.exports=c}).call(l,r(2))},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(u){return Math.max.apply(Math,u)}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=r(3),a=c(u);function c(m){return m&&m.__esModule?m:{default:m}}l.default=function(m){var p=(0,a.default)(m),x=m.map(function(P){return Math.pow(P-p,2)}),j=(0,a.default)(x);return Math.sqrt(j)}},function(y,l,r){y.exports=r(12)},function(y,l,r){y.exports=r(13)},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.SparklinesText=l.SparklinesNormalBand=l.SparklinesReferenceLine=l.SparklinesSpots=l.SparklinesBars=l.SparklinesCurve=l.SparklinesLine=l.Sparklines=void 0;var u=function(){function $(_,z){for(var E=0;E<z.length;E++){var ne=z[E];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(_,ne.key,ne)}}return function(_,z,E){return z&&$(_.prototype,z),E&&$(_,E),_}}(),a=r(0),c=A(a),m=r(1),p=A(m),x=r(17),j=A(x),P=r(18),k=A(P),T=r(19),o=A(T),n=r(20),d=A(n),s=r(21),t=A(s),h=r(22),w=A(h),O=r(27),D=A(O),X=r(28),V=A(X);function A($){return $&&$.__esModule?$:{default:$}}function ee($,_){if(!($ instanceof _))throw new TypeError("Cannot call a class as a function")}function te($,_){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:$}function ae($,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);$.prototype=Object.create(_&&_.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf($,_):$.__proto__=_)}var oe=function($){ae(_,$);function _(z){return ee(this,_),te(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,z))}return u(_,[{key:"render",value:function(){var E=this.props,ne=E.data,ge=E.limit,v=E.width,N=E.height,I=E.svgWidth,W=E.svgHeight,C=E.preserveAspectRatio,G=E.margin,U=E.style,H=E.max,Y=E.min;if(ne.length===0)return null;var K=(0,V.default)({data:ne,limit:ge,width:v,height:N,margin:G,max:H,min:Y}),se={style:U,viewBox:"0 0 "+v+" "+N,preserveAspectRatio:C};return I>0&&(se.width=I),W>0&&(se.height=W),p.default.createElement("svg",se,p.default.Children.map(this.props.children,function(q){return p.default.cloneElement(q,{data:ne,points:K,width:v,height:N,margin:G})}))}}]),_}(m.PureComponent);oe.propTypes={data:c.default.array,limit:c.default.number,width:c.default.number,height:c.default.number,svgWidth:c.default.number,svgHeight:c.default.number,preserveAspectRatio:c.default.string,margin:c.default.number,style:c.default.object,min:c.default.number,max:c.default.number,onMouseMove:c.default.func},oe.defaultProps={data:[],width:240,height:60,preserveAspectRatio:"none",margin:2},l.Sparklines=oe,l.SparklinesLine=k.default,l.SparklinesCurve=o.default,l.SparklinesBars=d.default,l.SparklinesSpots=t.default,l.SparklinesReferenceLine=w.default,l.SparklinesNormalBand=D.default,l.SparklinesText=j.default},function(y,l,r){(function(u){var a=r(4),c=r(5),m=r(8),p=r(6),x=r(15);y.exports=function(j,P){var k=typeof Symbol=="function"&&Symbol.iterator,T="@@iterator";function o(v){var N=v&&(k&&v[k]||v[T]);if(typeof N=="function")return N}var n="<<anonymous>>",d={array:w("array"),bool:w("boolean"),func:w("function"),number:w("number"),object:w("object"),string:w("string"),symbol:w("symbol"),any:O(),arrayOf:D,element:X(),instanceOf:V,node:ae(),objectOf:ee,oneOf:A,oneOfType:te,shape:oe};function s(v,N){return v===N?v!==0||1/v===1/N:v!==v&&N!==N}function t(v){this.message=v,this.stack=""}t.prototype=Error.prototype;function h(v){function N(W,C,G,U,H,Y,K){return U=U||n,Y=Y||G,K!==p&&P&&c(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),C[G]==null?W?C[G]===null?new t("The "+H+" `"+Y+"` is marked as required "+("in `"+U+"`, but its value is `null`.")):new t("The "+H+" `"+Y+"` is marked as required in "+("`"+U+"`, but its value is `undefined`.")):null:v(C,G,U,H,Y)}var I=N.bind(null,!1);return I.isRequired=N.bind(null,!0),I}function w(v){function N(I,W,C,G,U,H){var Y=I[W],K=z(Y);if(K!==v){var se=E(Y);return new t("Invalid "+G+" `"+U+"` of type "+("`"+se+"` supplied to `"+C+"`, expected ")+("`"+v+"`."))}return null}return h(N)}function O(){return h(a.thatReturnsNull)}function D(v){function N(I,W,C,G,U){if(typeof v!="function")return new t("Property `"+U+"` of component `"+C+"` has invalid PropType notation inside arrayOf.");var H=I[W];if(!Array.isArray(H)){var Y=z(H);return new t("Invalid "+G+" `"+U+"` of type "+("`"+Y+"` supplied to `"+C+"`, expected an array."))}for(var K=0;K<H.length;K++){var se=v(H,K,C,G,U+"["+K+"]",p);if(se instanceof Error)return se}return null}return h(N)}function X(){function v(N,I,W,C,G){var U=N[I];if(!j(U)){var H=z(U);return new t("Invalid "+C+" `"+G+"` of type "+("`"+H+"` supplied to `"+W+"`, expected a single ReactElement."))}return null}return h(v)}function V(v){function N(I,W,C,G,U){if(!(I[W]instanceof v)){var H=v.name||n,Y=ge(I[W]);return new t("Invalid "+G+" `"+U+"` of type "+("`"+Y+"` supplied to `"+C+"`, expected ")+("instance of `"+H+"`."))}return null}return h(N)}function A(v){if(!Array.isArray(v))return a.thatReturnsNull;function N(I,W,C,G,U){for(var H=I[W],Y=0;Y<v.length;Y++)if(s(H,v[Y]))return null;var K=JSON.stringify(v);return new t("Invalid "+G+" `"+U+"` of value `"+H+"` "+("supplied to `"+C+"`, expected one of "+K+"."))}return h(N)}function ee(v){function N(I,W,C,G,U){if(typeof v!="function")return new t("Property `"+U+"` of component `"+C+"` has invalid PropType notation inside objectOf.");var H=I[W],Y=z(H);if(Y!=="object")return new t("Invalid "+G+" `"+U+"` of type "+("`"+Y+"` supplied to `"+C+"`, expected an object."));for(var K in H)if(H.hasOwnProperty(K)){var se=v(H,K,C,G,U+"."+K,p);if(se instanceof Error)return se}return null}return h(N)}function te(v){if(!Array.isArray(v))return a.thatReturnsNull;for(var N=0;N<v.length;N++){var I=v[N];if(typeof I!="function")return m(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",ne(I),N),a.thatReturnsNull}function W(C,G,U,H,Y){for(var K=0;K<v.length;K++){var se=v[K];if(se(C,G,U,H,Y,p)==null)return null}return new t("Invalid "+H+" `"+Y+"` supplied to "+("`"+U+"`."))}return h(W)}function ae(){function v(N,I,W,C,G){return $(N[I])?null:new t("Invalid "+C+" `"+G+"` supplied to "+("`"+W+"`, expected a ReactNode."))}return h(v)}function oe(v){function N(I,W,C,G,U){var H=I[W],Y=z(H);if(Y!=="object")return new t("Invalid "+G+" `"+U+"` of type `"+Y+"` "+("supplied to `"+C+"`, expected `object`."));for(var K in v){var se=v[K];if(se){var q=se(H,K,C,G,U+"."+K,p);if(q)return q}}return null}return h(N)}function $(v){switch(typeof v){case"number":case"string":case"undefined":return!0;case"boolean":return!v;case"object":if(Array.isArray(v))return v.every($);if(v===null||j(v))return!0;var N=o(v);if(N){var I=N.call(v),W;if(N!==v.entries){for(;!(W=I.next()).done;)if(!$(W.value))return!1}else for(;!(W=I.next()).done;){var C=W.value;if(C&&!$(C[1]))return!1}}else return!1;return!0;default:return!1}}function _(v,N){return v==="symbol"||N["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&N instanceof Symbol}function z(v){var N=typeof v;return Array.isArray(v)?"array":v instanceof RegExp?"object":_(N,v)?"symbol":N}function E(v){if(typeof v>"u"||v===null)return""+v;var N=z(v);if(N==="object"){if(v instanceof Date)return"date";if(v instanceof RegExp)return"regexp"}return N}function ne(v){var N=E(v);switch(N){case"array":case"object":return"an "+N;case"boolean":case"date":case"regexp":return"a "+N;default:return N}}function ge(v){return!v.constructor||!v.constructor.name?n:v.constructor.name}return d.checkPropTypes=x,d.PropTypes=d,d}}).call(l,r(2))},function(y,l,r){(function(u){function a(c,m,p,x,j){}y.exports=a}).call(l,r(2))},function(y,l,r){var u=r(4),a=r(5),c=r(6);y.exports=function(){function m(j,P,k,T,o,n){n!==c&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}m.isRequired=m;function p(){return m}var x={array:m,bool:m,func:m,number:m,object:m,string:m,symbol:m,any:m,arrayOf:p,element:m,instanceOf:p,node:m,objectOf:p,oneOf:p,oneOfType:p,shape:p};return x.checkPropTypes=u,x.PropTypes=x,x}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function o(n,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,d,s){return d&&o(n.prototype,d),s&&o(n,s),n}}(),a=r(0),c=x(a),m=r(1),p=x(m);function x(o){return o&&o.__esModule?o:{default:o}}function j(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function P(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:o}function k(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var T=function(o){k(n,o);function n(){return j(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,[{key:"render",value:function(){var s=this.props,t=s.point,h=s.text,w=s.fontSize,O=s.fontFamily,D=t.x,X=t.y;return p.default.createElement("g",null,p.default.createElement("text",{x:D,y:X,fontFamily:O||"Verdana",fontSize:w||10},h))}}]),n}(p.default.Component);T.propTypes={text:c.default.string,point:c.default.object,fontSize:c.default.number,fontFamily:c.default.string},T.defaultProps={text:"",point:{x:0,y:0}},l.default=T},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function o(n,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,d,s){return d&&o(n.prototype,d),s&&o(n,s),n}}(),a=r(0),c=x(a),m=r(1),p=x(m);function x(o){return o&&o.__esModule?o:{default:o}}function j(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function P(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:o}function k(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var T=function(o){k(n,o);function n(){return j(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,[{key:"render",value:function(){var s=this.props,t=s.data,h=s.points;s.width;var w=s.height,O=s.margin,D=s.color,X=s.style,V=s.onMouseMove,A=h.map(function(_){return[_.x,_.y]}).reduce(function(_,z){return _.concat(z)}),ee=[h[h.length-1].x,w-O,O,w-O,O,h[0].y],te=A.concat(ee),ae={stroke:D||X.stroke||"slategray",strokeWidth:X.strokeWidth||"1",strokeLinejoin:X.strokeLinejoin||"round",strokeLinecap:X.strokeLinecap||"round",fill:"none"},oe={stroke:X.stroke||"none",strokeWidth:"0",fillOpacity:X.fillOpacity||".1",fill:X.fill||D||"slategray",pointerEvents:"auto"},$=h.map(function(_,z){return p.default.createElement("circle",{key:z,cx:_.x,cy:_.y,r:2,style:oe,onMouseEnter:function(ne){return V("enter",t[z],_)},onClick:function(ne){return V("click",t[z],_)}})});return p.default.createElement("g",null,$,p.default.createElement("polyline",{points:te.join(" "),style:oe}),p.default.createElement("polyline",{points:A.join(" "),style:ae}))}}]),n}(p.default.Component);T.propTypes={color:c.default.string,style:c.default.object},T.defaultProps={style:{},onMouseMove:function(){}},l.default=T},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function o(n,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,d,s){return d&&o(n.prototype,d),s&&o(n,s),n}}(),a=r(0),c=x(a),m=r(1),p=x(m);function x(o){return o&&o.__esModule?o:{default:o}}function j(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function P(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:o}function k(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var T=function(o){k(n,o);function n(){return j(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,[{key:"render",value:function(){var s=this.props,t=s.points;s.width;var h=s.height,w=s.margin,O=s.color,D=s.style,X=s.divisor,V=X===void 0?.25:X,A=void 0,ee=function(E){var ne=void 0;if(!A)ne=[E.x,E.y];else{var ge=(E.x-A.x)*V;ne=["C",A.x+ge,A.y,E.x-ge,E.y,E.x,E.y]}return A=E,ne},te=t.map(function(z){return ee(z)}).reduce(function(z,E){return z.concat(E)}),ae=["L"+t[t.length-1].x,h-w,w,h-w,w,t[0].y],oe=te.concat(ae),$={stroke:O||D.stroke||"slategray",strokeWidth:D.strokeWidth||"1",strokeLinejoin:D.strokeLinejoin||"round",strokeLinecap:D.strokeLinecap||"round",fill:"none"},_={stroke:D.stroke||"none",strokeWidth:"0",fillOpacity:D.fillOpacity||".1",fill:D.fill||O||"slategray"};return p.default.createElement("g",null,p.default.createElement("path",{d:"M"+oe.join(" "),style:_}),p.default.createElement("path",{d:"M"+te.join(" "),style:$}))}}]),n}(p.default.Component);T.propTypes={color:c.default.string,style:c.default.object},T.defaultProps={style:{}},l.default=T},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function o(n,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,d,s){return d&&o(n.prototype,d),s&&o(n,s),n}}(),a=r(0),c=x(a),m=r(1),p=x(m);function x(o){return o&&o.__esModule?o:{default:o}}function j(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function P(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:o}function k(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var T=function(o){k(n,o);function n(){return j(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,[{key:"render",value:function(){var s=this,t=this.props,h=t.points,w=t.height,O=t.style,D=t.barWidth,X=t.margin,V=t.onMouseMove,A=1*(O&&O.strokeWidth||0),ee=X?2*X:0,te=D||(h&&h.length>=2?Math.max(0,h[1].x-h[0].x-A-ee):0);return p.default.createElement("g",{transform:"scale(1,-1)"},h.map(function(ae,oe){return p.default.createElement("rect",{key:oe,x:ae.x-(te+A)/2,y:-w,width:te,height:Math.max(0,w-ae.y),style:O,onMouseMove:V&&V.bind(s,ae)})}))}}]),n}(p.default.Component);T.propTypes={points:c.default.arrayOf(c.default.object),height:c.default.number,style:c.default.object,barWidth:c.default.number,margin:c.default.number,onMouseMove:c.default.func},T.defaultProps={style:{fill:"slategray"}},l.default=T},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function o(n,d){for(var s=0;s<d.length;s++){var t=d[s];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,d,s){return d&&o(n.prototype,d),s&&o(n,s),n}}(),a=r(0),c=x(a),m=r(1),p=x(m);function x(o){return o&&o.__esModule?o:{default:o}}function j(o,n){if(!(o instanceof n))throw new TypeError("Cannot call a class as a function")}function P(o,n){if(!o)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:o}function k(o,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);o.prototype=Object.create(n&&n.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(o,n):o.__proto__=n)}var T=function(o){k(n,o);function n(){return j(this,n),P(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return u(n,[{key:"lastDirection",value:function(s){return Math.sign=Math.sign||function(t){return t>0?1:-1},s.length<2?0:Math.sign(s[s.length-2].y-s[s.length-1].y)}},{key:"render",value:function(){var s=this.props,t=s.points;s.width,s.height;var h=s.size,w=s.style,O=s.spotColors,D=p.default.createElement("circle",{cx:t[0].x,cy:t[0].y,r:h,style:w}),X=p.default.createElement("circle",{cx:t[t.length-1].x,cy:t[t.length-1].y,r:h,style:w||{fill:O[this.lastDirection(t)]}});return p.default.createElement("g",null,w&&D,X)}}]),n}(p.default.Component);T.propTypes={size:c.default.number,style:c.default.object,spotColors:c.default.object},T.defaultProps={size:2,spotColors:{"-1":"red",0:"black",1:"green"}},l.default=T},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function s(t,h){for(var w=0;w<h.length;w++){var O=h[w];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(t,O.key,O)}}return function(t,h,w){return h&&s(t.prototype,h),w&&s(t,w),t}}(),a=r(0),c=k(a),m=r(1),p=k(m),x=r(23),j=P(x);function P(s){if(s&&s.__esModule)return s;var t={};if(s!=null)for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&(t[h]=s[h]);return t.default=s,t}function k(s){return s&&s.__esModule?s:{default:s}}function T(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function o(s,t){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:s}function n(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(s,t):s.__proto__=t)}var d=function(s){n(t,s);function t(){return T(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,[{key:"render",value:function(){var w=this.props,O=w.points,D=w.margin,X=w.type,V=w.style,A=w.value,ee=O.map(function(ae){return ae.y}),te=X=="custom"?A:j[X](ee);return p.default.createElement("line",{x1:O[0].x,y1:te+D,x2:O[O.length-1].x,y2:te+D,style:V})}}]),t}(p.default.Component);d.propTypes={type:c.default.oneOf(["max","min","mean","avg","median","custom"]),value:c.default.number,style:c.default.object},d.defaultProps={type:"mean",style:{stroke:"red",strokeOpacity:.75,strokeDasharray:"2, 2"}},l.default=d},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.variance=l.stdev=l.median=l.midRange=l.avg=l.mean=l.max=l.min=void 0;var u=r(7),a=d(u),c=r(3),m=d(c),p=r(24),x=d(p),j=r(25),P=d(j),k=r(10),T=d(k),o=r(26),n=d(o);function d(s){return s&&s.__esModule?s:{default:s}}l.min=a.default,l.max=a.default,l.mean=m.default,l.avg=m.default,l.midRange=x.default,l.median=P.default,l.stdev=T.default,l.variance=n.default},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=r(7),a=p(u),c=r(9),m=p(c);function p(x){return x&&x.__esModule?x:{default:x}}l.default=function(x){return(0,m.default)(x)-(0,a.default)(x)/2}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(u){return u.sort(function(a,c){return a-c})[Math.floor(u.length/2)]}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=r(3),a=c(u);function c(m){return m&&m.__esModule?m:{default:m}}l.default=function(m){var p=(0,a.default)(m),x=m.map(function(j){return Math.pow(j-p,2)});return(0,a.default)(x)}},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=function(){function t(h,w){for(var O=0;O<w.length;O++){var D=w[O];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(h,D.key,D)}}return function(h,w,O){return w&&t(h.prototype,w),O&&t(h,O),h}}(),a=r(0),c=T(a),m=r(1),p=T(m),x=r(3),j=T(x),P=r(10),k=T(P);function T(t){return t&&t.__esModule?t:{default:t}}function o(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}function n(t,h){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:t}function d(t,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);t.prototype=Object.create(h&&h.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(t,h):t.__proto__=h)}var s=function(t){d(h,t);function h(){return o(this,h),n(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return u(h,[{key:"render",value:function(){var O=this.props,D=O.points,X=O.margin,V=O.style,A=D.map(function(ae){return ae.y}),ee=(0,j.default)(A),te=(0,k.default)(A);return p.default.createElement("rect",{x:D[0].x,y:ee-te+X,width:D[D.length-1].x-D[0].x,height:k.default*2,style:V})}}]),h}(p.default.Component);s.propTypes={style:c.default.object},s.defaultProps={style:{fill:"red",fillOpacity:.1}},l.default=s},function(y,l,r){Object.defineProperty(l,"__esModule",{value:!0});var u=r(7),a=p(u),c=r(9),m=p(c);function p(x){return x&&x.__esModule?x:{default:x}}l.default=function(x){var j=x.data,P=x.limit,k=x.width,T=k===void 0?1:k,o=x.height,n=o===void 0?1:o,d=x.margin,s=d===void 0?0:d,t=x.max,h=t===void 0?(0,m.default)(j):t,w=x.min,O=w===void 0?(0,a.default)(j):w,D=j.length;P&&P<D&&(j=j.slice(D-P));var X=(n-s*2)/(h-O||2),V=(T-s*2)/((P||D)-(D>1?1:0));return j.map(function(A,ee){return{x:ee*V+s,y:(h===O?1:h-A)*X+s}})}}])})})(ct);var Ce=ct.exports;const at=typeof TextDecoder<"u"?new TextDecoder("utf-8"):null;async function wn(M){if(typeof M=="string")return M;if(typeof window<"u"&&M instanceof File)return await M.text();if(M&&M.byteLength!=null)return at?at.decode(M):String.fromCharCode.apply(null,new Uint8Array(M));throw new Error("Entrada inválida para leitura de texto OFX")}function Sn(M){if(!M)return null;const S=String(M).match(/(\d{4})(\d{2})(\d{2})/);if(!S)return null;const[J,y,l,r]=S,u=Number(y),a=Number(l)-1,c=Number(r);return new Date(u,a,c).toISOString().split("T")[0]}function Tn(M){if(M==null)return 0;const S=Number(String(M).replace(",","."));return isNaN(S)?0:S}function me(M,S){const J=new RegExp(`<${S}>([^\r
<]*)`,"i"),y=M.match(J);if(y)return y[1].trim();const l=new RegExp(`<${S}>([sS]*?)</${S}>`,"i"),r=M.match(l);return r?r[1].trim():""}function kn(M){const S=/<STMTTRN>([\s\S]*?)<\/STMTTRN>/gi,J=[];let y;for(;(y=S.exec(M))!==null;)J.push(y[1]);if(J.length)return J;const l=/<STMTTRN>[\s\S]*?(?=<STMTTRN>|<\/BANKTRANLIST>|<\/STMTRS>|$)/gi;return(M.match(l)||[]).map(u=>u.replace(/^<STMTTRN>/i,""))}function Pn(M){return/<OFX[>\s]/i.test(M)||/<OFX>/i.test(M)}function On(M){var l;if(!M||!Pn(M))throw new Error("Arquivo OFX inválido ou não reconhecido");M.toLowerCase();const S=((l=/\<banktranlist\>([\s\S]*?)\<\/banktranlist\>/i.exec(M))==null?void 0:l[1])||M;return kn(S).map(r=>{const u=me(r,"TRNTYPE")||me(r,"trntype"),a=me(r,"DTPOSTED")||me(r,"dtposted")||me(r,"DTUSER"),c=me(r,"TRNAMT")||me(r,"trnamt"),m=me(r,"MEMO")||me(r,"memo")||me(r,"NAME"),p=me(r,"FITID")||me(r,"fitid"),x=Sn(a),j=Tn(c),P=(m||"").trim(),k=(u||"").toUpperCase();return{data:x,valor:j,descricao:P,tipo:k,identificador:p}}).filter(r=>r.data&&(r.valor||r.valor===0))}async function _n(M){const S=await wn(M);return On(S)}const We=10,Dn="expensesPage";function Zn(){var Qe;const{expenses:M,categories:S,paymentMethods:J,addExpense:y,updateExpense:l,deleteExpense:r,toggleExpensePayment:u}=rt(),{toast:a}=It(),[c,m]=L.useState(!1),[p,x]=L.useState(null),[j,P]=L.useState(1),[k,T]=L.useState(""),[o,n]=L.useState("all"),[d,s]=L.useState("all"),[t,h]=L.useState("date-desc"),[w,O]=L.useState(!1),[D,X]=L.useState(!1),[V,A]=L.useState([]),[ee,te]=L.useState({}),[ae,oe]=L.useState({}),[$,_]=L.useState({}),[z,E]=L.useState([]),[ne,ge]=L.useState(!1),[v,N]=L.useState({}),I=L.useMemo(()=>S.filter(i=>i.tipo==="gasto"),[S]),W=((Qe=I[0])==null?void 0:Qe.id)||"",[C,G]=L.useState(W),[U,H]=L.useState(!1),[Y,K]=L.useState(""),se="ofx-file-input",[q,_e]=Lt(`filter_${Dn}`,()=>({periodType:"monthly",dateRange:void 0,month:new Date().getMonth(),year:new Date().getFullYear()})),ut=i=>{_e({...q,dateRange:i})},dt=i=>{_e({dateRange:void 0,periodType:"monthly",month:i,year:q.year||new Date().getFullYear()})},ft=i=>{_e(f=>({...f,dateRange:void 0,year:i}))},mt=i=>{_e(f=>({...f,periodType:i,dateRange:void 0}))};L.useEffect(()=>{!C&&W&&G(W)},[W,C]);const ht=i=>{const f=[];return i.forEach((g,F)=>{var ie;const Q=g.data,B=((ie=g.descricao)==null?void 0:ie.toLowerCase().trim())||"",le=Number(g.valor)||0,ce=M.find(R=>{var Me;const re=R.data,Ae=((Me=R.descricao)==null?void 0:Me.toLowerCase().trim())||"",Le=Number(R.valor)||0;return re===Q&&Ae===B&&Math.abs(Le-le)<.01});ce&&f.push({ofxIndex:F,ofxTransaction:g,existingExpense:ce})}),f},pt=()=>{const i=document.getElementById(se);i&&i.click()},gt=async i=>{const f=i.target.files&&i.target.files[0];if(f)try{const F=(await _n(f)).filter(B=>B.valor<0||String(B.tipo).toUpperCase()==="DEBIT").map(B=>({...B,valor:Math.abs(B.valor)}));if(F.length===0){a({title:"Nenhuma despesa encontrada no OFX",description:"Verifique se o arquivo contém lançamentos de saída.",variant:"destructive"}),i.target.value="";return}const Q=ht(F);E(Q),N({}),A(F),te({}),oe(F.reduce((B,le,ce)=>(B[ce]=le.descricao||"Lançamento OFX",B),{})),_({}),Q.length>0?ge(!0):O(!0)}catch(g){a({title:"Falha ao ler OFX",description:(g==null?void 0:g.message)||"Formato inválido.",variant:"destructive"})}finally{i.target.value=""}},xt=async()=>{if(!(V.some((f,g)=>ee[g])||!!C)){a({title:"Selecione uma categoria",description:"Defina ao menos a categoria padrão ou por item.",variant:"destructive"});return}X(!0);try{let f=0,g=0;for(let Q=0;Q<V.length;Q++){const B=V[Q];if(z.find(R=>R.ofxIndex===Q)&&v[Q]==="skip"){g++;continue}const ce=ee[Q]||C;if(!ce)continue;const ie={descricao:ae[Q]??B.descricao??"Lançamento OFX",valor:Number(B.valor)||0,categoria_id:ce,pago:U,recorrente:!1,data:B.data||new Date().toISOString().split("T")[0],meio_pagamento_id:$[Q]||Y||null};try{await y(ie),f++}catch{}}let F=`${f} despesas adicionadas`;g>0&&(F+=`, ${g} duplicatas ignoradas`),a({title:"Importação concluída",description:F}),O(!1),A([]),te({}),oe({}),_({}),E([]),N({})}catch(f){a({title:"Erro na importação",description:(f==null?void 0:f.message)||"Tente novamente.",variant:"destructive"})}finally{X(!1)}},vt=(i,f)=>{N(g=>({...g,[i]:f}))},yt=()=>{const i=[],f={},g={},F={};V.forEach((Q,B)=>{const le=z.some(R=>R.ofxIndex===B),ce=v[B];if(le&&ce==="skip")return;const ie=i.length;i.push(Q),ae[B]!=null&&(f[ie]=ae[B]),ee[B]!=null&&(g[ie]=ee[B]),$[B]!=null&&(F[ie]=$[B])}),A(i),oe(f),te(g),_(F),E([]),N({}),ge(!1),i.length>0?O(!0):O(!1)},jt=()=>{const i={};z.forEach(f=>{i[f.ofxIndex]="skip"}),N(i)},bt=()=>{const i={};z.forEach(f=>{i[f.ofxIndex]="import"}),N(i)},{filteredExpenses:Z,totalSpent:xe,trendData:b,paidExpenses:Mn,pendingExpenses:Rn,totalPaid:Fe,totalPending:Nt}=L.useMemo(()=>{let i=[],f,g;q.dateRange&&q.dateRange.from?(f=q.dateRange.from,g=q.dateRange.to||q.dateRange.from):q.periodType==="yearly"&&q.year?(f=qt(new Date(q.year,0,1)),g=Qt(new Date(q.year,11,31))):q.periodType==="monthly"&&q.month!==void 0&&q.year&&(f=Je(new Date(q.year,q.month,1)),g=Ze(new Date(q.year,q.month,1))),f&&g?(g.setHours(23,59,59,999),i=M.filter(R=>{const re=qe(R.data);return re>=f&&re<=g})):i=M,k&&(i=i.filter(R=>R.descricao.toLowerCase().includes(k.toLowerCase()))),o!=="all"&&(i=i.filter(R=>R.categoria_id===o)),d!=="all"&&(i=i.filter(R=>d==="paid"?R.pago===!0:d==="pending"?R.pago===!1:!0)),i.sort((R,re)=>{switch(t){case"date-asc":return new Date(R.data)-new Date(re.data);case"date-desc":return new Date(re.data)-new Date(R.data);case"value-asc":return R.valor-re.valor;case"value-desc":return re.valor-R.valor;case"description":return R.descricao.localeCompare(re.descricao);default:return new Date(re.data)-new Date(R.data)}});const F=[];for(let R=6;R>=0;R--){const re=q.periodType==="monthly"?new Date(q.year,q.month-R,1):cn(new Date,R),Ae=Je(re),Le=Ze(re),Me=M.filter(Be=>{const Re=qe(Be.data);return Re>=Ae&&Re<=Le});F.push(Me.reduce((Be,Re)=>Be+Re.valor,0))}const Q=i.reduce((R,re)=>R+re.valor,0),B=i.filter(R=>R.pago===!0),le=i.filter(R=>R.pago===!1),ce=B.reduce((R,re)=>R+re.valor,0),ie=le.reduce((R,re)=>R+re.valor,0);return{filteredExpenses:i,totalSpent:Q,trendData:F,paidExpenses:B,pendingExpenses:le,totalPaid:ce,totalPending:ie}},[M,q,k,o,d,t]);L.useMemo(()=>{if(Z.length===0)return[];const i=I.reduce((f,g)=>(f[g.id]={categoryName:g.nome,total:0},f),{});return Z.forEach(f=>{i[f.categoria_id]&&(i[f.categoria_id].total+=f.valor)}),Object.values(i).filter(f=>f.total>0).sort((f,g)=>g.total-f.total)},[Z,I]);const Ie=Math.ceil(Z.length/We),wt=Z.slice((j-1)*We,j*We),[be,De]=L.useState([]),Ne=be.length,St=(i,f)=>{De(g=>f?Array.from(new Set([...g,i])):g.filter(F=>F!==i))},Tt=(i,f)=>{De(f?Array.from(new Set([...be,...i])):be.filter(g=>!i.includes(g)))},kt=async()=>{if(Ne!==0)try{for(const i of be)await u(i);a({title:"Atualização concluída",description:`${Ne} lançamento(s) atualizados`}),De([])}catch(i){a({title:"Erro ao atualizar em lote",description:i.message,variant:"destructive"})}},Pt=async()=>{if(Ne!==0)try{for(const i of be)await r(i);a({title:"Exclusão concluída",description:`${Ne} lançamento(s) excluídos`}),De([])}catch(i){a({title:"Erro ao excluir em lote",description:i.message,variant:"destructive"})}},Ot=async(i,f)=>{try{f?(await l(f,i),a({title:"Despesa atualizada com sucesso!"})):(await y(i),a({title:"Despesa adicionada com sucesso!"})),m(!1),x(null)}catch(g){a({title:"Erro ao salvar despesa",description:g.message,variant:"destructive"})}},_t=i=>{x({...i,categories:I}),m(!0)},Dt=async i=>{try{await r(i),a({title:"Despesa excluída com sucesso!"})}catch(f){a({title:"Erro ao excluir despesa",description:f.message,variant:"destructive"})}},Mt=async i=>{try{await u(i),a({title:"Status de pagamento atualizado!"})}catch(f){a({title:"Erro ao atualizar status",description:f.message,variant:"destructive"})}},Rt=i=>{i>0&&i<=Ie&&P(i)},Ct=i=>{i||x(null),m(i)},fe=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"});return e.jsxs(e.Fragment,{children:[e.jsxs(At,{children:[e.jsx("title",{children:"Controle de Despesas - Lumify"}),e.jsx("meta",{name:"description",content:"Adicione e gerencie suas despesas."})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4 page-top",children:[e.jsx(Vt,{title:"Controle de Despesas",subtitle:"Gerencie suas despesas e acompanhe seus gastos",actionButton:e.jsx(jn,{onSubmit:Ot,expenseToEdit:p,isOpen:c,onOpenChange:Ct})}),e.jsxs(hn,{defaultValue:"relatorio",className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs(pn,{className:"grid w-full md:w-auto grid-cols-2",children:[e.jsxs(et,{value:"relatorio",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"})," Relatório"]}),e.jsxs(et,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-4 w-4"})," Dashboard"]})]}),e.jsxs("div",{className:"w-full md:w-auto flex items-center gap-2",children:[e.jsx("input",{id:se,type:"file",accept:".ofx,.qfx,.ofc,.xml,.txt",className:"hidden",onChange:gt}),e.jsxs(ve,{variant:"outline",onClick:pt,className:"flex items-center gap-2",children:[e.jsx(yn,{className:"h-4 w-4"})," Importar OFX"]}),e.jsx(Kt,{periodType:q.periodType,setPeriodType:mt,dateRange:q.dateRange,setDateRange:ut,month:q.month,setMonth:dt,year:q.year,setYear:ft})]})]}),e.jsx(tt,{value:"relatorio",className:"mt-4 md:mt-5 space-y-4 md:space-y-5",children:e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsx(pe,{children:"Suas Despesas"}),e.jsx(je,{children:"Lista de todas as despesas no período selecionado."})]}),e.jsxs(de,{children:[Ne>0&&e.jsxs("div",{className:"mb-2 flex items-center gap-2 text-sm",children:[e.jsxs("div",{className:"text-muted-foreground",children:["Selecionados: ",Ne]}),e.jsxs(ve,{variant:"outline",size:"sm",onClick:kt,className:"flex items-center gap-2",children:[e.jsx(xn,{className:"h-4 w-4"})," Marcar como pago"]}),e.jsxs(ve,{variant:"destructive",size:"sm",onClick:Pt,className:"flex items-center gap-2",children:[e.jsx(gn,{className:"h-4 w-4"})," Excluir"]})]}),e.jsx($t,{transactions:wt,categories:I,paymentMethods:J,type:"expense",onEdit:_t,onDelete:Dt,onTogglePayment:Mt,onUpdatePaymentMethod:l,selectable:!0,selectedIds:be,onSelectOne:St,onSelectAll:Tt,searchTerm:k,onSearchChange:T,selectedCategory:o,onCategoryChange:n,paymentStatus:d,onPaymentStatusChange:s,sortBy:t,onSortChange:h}),Ie>1&&e.jsx(zt,{currentPage:j,totalPages:Ie,onPageChange:Rt})]})]})}),e.jsx(tt,{value:"dashboard",className:"mt-4 md:mt-5 space-y-4 md:space-y-5",children:Z.length===0?e.jsx(ue,{children:e.jsxs(de,{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Nenhuma despesa encontrada"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:k||o!=="all"||d!=="all"?"Tente ajustar os filtros para ver suas despesas.":"Adicione algumas despesas para ver o dashboard completo."})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid gap-3 md:gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(ue,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Gasto Total"}),e.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:fe.format(xe)}),e.jsx(Ce.Sparklines,{data:b,children:e.jsx(Ce.SparklinesLine,{color:"#f87171"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.length>1&&b[b.length-1]>b[b.length-2]?`+${((b[b.length-1]-b[b.length-2])/b[b.length-2]*100).toFixed(1)}% vs anterior`:b.length>1&&b[b.length-1]<b[b.length-2]?`${((b[b.length-1]-b[b.length-2])/b[b.length-2]*100).toFixed(1)}% vs anterior`:"Primeiro período"})]})]}),e.jsxs(ue,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Status de Pagamento"}),e.jsx(Wt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:fe.format(Fe)}),e.jsxs("div",{className:"text-sm text-orange-600 font-medium",children:[fe.format(Nt)," pendente"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:xe>0?`${Fe/xe*100}%`:"0%"}})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[xe>0?`${Math.round(Fe/xe*100)}%`:"0%"," quitado"]})]})]}),e.jsxs(ue,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Despesa Média"}),e.jsx($e,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Z.length>0?fe.format(xe/Z.length):"R$ 0,00"}),e.jsx(Ce.Sparklines,{data:b.map(i=>i/(Z.length||1)),children:e.jsx(Ce.SparklinesLine,{color:"#fbbf24"})}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z.length," transação",Z.length!==1?"ões":""," registrada",Z.length!==1?"s":""]})]})]}),e.jsxs(ue,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pe,{className:"text-sm font-medium",children:"Maior Gasto"}),e.jsx(nt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(de,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:Z.length>0?fe.format(Math.max(...Z.map(i=>i.valor))):"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Z.length>0?(()=>{var g,F;const i=Math.max(...Z.map(Q=>Q.valor)),f=Z.find(Q=>Q.valor===i);return((g=f==null?void 0:f.descricao)==null?void 0:g.substring(0,20))+(((F=f==null?void 0:f.descricao)==null?void 0:F.length)>20?"...":"")})():"Nenhuma despesa"})]})]})]}),e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-5 w-5"}),"Análise por Meio de Pagamento"]}),e.jsx(je,{children:"Como você está gastando seu dinheiro"})]}),e.jsx(de,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map(i=>{const f=Z.filter(B=>B.meio_pagamento_id===i.id),g=f.reduce((B,le)=>B+le.valor,0),F=xe>0?g/xe*100:0;if(g===0)return null;const Q=B=>({cartao_credito:"💳",cartao_debito:"💳",dinheiro:"💵",pix:"📱",transferencia:"🏦",boleto:"📄",outros:"💼"})[B]||"💼";return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:Q(i.tipo)}),e.jsx("span",{className:"font-medium",children:i.nome})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[F.toFixed(1),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold text-primary",children:fe.format(g)}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${F}%`,backgroundColor:i.cor||"#3b82f6"}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.length," transação",f.length!==1?"ões":""]})]},i.id)})})})]}),e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-5 w-5"}),"Comparação Temporal"]}),e.jsx(je,{children:"Evolução dos seus gastos ao longo do tempo"})]}),e.jsx(de,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:b.slice(-3).map((i,f)=>{const g=f===b.slice(-3).length-1,F=b[b.length-3+f-1],Q=F&&F>0?(i-F)/F*100:0,B=(ie,R)=>g?"Período Atual":ie===R-2?"Mês Anterior":ie===R-3?"Antepenúltimo Mês":`Mês ${R-ie}`,le=Math.max(...b.filter(ie=>ie>0)),ce=le>0?i/le*100:0;return e.jsxs("div",{className:`p-4 border rounded-lg ${g?"border-primary bg-primary/5":""}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:B(f,b.slice(-3).length)}),Q!==0&&!isNaN(Q)&&e.jsxs("span",{className:`text-xs ${Q>0?"text-red-600":"text-green-600"}`,children:[Q>0?"↗":"↘"," ",Math.abs(Q).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-2xl font-bold",children:fe.format(i)}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{width:`${ce}%`,backgroundColor:g?"#3b82f6":"#94a3b8"}})})]},f)})})})]}),e.jsxs(ue,{children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(nt,{className:"h-5 w-5 text-primary"}),"Insights Financeiros"]}),e.jsx(je,{children:"Análises personalizadas dos seus gastos"})]}),e.jsx(de,{children:e.jsxs("div",{className:"space-y-4",children:[(()=>{const i=J.map(f=>({method:f,total:Z.filter(g=>g.meio_pagamento_id===f.id).reduce((g,F)=>g+F.valor,0)})).filter(f=>f.total>0).sort((f,g)=>g.total-f.total);if(i.length>0){const f=i[0],g=f.total/xe*100;return e.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"💳"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Meio de Pagamento Preferido"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Você usa ",e.jsx("strong",{children:f.method.nome})," para ",g.toFixed(1),"% dos seus gastos (",fe.format(f.total),").",g>70&&" Considere diversificar seus meios de pagamento para melhor controle."]})]})]})})}return null})(),(()=>{const i=I.map(f=>({category:f,total:Z.filter(g=>g.categoria_id===f.id).reduce((g,F)=>g+F.valor,0)})).filter(f=>f.total>0).sort((f,g)=>g.total-f.total);if(i.length>0){const f=i[0],g=f.total/xe*100;return e.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"📊"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-900",children:"Categoria com Maior Gasto"}),e.jsxs("p",{className:"text-sm text-orange-700",children:[e.jsx("strong",{children:f.category.nome})," representa ",g.toFixed(1),"% dos seus gastos (",fe.format(f.total),").",g>50&&" Esta categoria está consumindo mais da metade do seu orçamento."]})]})]})})}return null})(),b.length>1&&e.jsx("div",{className:`p-4 border rounded-lg ${b[b.length-1]>b[b.length-2]?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:b[b.length-1]>b[b.length-2]?"📈":"📉"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${b[b.length-1]>b[b.length-2]?"text-red-900":"text-green-900"}`,children:"Tendência de Gastos"}),e.jsx("p",{className:`text-sm ${b[b.length-1]>b[b.length-2]?"text-red-700":"text-green-700"}`,children:b[b.length-1]>b[b.length-2]?`Seus gastos aumentaram ${((b[b.length-1]-b[b.length-2])/b[b.length-2]*100).toFixed(1)}% em relação ao período anterior.`:`Seus gastos diminuíram ${Math.abs((b[b.length-1]-b[b.length-2])/b[b.length-2]*100).toFixed(1)}% em relação ao período anterior.`})]})]})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-5",children:[e.jsx(Jt,{expenses:Z,categories:S}),e.jsx(bn,{expenses:Z,paymentMethods:J})]}),e.jsx(Nn,{expenses:Z}),e.jsx(Zt,{})]})})]}),e.jsx(Xe,{open:w,onOpenChange:O,children:e.jsxs(Ge,{className:"sm:max-w-4xl",children:[e.jsx(He,{children:e.jsx(Ye,{children:"Importar despesas do OFX"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.length," lançamento",V.length!==1?"s":""," de despesa encontrados."]}),e.jsxs("div",{className:"text-sm font-medium",children:["Total a importar: ",fe.format(V.reduce((i,f)=>i+(Number(f.valor)||0),0))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Categoria para as despesas"}),e.jsxs(Se,{value:C||void 0,onValueChange:G,children:[e.jsx(Te,{className:"w-full mt-1",children:e.jsx(ke,{placeholder:"Selecione uma categoria"})}),e.jsx(Pe,{children:I.map(i=>e.jsx(ye,{value:String(i.id),children:i.nome},i.id))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Meio de pagamento"}),e.jsxs(Se,{value:Y||void 0,onValueChange:i=>K(i==="none"?"":i),children:[e.jsx(Te,{className:"w-full mt-1",children:e.jsx(ke,{placeholder:"Selecione o meio de pagamento"})}),e.jsxs(Pe,{children:[e.jsx(ye,{value:"none",children:"Não especificado"}),J.map(i=>e.jsx(ye,{value:String(i.id),children:i.nome},i.id))]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{id:"importPaid",type:"checkbox",className:"rounded accent-primary",checked:U,onChange:i=>H(i.target.checked)}),e.jsx("label",{htmlFor:"importPaid",className:"text-sm",children:"Marcar como pago"})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Revise as descrições e categorias. Valores negativos são importados como despesas."}),e.jsxs("div",{className:"max-h-[60vh] overflow-auto border rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 text-xs text-muted-foreground border-b",children:[e.jsx("div",{className:"col-span-4",children:"Descrição"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-2",children:"Categoria"}),e.jsx("div",{className:"col-span-2",children:"Meio de Pagamento"})]}),V.map((i,f)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 items-center border-b last:border-b-0",children:[e.jsx("div",{className:"col-span-4",children:e.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",value:ae[f]??i.descricao??"Lançamento OFX",onChange:g=>oe(F=>({...F,[f]:g.target.value}))})}),e.jsx("div",{className:"col-span-2 text-xs",children:i.data}),e.jsx("div",{className:"col-span-2 text-right font-medium",children:fe.format(Number(i.valor)||0)}),e.jsx("div",{className:"col-span-2",children:e.jsxs(Se,{value:ee[f]||C||void 0,onValueChange:g=>te(F=>({...F,[f]:g})),children:[e.jsx(Te,{className:"w-full",children:e.jsx(ke,{placeholder:"Categoria"})}),e.jsx(Pe,{children:I.map(g=>e.jsx(ye,{value:String(g.id),children:g.nome},g.id))})]})}),e.jsx("div",{className:"col-span-2",children:e.jsxs(Se,{value:$[f]||Y||void 0,onValueChange:g=>_(F=>({...F,[f]:g==="none"?"":g})),children:[e.jsx(Te,{className:"w-full",children:e.jsx(ke,{placeholder:"Meio"})}),e.jsxs(Pe,{children:[e.jsx(ye,{value:"none",children:"Não especificado"}),J.map(g=>e.jsx(ye,{value:String(g.id),children:g.nome},g.id))]})]})})]},f))]})]}),e.jsxs(Yt,{children:[e.jsx(ve,{variant:"ghost",onClick:()=>O(!1),disabled:D,children:"Cancelar"}),e.jsx(ve,{onClick:xt,disabled:D||!C,children:D?"Importando...":"Confirmar importação"})]})]})}),e.jsx(Xe,{open:ne,onOpenChange:ge,children:e.jsxs(Ge,{className:"sm:max-w-4xl",children:[e.jsx(He,{children:e.jsx(Ye,{children:"Duplicatas Encontradas"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Foram encontradas ",z.length," transação(ões) que podem ser duplicatas de despesas já cadastradas. Você pode escolher importar ou ignorar cada uma delas."]}),e.jsxs("div",{className:"max-h-[50vh] overflow-auto border rounded-md",children:[e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 text-xs text-muted-foreground border-b",children:[e.jsx("div",{className:"col-span-3",children:"Descrição"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-3",children:"Despesa Existente"}),e.jsx("div",{className:"col-span-2",children:"Ação"})]}),z.map((i,f)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 p-2 items-center border-b last:border-b-0",children:[e.jsx("div",{className:"col-span-3 text-sm",children:i.ofxTransaction.descricao}),e.jsx("div",{className:"col-span-2 text-xs",children:i.ofxTransaction.data}),e.jsx("div",{className:"col-span-2 text-right font-medium",children:fe.format(Number(i.ofxTransaction.valor)||0)}),e.jsx("div",{className:"col-span-3 text-xs text-muted-foreground",children:i.existingExpense.descricao}),e.jsx("div",{className:"col-span-2",children:e.jsxs(Se,{value:v[i.ofxIndex]||void 0,onValueChange:g=>vt(i.ofxIndex,g),children:[e.jsx(Te,{className:"w-full",children:e.jsx(ke,{placeholder:"Escolher"})}),e.jsxs(Pe,{children:[e.jsx(ye,{value:"import",children:"Importar"}),e.jsx(ye,{value:"skip",children:"Ignorar"})]})]})})]},i.ofxIndex))]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ve,{variant:"outline",onClick:jt,children:"Ignorar Todas"}),e.jsx(ve,{variant:"outline",onClick:bt,children:"Importar Todas"}),e.jsx(ve,{onClick:yt,children:"Prosseguir"})]})]})]})})]})]})}export{Zn as ExpensesPage};
