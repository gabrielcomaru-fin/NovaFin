import{c as Ae,f as rt,r as H,j as e,A as Se,B as fe,C as ke,e as Ne,X as at,D as _e,o as ot}from"./index-9965e3b2.js";import{D as it,b as st,c as lt,d as ct,f as ut}from"./dialog-dd410bbf.js";import{S as oe,a as ie,b as se,c as le,d as ne}from"./select-c0176194.js";import{P as ft}from"./progress-3f92366f.js";import{U as dt,C as pt,p as mt}from"./ofx-d2254005.js";import{F as ht}from"./wallet-64bfd254.js";import{b as vt}from"./CompactHeader-3b1ef90b.js";const xt=Ae("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Oe=Ae("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function kt({isOpen:je,onOpenChange:ye,type:pe="expense",categories:S=[],paymentMethods:i=[],institutions:o=[],existingTransactions:f=[],onImport:d,onUndoImport:p,onClose:v}){var Re,Ce;const{toast:h}=rt(),g=H.useRef(null),[w,_]=H.useState("upload"),[P,k]=H.useState(!1),[a,n]=H.useState(!1),[m,r]=H.useState([]),[t,l]=H.useState({}),[y,b]=H.useState({}),[T,I]=H.useState({}),[Y,M]=H.useState({}),[Q,J]=H.useState({}),[Z,re]=H.useState(""),[C,N]=H.useState(""),[X,D]=H.useState(""),[K,ue]=H.useState(!1),[u,j]=H.useState([]),[$,E]=H.useState({}),[R,z]=H.useState(0),[F,A]=H.useState(0),[W,U]=H.useState(0),[ee,de]=H.useState(0),[ge,be]=H.useState([]),[Pe,we]=H.useState(!1),[me,Me]=H.useState(""),V=H.useMemo(()=>{const s={expense:{title:"Importar Despesas do OFX",filterFn:c=>c.valor<0||String(c.tipo).toUpperCase()==="DEBIT",transformValue:c=>Math.abs(c),defaultDescription:"Lançamento OFX",emptyMessage:"Nenhuma despesa encontrada no OFX",emptyDescription:"Verifique se o arquivo contém lançamentos de saída.",showPaymentMethods:!0,showInstitutions:!1,showPaidCheckbox:!0,valueColor:"text-red-600",icon:e.jsx(_e,{className:"h-5 w-5 text-red-600"})},income:{title:"Importar Receitas do OFX",filterFn:c=>c.valor>0||String(c.tipo).toUpperCase()==="CREDIT",transformValue:c=>Math.abs(c),defaultDescription:"Receita OFX",emptyMessage:"Nenhuma receita encontrada no OFX",emptyDescription:"Verifique se o arquivo contém lançamentos de entrada.",showPaymentMethods:!1,showInstitutions:!1,showPaidCheckbox:!1,valueColor:"text-green-600",icon:e.jsx(_e,{className:"h-5 w-5 text-green-600"})},investment:{title:"Importar Aportes do OFX",filterFn:c=>c.valor<0||String(c.tipo).toUpperCase()==="DEBIT",transformValue:c=>Math.abs(c),defaultDescription:"Aporte OFX",emptyMessage:"Nenhum aporte encontrado no OFX",emptyDescription:"Verifique se o arquivo contém lançamentos de saída relacionados a investimentos.",showPaymentMethods:!1,showInstitutions:!0,showPaidCheckbox:!1,valueColor:"text-blue-600",icon:e.jsx(_e,{className:"h-5 w-5 text-blue-600"})}};return s[pe]||s.expense},[pe]),he=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),Be=H.useCallback(s=>{if(!s||!f.length)return"";const c=s.toLowerCase().trim(),O=f.find(q=>{const x=(q.descricao||"").toLowerCase().trim();return x===c||x.includes(c)||c.includes(x)});return(O==null?void 0:O.categoria_id)||""},[f]),Xe=H.useCallback(s=>{const c=[];return s.forEach((O,q)=>{var G;const x=O.data,L=((G=O.descricao)==null?void 0:G.toLowerCase().trim())||"",te=Number(O.valor)||0,B=f.find(ae=>{var Fe;const ce=ae.data,Te=((Fe=ae.descricao)==null?void 0:Fe.toLowerCase().trim())||"",nt=Number(ae.valor||ae.valor_aporte)||0;return ce===x&&Te===L&&Math.abs(nt-Math.abs(te))<.01});B&&c.push({ofxIndex:q,ofxTransaction:O,existingTransaction:B})}),c},[f]),$e=s=>{s.preventDefault(),s.stopPropagation(),k(!0)},ze=s=>{s.preventDefault(),s.stopPropagation(),k(!1)},qe=s=>{s.preventDefault(),s.stopPropagation()},We=async s=>{s.preventDefault(),s.stopPropagation(),k(!1);const c=s.dataTransfer.files;c&&c.length>0&&await De(Array.from(c))},Ue=async s=>{const c=s.target.files;c&&c.length>0&&await De(Array.from(c)),s.target&&(s.target.value="")},De=async s=>{if(!s||s.length===0)return;console.log("[OFX Import] Iniciando processamento de",s.length,"arquivo(s)"),n(!0);const c=[],O=[];try{for(const B of s){console.log("[OFX Import] Processando arquivo:",B.name,"Tamanho:",B.size,"bytes");try{const G=await mt(B);console.log("[OFX Import] Transações encontradas no arquivo:",G.length);const ae=G.filter(V.filterFn).map(ce=>({...ce,valor:V.transformValue(ce.valor),sourceFile:B.name}));console.log("[OFX Import] Transações após filtro (",pe,"):",ae.length),c.push(...ae)}catch(G){console.error("[OFX Import] Erro ao processar arquivo:",B.name,G),O.push(`${B.name}: ${(G==null?void 0:G.message)||"Erro desconhecido"}`)}}if(console.log("[OFX Import] Total de transações:",c.length,"Erros:",O.length),c.length===0){const B=O.length>0?`Erros: ${O.join(", ")}`:V.emptyDescription;console.warn("[OFX Import] Nenhuma transação encontrada:",B),h({title:V.emptyMessage,description:B,variant:"destructive"});return}O.length>0&&h({title:"Alguns arquivos tiveram erros",description:O.join("; "),variant:"destructive"});const q=Xe(c);j(q),E({}),r(c);const x={};c.forEach((B,G)=>{x[G]=!0}),l(x);const L={},te={};c.forEach((B,G)=>{L[G]=B.descricao||V.defaultDescription;const ae=Be(B.descricao);ae&&(te[G]=ae)}),b(L),I(te),M({}),J({}),q.length>0?_("duplicates"):_("review")}catch(q){h({title:"Falha ao processar arquivos",description:(q==null?void 0:q.message)||"Erro desconhecido.",variant:"destructive"})}finally{n(!1)}},Ee=s=>{l(c=>({...c,[s]:!c[s]}))},Ve=()=>{const s={};m.forEach((c,O)=>{s[O]=!0}),l(s)},He=()=>{l({})},Ie=(s,c)=>{E(O=>({...O,[s]:c}))},Ge=()=>{const s={};u.forEach(c=>{s[c.ofxIndex]="skip"}),E(s)},Ye=()=>{const s={};u.forEach(c=>{s[c.ofxIndex]="import"}),E(s)},Qe=()=>{const s=[],c={},O={},q={},x={},L={};m.forEach((te,B)=>{const G=u.some(Te=>Te.ofxIndex===B),ae=$[B];if(G&&ae==="skip")return;const ce=s.length;s.push(te),y[B]!=null&&(c[ce]=y[B]),T[B]!=null&&(O[ce]=T[B]),Y[B]!=null&&(q[ce]=Y[B]),Q[B]!=null&&(x[ce]=Q[B]),L[ce]=t[B]??!0}),r(s),b(c),I(O),M(q),J(x),l(L),j([]),E({}),s.length>0?_("review"):(h({title:"Nenhuma transação para importar",description:"Todas as transações foram ignoradas."}),ve())},Je=async()=>{var O;if(!m.some((q,x)=>t[x]&&(T[x]||Z))){h({title:"Selecione uma categoria",description:"Defina ao menos a categoria padrão ou por item.",variant:"destructive"});return}if(V.showInstitutions&&!m.some((x,L)=>t[L]&&(Q[L]||X))){h({title:"Selecione uma instituição",description:"Defina ao menos a instituição padrão ou por item.",variant:"destructive"});return}_("importing"),z(0),A(0),U(0),de(0),be([]);const c=[];m.forEach((q,x)=>{if(!t[x])return;const L=T[x]||Z;if(!L)return;const te={descricao:y[x]??q.descricao??V.defaultDescription,categoria_id:L,data:q.data||new Date().toISOString().split("T")[0]};pe==="investment"?te.valor_aporte=Number(q.valor)||0:te.valor=Number(q.valor)||0,V.showPaymentMethods&&(te.meio_pagamento_id=Y[x]||C||null,te.pago=K,te.recorrente=!1),V.showInstitutions&&(te.instituicao_id=Q[x]||X),c.push(te)});try{let q=0,x=0;const L=[];for(let B=0;B<c.length;B++){try{const G=await d([c[B]]);G&&Array.isArray(G)&&((O=G[0])!=null&&O.id)?L.push(G[0].id):G!=null&&G.id&&L.push(G.id),q++}catch{x++}z(Math.round((B+1)/c.length*100)),A(q),de(x)}be(L),_("complete");const te=m.length-c.length;U(te)}catch(q){h({title:"Erro na importação",description:(q==null?void 0:q.message)||"Tente novamente.",variant:"destructive"}),_("review")}},Ke=async()=>{if(!(!p||ge.length===0)){we(!0);try{await p(ge),h({title:"Importação desfeita",description:`${ge.length} transações removidas com sucesso.`}),ve()}catch(s){h({title:"Erro ao desfazer",description:(s==null?void 0:s.message)||"Tente novamente.",variant:"destructive"})}finally{we(!1)}}},ve=()=>{_("upload"),r([]),l({}),b({}),I({}),M({}),J({}),re(""),N(""),D(""),ue(!1),j([]),E({}),z(0),A(0),U(0),de(0),Me(""),k(!1),n(!1),be([]),we(!1),v==null||v(),ye==null||ye(!1)},Ze=H.useMemo(()=>{if(!me)return m.map((c,O)=>({...c,originalIndex:O}));const s=me.toLowerCase();return m.map((c,O)=>({...c,originalIndex:O})).filter(c=>(y[c.originalIndex]||c.descricao||"").toLowerCase().includes(s)||String(c.valor).includes(me))},[m,y,me]),xe=Object.values(t).filter(Boolean).length,et=m.reduce((s,c,O)=>t[O]?s+(Number(c.valor)||0):s,0),tt=s=>u.some(c=>c.ofxIndex===s);return e.jsx(it,{open:je,onOpenChange:s=>!s&&ve(),children:e.jsxs(st,{className:"sm:max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(lt,{children:e.jsxs(ct,{className:"flex items-center gap-2",children:[V.icon,V.title]})}),w==="upload"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[e.jsx("input",{ref:g,type:"file",accept:".ofx,.qfx,.ofc,.xml,.txt",multiple:!0,className:"hidden",onChange:Ue}),e.jsx("div",{className:`
                w-full max-w-md p-8 border-2 border-dashed rounded-xl transition-all duration-300 cursor-pointer
                flex flex-col items-center justify-center gap-4
                ${P?"border-primary bg-primary/10 scale-105":"border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/50"}
                ${a?"opacity-50 pointer-events-none":""}
              `,onDragEnter:$e,onDragLeave:ze,onDragOver:qe,onDrop:We,onClick:()=>{var s;return(s=g.current)==null?void 0:s.click()},children:a?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-12 w-12 text-primary animate-spin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Processando arquivo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx(dt,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:P?"Solte o(s) arquivo(s) aqui":"Arraste arquivo(s) OFX"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"ou clique para selecionar (múltiplos arquivos suportados)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx("span",{children:"Formatos: .ofx, .qfx, .ofc, .xml, .txt"})]})]})})]}),w==="duplicates"&&e.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsx(Se,{className:"h-5 w-5 text-yellow-600 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Foram encontradas ",e.jsx("strong",{children:u.length})," transação(ões) que podem ser duplicatas. Escolha o que fazer com cada uma."]})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 p-3 bg-muted/50 text-xs font-medium text-muted-foreground border-b sticky top-0",children:[e.jsx("div",{className:"col-span-3",children:"Descrição OFX"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-3",children:"Existente"}),e.jsx("div",{className:"col-span-2",children:"Ação"})]}),u.map(s=>e.jsxs("div",{className:"p-3 border-b last:border-b-0 bg-yellow-50/50 dark:bg-yellow-900/10",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.ofxTransaction.descricao}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.ofxTransaction.data})]}),e.jsx("span",{className:`font-bold ${V.valueColor}`,children:he.format(Number(s.ofxTransaction.valor)||0)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Existente: ",s.existingTransaction.descricao]}),e.jsxs(oe,{value:$[s.ofxIndex]||void 0,onValueChange:c=>Ie(s.ofxIndex,c),children:[e.jsx(ie,{className:"w-full",children:e.jsx(se,{placeholder:"Escolher ação"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"import",children:"Importar mesmo assim"}),e.jsx(ne,{value:"skip",children:"Ignorar (é duplicata)"})]})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-3 text-sm truncate",title:s.ofxTransaction.descricao,children:s.ofxTransaction.descricao}),e.jsx("div",{className:"col-span-2 text-xs",children:s.ofxTransaction.data}),e.jsx("div",{className:`col-span-2 text-right font-medium ${V.valueColor}`,children:he.format(Number(s.ofxTransaction.valor)||0)}),e.jsx("div",{className:"col-span-3 text-xs text-muted-foreground truncate",title:s.existingTransaction.descricao,children:s.existingTransaction.descricao}),e.jsx("div",{className:"col-span-2",children:e.jsxs(oe,{value:$[s.ofxIndex]||void 0,onValueChange:c=>Ie(s.ofxIndex,c),children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Escolher"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"import",children:"Importar"}),e.jsx(ne,{value:"skip",children:"Ignorar"})]})]})})]})]},s.ofxIndex))]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(fe,{variant:"outline",size:"sm",onClick:Ge,children:"Ignorar Todas"}),e.jsx(fe,{variant:"outline",size:"sm",onClick:Ye,children:"Importar Todas"}),e.jsx("div",{className:"flex-1"}),e.jsx(fe,{onClick:Qe,children:"Prosseguir"})]})]}),w==="review"&&e.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(ke,{children:e.jsxs(Ne,{className:"p-3 flex items-center gap-3",children:[e.jsx(xt,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecionados"}),e.jsxs("p",{className:"text-lg font-bold",children:[xe,"/",m.length]})]})]})}),e.jsx(ke,{children:e.jsxs(Ne,{className:"p-3 flex items-center gap-3",children:[V.icon,e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"}),e.jsx("p",{className:`text-lg font-bold ${V.valueColor}`,children:he.format(et)})]})]})}),e.jsx(ke,{className:"col-span-2",children:e.jsxs(Ne,{className:"p-3 flex items-center gap-3",children:[e.jsx(vt,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Período"}),e.jsx("p",{className:"text-sm font-medium",children:m.length>0?`${(Re=m[m.length-1])==null?void 0:Re.data} a ${(Ce=m[0])==null?void 0:Ce.data}`:"-"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Categoria padrão"}),e.jsxs(oe,{value:Z||void 0,onValueChange:re,children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione uma categoria"})}),e.jsx(le,{children:S.map(s=>e.jsx(ne,{value:String(s.id),children:s.nome},s.id))})]})]}),V.showPaymentMethods&&i.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Meio de pagamento"}),e.jsxs(oe,{value:C||void 0,onValueChange:s=>N(s==="none"?"":s),children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"Não especificado"}),i.map(s=>e.jsx(ne,{value:String(s.id),children:s.nome},s.id))]})]})]}),V.showInstitutions&&o.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Instituição"}),e.jsxs(oe,{value:X||void 0,onValueChange:D,children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione"})}),e.jsx(le,{children:o.map(s=>e.jsx(ne,{value:String(s.id),children:s.nome},s.id))})]})]}),V.showPaidCheckbox&&e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{id:"markAsPaid",type:"checkbox",className:"rounded accent-primary h-4 w-4",checked:K,onChange:s=>ue(s.target.checked)}),e.jsx("label",{htmlFor:"markAsPaid",className:"text-sm",children:"Marcar como pago"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Buscar por descrição ou valor...",className:"flex-1 min-w-[200px] px-3 py-2 border rounded-md text-sm",value:me,onChange:s=>Me(s.target.value)}),e.jsx(fe,{variant:"outline",size:"sm",onClick:Ve,children:"Selecionar Todas"}),e.jsx(fe,{variant:"outline",size:"sm",onClick:He,children:"Desmarcar Todas"})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 p-3 bg-muted/50 text-xs font-medium text-muted-foreground border-b sticky top-0 z-10",children:[e.jsx("div",{className:"col-span-1 text-center",children:"✓"}),e.jsx("div",{className:"col-span-3",children:"Descrição"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-2",children:"Categoria"}),e.jsx("div",{className:"col-span-2",children:V.showPaymentMethods?"Pagamento":V.showInstitutions?"Instituição":""})]}),Ze.map(s=>{const c=s.originalIndex,O=t[c],q=tt(c);return e.jsxs("div",{className:`
                      p-3 border-b last:border-b-0 transition-colors
                      ${O?"bg-white dark:bg-background":"bg-muted/30 opacity-60"}
                      ${q?"border-l-4 border-l-yellow-500":""}
                    `,children:[e.jsxs("div",{className:"md:hidden space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:()=>Ee(c),className:"mt-1 h-4 w-4 rounded accent-primary"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",value:y[c]??s.descricao??V.defaultDescription,onChange:x=>b(L=>({...L,[c]:x.target.value})),disabled:!O}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:s.data}),e.jsx("span",{className:`font-bold ${V.valueColor}`,children:he.format(Number(s.valor)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-7",children:[e.jsxs(oe,{value:T[c]||Z||void 0,onValueChange:x=>I(L=>({...L,[c]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Categoria"})}),e.jsx(le,{children:S.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]}),V.showPaymentMethods&&e.jsxs(oe,{value:Y[c]||C||void 0,onValueChange:x=>M(L=>({...L,[c]:x==="none"?"":x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Pagamento"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"Não especificado"}),i.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))]})]}),V.showInstitutions&&e.jsxs(oe,{value:Q[c]||X||void 0,onValueChange:x=>J(L=>({...L,[c]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Instituição"})}),e.jsx(le,{children:o.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})]}),q&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600 pl-7",children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsx("span",{children:"Possível duplicata"})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-1 flex justify-center",children:e.jsx("input",{type:"checkbox",checked:O,onChange:()=>Ee(c),className:"h-4 w-4 rounded accent-primary"})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",value:y[c]??s.descricao??V.defaultDescription,onChange:x=>b(L=>({...L,[c]:x.target.value})),disabled:!O}),q&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600 mt-1",children:[e.jsx(Se,{className:"h-3 w-3"}),e.jsx("span",{children:"Possível duplicata"})]})]}),e.jsx("div",{className:"col-span-2 text-xs",children:s.data}),e.jsx("div",{className:`col-span-2 text-right font-medium ${V.valueColor}`,children:he.format(Number(s.valor)||0)}),e.jsx("div",{className:"col-span-2",children:e.jsxs(oe,{value:T[c]||Z||void 0,onValueChange:x=>I(L=>({...L,[c]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Categoria"})}),e.jsx(le,{children:S.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})}),e.jsxs("div",{className:"col-span-2",children:[V.showPaymentMethods&&e.jsxs(oe,{value:Y[c]||C||void 0,onValueChange:x=>M(L=>({...L,[c]:x==="none"?"":x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Pagamento"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"Não especificado"}),i.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))]})]}),V.showInstitutions&&e.jsxs(oe,{value:Q[c]||X||void 0,onValueChange:x=>J(L=>({...L,[c]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Instituição"})}),e.jsx(le,{children:o.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})]})]})]},c)})]}),e.jsxs(ut,{className:"gap-2",children:[e.jsx(fe,{variant:"ghost",onClick:ve,children:"Cancelar"}),e.jsxs(fe,{onClick:Je,disabled:xe===0,children:["Importar ",xe," ",xe===1?"item":"itens"]})]})]}),w==="importing"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 p-6",children:[e.jsx(Oe,{className:"h-12 w-12 text-primary animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-lg",children:"Importando transações..."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[F," de ",xe," processados"]})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(ft,{value:R,className:"h-3"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:[R,"%"]})]})]}),w==="complete"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 p-6",children:[e.jsx("div",{className:"p-4 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(pt,{className:"h-12 w-12 text-green-600"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-lg",children:"Importação concluída!"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-green-600",children:F})," transações importadas com sucesso"]}),W>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[W," transações não selecionadas"]}),ee>0&&e.jsxs("p",{className:"text-sm text-red-600",children:[ee," transações com erro"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[p&&ge.length>0&&e.jsx(fe,{variant:"outline",onClick:Ke,disabled:Pe,className:"flex items-center gap-2",children:Pe?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4 animate-spin"}),"Desfazendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4"}),"Desfazer Importação"]})}),e.jsx(fe,{onClick:ve,children:"Fechar"})]})]})]})})}var Le={exports:{}};(function(je,ye){(function(S,i){je.exports=i(H)})(ot,function(pe){return function(S){var i={};function o(f){if(i[f])return i[f].exports;var d=i[f]={i:f,l:!1,exports:{}};return S[f].call(d.exports,d,d.exports,o),d.l=!0,d.exports}return o.m=S,o.c=i,o.d=function(f,d,p){o.o(f,d)||Object.defineProperty(f,d,{configurable:!1,enumerable:!0,get:p})},o.n=function(f){var d=f&&f.__esModule?function(){return f.default}:function(){return f};return o.d(d,"a",d),d},o.o=function(f,d){return Object.prototype.hasOwnProperty.call(f,d)},o.p="/",o(o.s=11)}([function(S,i,o){(function(f){S.exports=o(16)()}).call(i,o(2))},function(S,i){S.exports=pe},function(S,i){var o=S.exports={},f,d;function p(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?f=setTimeout:f=p}catch{f=p}try{typeof clearTimeout=="function"?d=clearTimeout:d=v}catch{d=v}})();function h(t){if(f===setTimeout)return setTimeout(t,0);if((f===p||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch{try{return f.call(null,t,0)}catch{return f.call(this,t,0)}}}function g(t){if(d===clearTimeout)return clearTimeout(t);if((d===v||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch{try{return d.call(null,t)}catch{return d.call(this,t)}}}var w=[],_=!1,P,k=-1;function a(){!_||!P||(_=!1,P.length?w=P.concat(w):k=-1,w.length&&n())}function n(){if(!_){var t=h(a);_=!0;for(var l=w.length;l;){for(P=w,w=[];++k<l;)P&&P[k].run();k=-1,l=w.length}P=null,_=!1,g(t)}}o.nextTick=function(t){var l=new Array(arguments.length-1);if(arguments.length>1)for(var y=1;y<arguments.length;y++)l[y-1]=arguments[y];w.push(new m(t,l)),w.length===1&&!_&&h(n)};function m(t,l){this.fun=t,this.array=l}m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function r(){}o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.prependListener=r,o.prependOnceListener=r,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){return f.reduce(function(d,p){return d+p})/f.length}},function(S,i,o){function f(p){return function(){return p}}var d=function(){};d.thatReturns=f,d.thatReturnsFalse=f(!1),d.thatReturnsTrue=f(!0),d.thatReturnsNull=f(null),d.thatReturnsThis=function(){return this},d.thatReturnsArgument=function(p){return p},S.exports=d},function(S,i,o){(function(f){function d(p,v,h,g,w,_,P,k){if(!p){var a;if(v===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var n=[h,g,w,_,P,k],m=0;a=new Error(v.replace(/%s/g,function(){return n[m++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}S.exports=d}).call(i,o(2))},function(S,i,o){var f="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";S.exports=f},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){return Math.min.apply(Math,f)}},function(S,i,o){(function(f){var d=o(4),p=d;S.exports=p}).call(i,o(2))},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){return Math.max.apply(Math,f)}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=o(3),d=p(f);function p(v){return v&&v.__esModule?v:{default:v}}i.default=function(v){var h=(0,d.default)(v),g=v.map(function(_){return Math.pow(_-h,2)}),w=(0,d.default)(g);return Math.sqrt(w)}},function(S,i,o){S.exports=o(12)},function(S,i,o){S.exports=o(13)},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.SparklinesText=i.SparklinesNormalBand=i.SparklinesReferenceLine=i.SparklinesSpots=i.SparklinesBars=i.SparklinesCurve=i.SparklinesLine=i.Sparklines=void 0;var f=function(){function C(N,X){for(var D=0;D<X.length;D++){var K=X[D];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(N,K.key,K)}}return function(N,X,D){return X&&C(N.prototype,X),D&&C(N,D),N}}(),d=o(0),p=M(d),v=o(1),h=M(v),g=o(17),w=M(g),_=o(18),P=M(_),k=o(19),a=M(k),n=o(20),m=M(n),r=o(21),t=M(r),l=o(22),y=M(l),b=o(27),T=M(b),I=o(28),Y=M(I);function M(C){return C&&C.__esModule?C:{default:C}}function Q(C,N){if(!(C instanceof N))throw new TypeError("Cannot call a class as a function")}function J(C,N){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:C}function Z(C,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);C.prototype=Object.create(N&&N.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(C,N):C.__proto__=N)}var re=function(C){Z(N,C);function N(X){return Q(this,N),J(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,X))}return f(N,[{key:"render",value:function(){var D=this.props,K=D.data,ue=D.limit,u=D.width,j=D.height,$=D.svgWidth,E=D.svgHeight,R=D.preserveAspectRatio,z=D.margin,F=D.style,A=D.max,W=D.min;if(K.length===0)return null;var U=(0,Y.default)({data:K,limit:ue,width:u,height:j,margin:z,max:A,min:W}),ee={style:F,viewBox:"0 0 "+u+" "+j,preserveAspectRatio:R};return $>0&&(ee.width=$),E>0&&(ee.height=E),h.default.createElement("svg",ee,h.default.Children.map(this.props.children,function(de){return h.default.cloneElement(de,{data:K,points:U,width:u,height:j,margin:z})}))}}]),N}(v.PureComponent);re.propTypes={data:p.default.array,limit:p.default.number,width:p.default.number,height:p.default.number,svgWidth:p.default.number,svgHeight:p.default.number,preserveAspectRatio:p.default.string,margin:p.default.number,style:p.default.object,min:p.default.number,max:p.default.number,onMouseMove:p.default.func},re.defaultProps={data:[],width:240,height:60,preserveAspectRatio:"none",margin:2},i.Sparklines=re,i.SparklinesLine=P.default,i.SparklinesCurve=a.default,i.SparklinesBars=m.default,i.SparklinesSpots=t.default,i.SparklinesReferenceLine=y.default,i.SparklinesNormalBand=T.default,i.SparklinesText=w.default},function(S,i,o){(function(f){var d=o(4),p=o(5),v=o(8),h=o(6),g=o(15);S.exports=function(w,_){var P=typeof Symbol=="function"&&Symbol.iterator,k="@@iterator";function a(u){var j=u&&(P&&u[P]||u[k]);if(typeof j=="function")return j}var n="<<anonymous>>",m={array:y("array"),bool:y("boolean"),func:y("function"),number:y("number"),object:y("object"),string:y("string"),symbol:y("symbol"),any:b(),arrayOf:T,element:I(),instanceOf:Y,node:Z(),objectOf:Q,oneOf:M,oneOfType:J,shape:re};function r(u,j){return u===j?u!==0||1/u===1/j:u!==u&&j!==j}function t(u){this.message=u,this.stack=""}t.prototype=Error.prototype;function l(u){function j(E,R,z,F,A,W,U){return F=F||n,W=W||z,U!==h&&_&&p(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),R[z]==null?E?R[z]===null?new t("The "+A+" `"+W+"` is marked as required "+("in `"+F+"`, but its value is `null`.")):new t("The "+A+" `"+W+"` is marked as required in "+("`"+F+"`, but its value is `undefined`.")):null:u(R,z,F,A,W)}var $=j.bind(null,!1);return $.isRequired=j.bind(null,!0),$}function y(u){function j($,E,R,z,F,A){var W=$[E],U=X(W);if(U!==u){var ee=D(W);return new t("Invalid "+z+" `"+F+"` of type "+("`"+ee+"` supplied to `"+R+"`, expected ")+("`"+u+"`."))}return null}return l(j)}function b(){return l(d.thatReturnsNull)}function T(u){function j($,E,R,z,F){if(typeof u!="function")return new t("Property `"+F+"` of component `"+R+"` has invalid PropType notation inside arrayOf.");var A=$[E];if(!Array.isArray(A)){var W=X(A);return new t("Invalid "+z+" `"+F+"` of type "+("`"+W+"` supplied to `"+R+"`, expected an array."))}for(var U=0;U<A.length;U++){var ee=u(A,U,R,z,F+"["+U+"]",h);if(ee instanceof Error)return ee}return null}return l(j)}function I(){function u(j,$,E,R,z){var F=j[$];if(!w(F)){var A=X(F);return new t("Invalid "+R+" `"+z+"` of type "+("`"+A+"` supplied to `"+E+"`, expected a single ReactElement."))}return null}return l(u)}function Y(u){function j($,E,R,z,F){if(!($[E]instanceof u)){var A=u.name||n,W=ue($[E]);return new t("Invalid "+z+" `"+F+"` of type "+("`"+W+"` supplied to `"+R+"`, expected ")+("instance of `"+A+"`."))}return null}return l(j)}function M(u){if(!Array.isArray(u))return d.thatReturnsNull;function j($,E,R,z,F){for(var A=$[E],W=0;W<u.length;W++)if(r(A,u[W]))return null;var U=JSON.stringify(u);return new t("Invalid "+z+" `"+F+"` of value `"+A+"` "+("supplied to `"+R+"`, expected one of "+U+"."))}return l(j)}function Q(u){function j($,E,R,z,F){if(typeof u!="function")return new t("Property `"+F+"` of component `"+R+"` has invalid PropType notation inside objectOf.");var A=$[E],W=X(A);if(W!=="object")return new t("Invalid "+z+" `"+F+"` of type "+("`"+W+"` supplied to `"+R+"`, expected an object."));for(var U in A)if(A.hasOwnProperty(U)){var ee=u(A,U,R,z,F+"."+U,h);if(ee instanceof Error)return ee}return null}return l(j)}function J(u){if(!Array.isArray(u))return d.thatReturnsNull;for(var j=0;j<u.length;j++){var $=u[j];if(typeof $!="function")return v(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",K($),j),d.thatReturnsNull}function E(R,z,F,A,W){for(var U=0;U<u.length;U++){var ee=u[U];if(ee(R,z,F,A,W,h)==null)return null}return new t("Invalid "+A+" `"+W+"` supplied to "+("`"+F+"`."))}return l(E)}function Z(){function u(j,$,E,R,z){return C(j[$])?null:new t("Invalid "+R+" `"+z+"` supplied to "+("`"+E+"`, expected a ReactNode."))}return l(u)}function re(u){function j($,E,R,z,F){var A=$[E],W=X(A);if(W!=="object")return new t("Invalid "+z+" `"+F+"` of type `"+W+"` "+("supplied to `"+R+"`, expected `object`."));for(var U in u){var ee=u[U];if(ee){var de=ee(A,U,R,z,F+"."+U,h);if(de)return de}}return null}return l(j)}function C(u){switch(typeof u){case"number":case"string":case"undefined":return!0;case"boolean":return!u;case"object":if(Array.isArray(u))return u.every(C);if(u===null||w(u))return!0;var j=a(u);if(j){var $=j.call(u),E;if(j!==u.entries){for(;!(E=$.next()).done;)if(!C(E.value))return!1}else for(;!(E=$.next()).done;){var R=E.value;if(R&&!C(R[1]))return!1}}else return!1;return!0;default:return!1}}function N(u,j){return u==="symbol"||j["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&j instanceof Symbol}function X(u){var j=typeof u;return Array.isArray(u)?"array":u instanceof RegExp?"object":N(j,u)?"symbol":j}function D(u){if(typeof u>"u"||u===null)return""+u;var j=X(u);if(j==="object"){if(u instanceof Date)return"date";if(u instanceof RegExp)return"regexp"}return j}function K(u){var j=D(u);switch(j){case"array":case"object":return"an "+j;case"boolean":case"date":case"regexp":return"a "+j;default:return j}}function ue(u){return!u.constructor||!u.constructor.name?n:u.constructor.name}return m.checkPropTypes=g,m.PropTypes=m,m}}).call(i,o(2))},function(S,i,o){(function(f){function d(p,v,h,g,w){}S.exports=d}).call(i,o(2))},function(S,i,o){var f=o(4),d=o(5),p=o(6);S.exports=function(){function v(w,_,P,k,a,n){n!==p&&d(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}v.isRequired=v;function h(){return v}var g={array:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:h,element:v,instanceOf:h,node:v,objectOf:h,oneOf:h,oneOfType:h,shape:h};return g.checkPropTypes=f,g.PropTypes=g,g}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),d=o(0),p=g(d),v=o(1),h=g(v);function g(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var k=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,[{key:"render",value:function(){var r=this.props,t=r.point,l=r.text,y=r.fontSize,b=r.fontFamily,T=t.x,I=t.y;return h.default.createElement("g",null,h.default.createElement("text",{x:T,y:I,fontFamily:b||"Verdana",fontSize:y||10},l))}}]),n}(h.default.Component);k.propTypes={text:p.default.string,point:p.default.object,fontSize:p.default.number,fontFamily:p.default.string},k.defaultProps={text:"",point:{x:0,y:0}},i.default=k},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),d=o(0),p=g(d),v=o(1),h=g(v);function g(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var k=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,[{key:"render",value:function(){var r=this.props,t=r.data,l=r.points;r.width;var y=r.height,b=r.margin,T=r.color,I=r.style,Y=r.onMouseMove,M=l.map(function(N){return[N.x,N.y]}).reduce(function(N,X){return N.concat(X)}),Q=[l[l.length-1].x,y-b,b,y-b,b,l[0].y],J=M.concat(Q),Z={stroke:T||I.stroke||"slategray",strokeWidth:I.strokeWidth||"1",strokeLinejoin:I.strokeLinejoin||"round",strokeLinecap:I.strokeLinecap||"round",fill:"none"},re={stroke:I.stroke||"none",strokeWidth:"0",fillOpacity:I.fillOpacity||".1",fill:I.fill||T||"slategray",pointerEvents:"auto"},C=l.map(function(N,X){return h.default.createElement("circle",{key:X,cx:N.x,cy:N.y,r:2,style:re,onMouseEnter:function(K){return Y("enter",t[X],N)},onClick:function(K){return Y("click",t[X],N)}})});return h.default.createElement("g",null,C,h.default.createElement("polyline",{points:J.join(" "),style:re}),h.default.createElement("polyline",{points:M.join(" "),style:Z}))}}]),n}(h.default.Component);k.propTypes={color:p.default.string,style:p.default.object},k.defaultProps={style:{},onMouseMove:function(){}},i.default=k},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),d=o(0),p=g(d),v=o(1),h=g(v);function g(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var k=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,[{key:"render",value:function(){var r=this.props,t=r.points;r.width;var l=r.height,y=r.margin,b=r.color,T=r.style,I=r.divisor,Y=I===void 0?.25:I,M=void 0,Q=function(D){var K=void 0;if(!M)K=[D.x,D.y];else{var ue=(D.x-M.x)*Y;K=["C",M.x+ue,M.y,D.x-ue,D.y,D.x,D.y]}return M=D,K},J=t.map(function(X){return Q(X)}).reduce(function(X,D){return X.concat(D)}),Z=["L"+t[t.length-1].x,l-y,y,l-y,y,t[0].y],re=J.concat(Z),C={stroke:b||T.stroke||"slategray",strokeWidth:T.strokeWidth||"1",strokeLinejoin:T.strokeLinejoin||"round",strokeLinecap:T.strokeLinecap||"round",fill:"none"},N={stroke:T.stroke||"none",strokeWidth:"0",fillOpacity:T.fillOpacity||".1",fill:T.fill||b||"slategray"};return h.default.createElement("g",null,h.default.createElement("path",{d:"M"+re.join(" "),style:N}),h.default.createElement("path",{d:"M"+J.join(" "),style:C}))}}]),n}(h.default.Component);k.propTypes={color:p.default.string,style:p.default.object},k.defaultProps={style:{}},i.default=k},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),d=o(0),p=g(d),v=o(1),h=g(v);function g(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var k=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,[{key:"render",value:function(){var r=this,t=this.props,l=t.points,y=t.height,b=t.style,T=t.barWidth,I=t.margin,Y=t.onMouseMove,M=1*(b&&b.strokeWidth||0),Q=I?2*I:0,J=T||(l&&l.length>=2?Math.max(0,l[1].x-l[0].x-M-Q):0);return h.default.createElement("g",{transform:"scale(1,-1)"},l.map(function(Z,re){return h.default.createElement("rect",{key:re,x:Z.x-(J+M)/2,y:-y,width:J,height:Math.max(0,y-Z.y),style:b,onMouseMove:Y&&Y.bind(r,Z)})}))}}]),n}(h.default.Component);k.propTypes={points:p.default.arrayOf(p.default.object),height:p.default.number,style:p.default.object,barWidth:p.default.number,margin:p.default.number,onMouseMove:p.default.func},k.defaultProps={style:{fill:"slategray"}},i.default=k},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),d=o(0),p=g(d),v=o(1),h=g(v);function g(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var k=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return f(n,[{key:"lastDirection",value:function(r){return Math.sign=Math.sign||function(t){return t>0?1:-1},r.length<2?0:Math.sign(r[r.length-2].y-r[r.length-1].y)}},{key:"render",value:function(){var r=this.props,t=r.points;r.width,r.height;var l=r.size,y=r.style,b=r.spotColors,T=h.default.createElement("circle",{cx:t[0].x,cy:t[0].y,r:l,style:y}),I=h.default.createElement("circle",{cx:t[t.length-1].x,cy:t[t.length-1].y,r:l,style:y||{fill:b[this.lastDirection(t)]}});return h.default.createElement("g",null,y&&T,I)}}]),n}(h.default.Component);k.propTypes={size:p.default.number,style:p.default.object,spotColors:p.default.object},k.defaultProps={size:2,spotColors:{"-1":"red",0:"black",1:"green"}},i.default=k},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function r(t,l){for(var y=0;y<l.length;y++){var b=l[y];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(t,b.key,b)}}return function(t,l,y){return l&&r(t.prototype,l),y&&r(t,y),t}}(),d=o(0),p=P(d),v=o(1),h=P(v),g=o(23),w=_(g);function _(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l]);return t.default=r,t}function P(r){return r&&r.__esModule?r:{default:r}}function k(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function a(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function n(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var m=function(r){n(t,r);function t(){return k(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,[{key:"render",value:function(){var y=this.props,b=y.points,T=y.margin,I=y.type,Y=y.style,M=y.value,Q=b.map(function(Z){return Z.y}),J=I=="custom"?M:w[I](Q);return h.default.createElement("line",{x1:b[0].x,y1:J+T,x2:b[b.length-1].x,y2:J+T,style:Y})}}]),t}(h.default.Component);m.propTypes={type:p.default.oneOf(["max","min","mean","avg","median","custom"]),value:p.default.number,style:p.default.object},m.defaultProps={type:"mean",style:{stroke:"red",strokeOpacity:.75,strokeDasharray:"2, 2"}},i.default=m},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.variance=i.stdev=i.median=i.midRange=i.avg=i.mean=i.max=i.min=void 0;var f=o(7),d=m(f),p=o(3),v=m(p),h=o(24),g=m(h),w=o(25),_=m(w),P=o(10),k=m(P),a=o(26),n=m(a);function m(r){return r&&r.__esModule?r:{default:r}}i.min=d.default,i.max=d.default,i.mean=v.default,i.avg=v.default,i.midRange=g.default,i.median=_.default,i.stdev=k.default,i.variance=n.default},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=o(7),d=h(f),p=o(9),v=h(p);function h(g){return g&&g.__esModule?g:{default:g}}i.default=function(g){return(0,v.default)(g)-(0,d.default)(g)/2}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(f){return f.sort(function(d,p){return d-p})[Math.floor(f.length/2)]}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=o(3),d=p(f);function p(v){return v&&v.__esModule?v:{default:v}}i.default=function(v){var h=(0,d.default)(v),g=v.map(function(w){return Math.pow(w-h,2)});return(0,d.default)(g)}},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=function(){function t(l,y){for(var b=0;b<y.length;b++){var T=y[b];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(l,T.key,T)}}return function(l,y,b){return y&&t(l.prototype,y),b&&t(l,b),l}}(),d=o(0),p=k(d),v=o(1),h=k(v),g=o(3),w=k(g),_=o(10),P=k(_);function k(t){return t&&t.__esModule?t:{default:t}}function a(t,l){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}function n(t,l){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:t}function m(t,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);t.prototype=Object.create(l&&l.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(t,l):t.__proto__=l)}var r=function(t){m(l,t);function l(){return a(this,l),n(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return f(l,[{key:"render",value:function(){var b=this.props,T=b.points,I=b.margin,Y=b.style,M=T.map(function(Z){return Z.y}),Q=(0,w.default)(M),J=(0,P.default)(M);return h.default.createElement("rect",{x:T[0].x,y:Q-J+I,width:T[T.length-1].x-T[0].x,height:P.default*2,style:Y})}}]),l}(h.default.Component);r.propTypes={style:p.default.object},r.defaultProps={style:{fill:"red",fillOpacity:.1}},i.default=r},function(S,i,o){Object.defineProperty(i,"__esModule",{value:!0});var f=o(7),d=h(f),p=o(9),v=h(p);function h(g){return g&&g.__esModule?g:{default:g}}i.default=function(g){var w=g.data,_=g.limit,P=g.width,k=P===void 0?1:P,a=g.height,n=a===void 0?1:a,m=g.margin,r=m===void 0?0:m,t=g.max,l=t===void 0?(0,v.default)(w):t,y=g.min,b=y===void 0?(0,d.default)(w):y,T=w.length;_&&_<T&&(w=w.slice(T-_));var I=(n-r*2)/(l-b||2),Y=(k-r*2)/((_||T)-(T>1?1:0));return w.map(function(M,Q){return{x:Q*Y+r,y:(l===b?1:l-M)*I+r}})}}])})})(Le);var Nt=Le.exports;export{kt as O,Nt as b};
