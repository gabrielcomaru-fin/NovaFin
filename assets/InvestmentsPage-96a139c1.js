import{e as ct,r as o,w as lt,x as Be,j as e,y as de,z as xe,E as dt,F as mt,G as ut,I as fe,J as pt,g as Le,f as Ge,B as Q,i as le,K as ht,M as xt,N as ft,O as gt,T as Te,k as jt,s as U,h as X,p as J,l as ne,H as vt,t as ee,C as L,a as G,b as T,c as ge,d as $,D as je}from"./index-3b3513e8.js";import{u as yt,L as bt,U as Nt,T as Ct,P as wt,O as St}from"./OFXImportDialog-96b449ff.js";import{C as ve}from"./CategoryChart-1dfd9fba.js";import{L as V,I as ye,C as be}from"./label-66129cc2.js";import{S as Ne,a as Ce,b as we,c as Se,d as De}from"./select-4c245e0b.js";import{D as Re,a as _e,P as Dt,b as ke,c as Me,d as Ie,e as Fe}from"./dialog-a1f22ac9.js";import{B as Rt,C as _t}from"./badge-10305eb2.js";import{S as kt}from"./shield-check-4b2e817d.js";import{s as Mt,e as It,a as Ft}from"./CompactPeriodFilter-9e87c736.js";import{T as At,a as Pt,b as Ae,c as Pe}from"./tabs-e052395a.js";import{e as ie}from"./index-cfa66166.js";import{f as Oe}from"./index-d8b0dd58.js";import{p as Ot}from"./index-b05aaf76.js";import{A as Bt}from"./alert-circle-6c1c601a.js";import"./check-circle-2-88f9d2b6.js";import"./clock-c9707f8e.js";import"./trash-2-4b712ef5.js";import"./wallet-916093d9.js";import"./extends-9b64b82e.js";import"./smartphone-f55d43da.js";import"./building-2-dafa2a12.js";import"./generateCategoricalChart-780c3c5f.js";const Lt=ct("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Gt(i){const r=o.useRef({value:i,previous:i});return o.useMemo(()=>(r.current.value!==i&&(r.current.previous=r.current.value,r.current.value=i),r.current.previous),[i])}var te="Checkbox",[Tt,pa]=lt(te),[$t,me]=Tt(te);function qt(i){const{__scopeCheckbox:r,checked:x,children:S,defaultChecked:j,disabled:m,form:f,name:y,onCheckedChange:b,required:M,value:D="on",internal_do_not_use_render:R}=i,[u,p]=ut({prop:x,defaultProp:j??!1,onChange:b,caller:te}),[_,k]=o.useState(null),[I,v]=o.useState(null),g=o.useRef(!1),q=_?!!f||!!_.closest("form"):!0,F={checked:u,disabled:m,setChecked:p,control:_,setControl:k,name:y,form:f,value:D,hasConsumerStoppedPropagationRef:g,required:M,defaultChecked:E(j)?!1:j,isFormControl:q,bubbleInput:I,setBubbleInput:v};return e.jsx($t,{scope:r,...F,children:Et(R)?R(F):S})}var $e="CheckboxTrigger",qe=o.forwardRef(({__scopeCheckbox:i,onKeyDown:r,onClick:x,...S},j)=>{const{control:m,value:f,disabled:y,checked:b,required:M,setControl:D,setChecked:R,hasConsumerStoppedPropagationRef:u,isFormControl:p,bubbleInput:_}=me($e,i),k=Be(j,D),I=o.useRef(b);return o.useEffect(()=>{const v=m==null?void 0:m.form;if(v){const g=()=>R(I.current);return v.addEventListener("reset",g),()=>v.removeEventListener("reset",g)}},[m,R]),e.jsx(de.button,{type:"button",role:"checkbox","aria-checked":E(b)?"mixed":b,"aria-required":M,"data-state":Ye(b),"data-disabled":y?"":void 0,disabled:y,value:f,...S,ref:k,onKeyDown:xe(r,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:xe(x,v=>{R(g=>E(g)?!0:!g),_&&p&&(u.current=v.isPropagationStopped(),u.current||v.stopPropagation())})})});qe.displayName=$e;var ue=o.forwardRef((i,r)=>{const{__scopeCheckbox:x,name:S,checked:j,defaultChecked:m,required:f,disabled:y,value:b,onCheckedChange:M,form:D,...R}=i;return e.jsx(qt,{__scopeCheckbox:x,checked:j,defaultChecked:m,disabled:y,required:f,onCheckedChange:M,name:S,form:D,value:b,internal_do_not_use_render:({isFormControl:u})=>e.jsxs(e.Fragment,{children:[e.jsx(qe,{...R,ref:r,__scopeCheckbox:x}),u&&e.jsx(Ve,{__scopeCheckbox:x})]})})});ue.displayName=te;var Ee="CheckboxIndicator",He=o.forwardRef((i,r)=>{const{__scopeCheckbox:x,forceMount:S,...j}=i,m=me(Ee,x);return e.jsx(dt,{present:S||E(m.checked)||m.checked===!0,children:e.jsx(de.span,{"data-state":Ye(m.checked),"data-disabled":m.disabled?"":void 0,...j,ref:r,style:{pointerEvents:"none",...i.style}})})});He.displayName=Ee;var ze="CheckboxBubbleInput",Ve=o.forwardRef(({__scopeCheckbox:i,...r},x)=>{const{control:S,hasConsumerStoppedPropagationRef:j,checked:m,defaultChecked:f,required:y,disabled:b,name:M,value:D,form:R,bubbleInput:u,setBubbleInput:p}=me(ze,i),_=Be(x,p),k=Gt(m),I=mt(S);o.useEffect(()=>{const g=u;if(!g)return;const q=window.HTMLInputElement.prototype,H=Object.getOwnPropertyDescriptor(q,"checked").set,O=!j.current;if(k!==m&&H){const K=new Event("click",{bubbles:O});g.indeterminate=E(m),H.call(g,E(m)?!1:m),g.dispatchEvent(K)}},[u,k,m,j]);const v=o.useRef(E(m)?!1:m);return e.jsx(de.input,{type:"checkbox","aria-hidden":!0,defaultChecked:f??v.current,required:y,disabled:b,name:M,value:D,form:R,...r,tabIndex:-1,ref:_,style:{...r.style,...I,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Ve.displayName=ze;function Et(i){return typeof i=="function"}function E(i){return i==="indeterminate"}function Ye(i){return E(i)?"indeterminate":i?"checked":"unchecked"}const Ue=o.forwardRef(({className:i,...r},x)=>e.jsx(ue,{ref:x,className:fe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",i),...r,children:e.jsx(He,{className:fe("flex items-center justify-center text-current"),children:e.jsx(pt,{className:"h-4 w-4"})})}));Ue.displayName=ue.displayName;function Ht({onSubmit:i,investmentToEdit:r,onOpenChange:x,isOpen:S}){const{investmentGoal:j,handleSetInvestmentGoal:m,categories:f,accounts:y}=Le(),{toast:b}=Ge(),M=f.filter(s=>s.tipo==="investimento"),D={descricao:"",valor_aporte:"",categoria_id:"",instituicao_id:"",data:new Date().toISOString().split("T")[0],is_reserva_emergencia:!1},R={goal:""},[u,p]=o.useState(D),[_,k]=o.useState(R),[I,v]=o.useState(!1),g=o.useRef(null),q=o.useRef(null),F=s=>{if(s==null||s==="")return"";const d=Number(s);return isNaN(d)?"":d.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})};o.useEffect(()=>{var s,d;r!=null&&r.id?p({descricao:r.descricao||"",valor_aporte:F(r.valor_aporte),categoria_id:((s=r.categoria_id)==null?void 0:s.toString())||"",instituicao_id:((d=r.instituicao_id)==null?void 0:d.toString())||"",data:r.data?new Date(r.data).toISOString().split("T")[0]:D.data,is_reserva_emergencia:r.is_reserva_emergencia||!1}):p(D)},[r,S]),o.useEffect(()=>{k({goal:F(j)})},[j,I]),o.useEffect(()=>{var d;const s=(d=g.current)==null?void 0:d.input;if(s){const a=s.value.length;s.setSelectionRange(a,a)}},[u.valor_aporte]),o.useEffect(()=>{var d;const s=(d=q.current)==null?void 0:d.input;if(s){const a=s.value.length;s.setSelectionRange(a,a)}},[_.goal]);const H=s=>{if(typeof s=="number")return s;if(!s)return 0;const d=String(s).replace(/\./g,"").replace(",","."),a=parseFloat(d);return isNaN(a)?0:a},O=s=>{s.preventDefault();const d=H(u.valor_aporte);if(d<=0){b({title:"Erro",description:"Informe um valor de aporte vÃ¡lido maior que zero.",variant:"destructive"});return}i({...u,valor_aporte:d},r==null?void 0:r.id),p(D)},K=s=>{x(s),s||p(D)},Y=(s,d)=>{p({...u,[d]:s})},ae=s=>{k({goal:s})},se=async s=>{s.preventDefault();const d=H(_.goal);if(isNaN(d)||d<0){b({title:"Erro",description:"Defina um valor vÃ¡lido para a meta.",variant:"destructive"});return}try{await m(d)}catch{b({title:"Erro",description:"NÃ£o foi possÃ­vel salvar a meta.",variant:"destructive"});return}b({title:"Meta atualizada!",description:`Nova meta mensal: R$ ${d.toLocaleString("pt-BR",{minimumFractionDigits:2})}`}),v(!1)};return e.jsxs("div",{className:"flex items-center gap-2",children:[Number(j)>0&&e.jsxs(Rt,{variant:"secondary",children:["Meta atual: R$ ",Number(j).toLocaleString("pt-BR",{minimumFractionDigits:2}),"/mÃªs"]}),e.jsxs(Re,{open:S,onOpenChange:K,children:[!(r!=null&&r.id)&&e.jsx(_e,{asChild:!0,children:e.jsxs(Q,{children:[e.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Novo Aporte"]})}),e.jsxs(ke,{children:[e.jsxs(Me,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-primary"}),r!=null&&r.id?"Editar Aporte":"Registrar Investimento"]}),e.jsx(Fe,{children:r!=null&&r.id?"Atualize os detalhes do seu aporte.":"Adicione um novo aporte para seus investimentos."})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"description",children:"DescriÃ§Ã£o (Opcional)"}),e.jsx(ye,{id:"description",placeholder:"Ex: Aporte mensal",value:u.descricao,onChange:s=>p({...u,descricao:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"amount",children:"Valor do Aporte (R$)"}),e.jsx(be,{id:"amount",placeholder:"0,00",value:u.valor_aporte,onChange:s=>Y(s,"valor_aporte"),ref:g,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"date",children:"Data"}),e.jsx(ye,{id:"date",type:"date",value:u.data,onChange:s=>p({...u,data:s.target.value}),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"category",children:"Categoria"}),M.length>0?e.jsxs(Ne,{value:u.categoria_id,onValueChange:s=>p({...u,categoria_id:s}),required:!0,children:[e.jsx(Ce,{children:e.jsx(we,{placeholder:"Selecione uma categoria"})}),e.jsx(Se,{children:M.map(s=>e.jsx(De,{value:s.id.toString(),children:s.nome},s.id))})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma categoria de investimento disponÃ­vel."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"institution",children:"InstituiÃ§Ã£o Financeira"}),y.length>0?e.jsxs(Ne,{value:u.instituicao_id,onValueChange:s=>p({...u,instituicao_id:s}),required:!0,children:[e.jsx(Ce,{children:e.jsx(we,{placeholder:"Selecione uma instituiÃ§Ã£o"})}),e.jsx(Se,{children:y.map(s=>e.jsx(De,{value:s.id.toString(),children:s.nome_banco},s.id))})]}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma instituiÃ§Ã£o financeira disponÃ­vel."})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg border bg-muted/30",children:[e.jsx(Ue,{id:"is_reserva_emergencia",checked:u.is_reserva_emergencia,onCheckedChange:s=>p({...u,is_reserva_emergencia:s===!0})}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx(kt,{className:"h-4 w-4 text-emerald-500"}),e.jsx(V,{htmlFor:"is_reserva_emergencia",className:"text-sm font-medium cursor-pointer flex-1",children:"Este aporte faz parte da Reserva de EmergÃªncia"}),e.jsx(ht,{children:e.jsxs(xt,{children:[e.jsx(ft,{asChild:!0,children:e.jsx(Lt,{className:"h-4 w-4 text-muted-foreground cursor-help"})}),e.jsx(gt,{side:"top",className:"max-w-xs",children:e.jsx("p",{className:"text-sm",children:"Marque se este aporte compÃµe sua reserva de emergÃªncia. Isso ajuda a calcular corretamente sua saÃºde financeira e quantos meses de gastos vocÃª tem guardados."})})]})})]})]}),e.jsx(Q,{type:"submit",className:"w-full",children:r!=null&&r.id?"Salvar AlteraÃ§Ãµes":"Registrar Aporte"})]})]})]}),e.jsxs(Re,{open:I,onOpenChange:v,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(Q,{variant:"outline",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Definir Meta"]})}),e.jsxs(ke,{children:[e.jsxs(Me,{children:[e.jsx(Ie,{children:"Definir Meta de Aportes"}),e.jsx(Fe,{children:"Defina sua meta mensal de investimentos para acompanhar seu progresso."})]}),e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(V,{htmlFor:"goalAmount",children:"Meta Mensal (R$)"}),e.jsx(be,{id:"goalAmount",placeholder:"0,00",value:_.goal,onChange:ae,ref:q,required:!0})]}),e.jsx(Q,{type:"submit",className:"w-full",children:"Definir Meta"})]})]})]})]})}const ce=10,zt="investmentsPage";function ha(){const{investments:i,categories:r,accounts:x,addInvestment:S,updateInvestment:j,deleteInvestment:m,investmentGoal:f}=Le(),{toast:y}=Ge(),{addPoints:b,registerAction:M,evaluateAchievements:D,setMetaMonthHit:R}=jt(),[u,p]=o.useState(!1),[_,k]=o.useState(null),[I,v]=o.useState(1),[g,q]=o.useState("relatorio"),[F,H]=o.useState(""),[O,K]=o.useState("all"),[Y,ae]=o.useState("date-desc"),[se,s]=o.useState(!1),d=o.useMemo(()=>r.filter(t=>t.tipo==="investimento"),[r]),[a,W]=yt(`filter_${zt}`,()=>({periodType:"monthly",dateRange:void 0,month:new Date().getMonth(),year:new Date().getFullYear()})),Xe=t=>{W({...a,dateRange:t})},Ke=t=>{W({dateRange:void 0,periodType:"monthly",month:t,year:a.year||new Date().getFullYear()})},Je=t=>{W(n=>({...n,dateRange:void 0,year:t}))},Qe=t=>{W(n=>({...n,periodType:t,dateRange:void 0}))};o.useEffect(()=>{v(1)},[F,O,Y,a,g]);const We=async t=>{const n=[];for(const l of t){const N=await S(l);N!=null&&N.id&&n.push(N)}return n},Ze=async t=>{for(const n of t)await m(n)},{filteredInvestments:P,totalInvested:B}=o.useMemo(()=>{let t=[],n,l;if(a.dateRange&&a.dateRange.from){n=a.dateRange.from instanceof Date?a.dateRange.from:new Date(a.dateRange.from);const c=a.dateRange.to||a.dateRange.from;l=c instanceof Date?new Date(c):new Date(c)}else a.periodType==="yearly"&&a.year?(n=Mt(new Date(a.year,0,1)),l=It(new Date(a.year,11,31))):a.periodType==="monthly"&&a.month!==void 0&&a.year&&(n=U(new Date(a.year,a.month,1)),l=X(new Date(a.year,a.month,1)));n&&l&&(l=new Date(l),l.setHours(23,59,59,999),t=i.filter(c=>{const h=J(c.data);return h>=n&&h<=l})),g==="relatorio"&&F&&(t=t.filter(c=>c.descricao.toLowerCase().includes(F.toLowerCase()))),O!=="all"&&(t=t.filter(c=>c.categoria_id===O)),t.sort((c,h)=>{switch(Y){case"date-asc":return new Date(c.data)-new Date(h.data);case"date-desc":return new Date(h.data)-new Date(c.data);case"value-asc":return c.valor_aporte-h.valor_aporte;case"value-desc":return h.valor_aporte-c.valor_aporte;case"description":return c.descricao.localeCompare(h.descricao);default:return new Date(h.data)-new Date(c.data)}});const N=t.reduce((c,h)=>c+h.valor_aporte,0);return{filteredInvestments:t,totalInvested:N}},[i,a,F,O,Y,g]),et=o.useMemo(()=>{if(!(Number(f)||0)||a.periodType!=="monthly")return!1;const n=new Date;return a.year===n.getFullYear()&&a.month===n.getMonth()?B===0:!1},[f,a,B]);o.useMemo(()=>{const t=Number(f)||0;if(!t)return{streak:0,series:[]};const l=ie({start:ne(new Date,11),end:new Date}).map(c=>{const h=U(c),A=X(c),C=i.filter(w=>{const Z=J(w.data);return Z>=h&&Z<=A}).reduce((w,Z)=>w+Z.valor_aporte,0);return{label:Oe(c,"MMM/yy"),invested:C,achieved:C>=t}});let N=0;for(let c=l.length-1;c>=0&&l[c].achieved;c--)N++;return{streak:N,series:l}},[i,f]);const pe=o.useMemo(()=>{if(P.length===0)return[];const t=d.reduce((n,l)=>(n[l.id]={categoryName:l.nome,total:0},n),{});return P.forEach(n=>{t[n.categoria_id]&&(t[n.categoria_id].total+=n.valor_aporte)}),Object.values(t).filter(n=>n.total>0).sort((n,l)=>l.total-n.total)},[P,d]),re=Math.ceil(P.length/ce),tt=P.slice((I-1)*ce,I*ce),at=o.useMemo(()=>{const t=Number(f)||0;return ie({start:ne(new Date,5),end:new Date}).map(l=>{const N=U(l),c=X(l),h=i.filter(A=>{const C=J(A.data);return C>=N&&C<=c}).reduce((A,C)=>A+C.valor_aporte,0);return{label:Oe(l,"MMM/yy",{locale:Ot}),invested:h,achieved:t>0?h>=t:!1}})},[i,f]),oe=o.useMemo(()=>{if(a.periodType!=="monthly"||a.month===void 0||!a.year)return null;const t=U(new Date(a.year,a.month,1)),n=X(new Date(a.year,a.month,1)),l=ne(t,1),N=U(l),c=X(l),h=i.filter(C=>{const w=J(C.data);return w>=t&&w<=n}).reduce((C,w)=>C+w.valor_aporte,0),A=i.filter(C=>{const w=J(C.data);return w>=N&&w<=c}).reduce((C,w)=>C+w.valor_aporte,0);return A===0?h>0?100:0:(h-A)/A*100},[i,a]),he=o.useMemo(()=>{if(a.dateRange&&a.dateRange.from)return ie({start:U(a.dateRange.from),end:X(a.dateRange.to||a.dateRange.from)}).length;if(a.periodType==="yearly"&&a.year){const t=new Date;return a.year<t.getFullYear()?12:a.year>t.getFullYear()?0:t.getMonth()+1}return a.periodType==="monthly"&&a.month!==void 0&&a.year,1},[a]),z=o.useMemo(()=>{const t=Number(f)||0;return t>0?t*he:0},[f,he]),st=async(t,n)=>{try{const l=d.find(c=>c.id===t.categoria_id),N={...t,descricao:t.descricao||`Aporte em ${l==null?void 0:l.nome}`};if(n)await j(n,N),y({title:"Aporte atualizado com sucesso!"});else{await S(N),y({title:"Aporte adicionado com sucesso!"});const c=Number(N.valor_aporte)||0,h=10,A=Math.min(40,Math.floor(c/100));b(h+A,"novo_aporte"),M("deposit",{amount:c});const C=B+c,w=z>0&&C>=z;R(w),D({monthlyStreak:void 0}),w&&y({title:"Meta do perÃ­odo alcanÃ§ada! ðŸŽ¯",description:"Conquista liberada e pontos adicionados."})}p(!1),k(null)}catch(l){y({title:"Erro ao salvar aporte",description:l.message,variant:"destructive"})}},rt=t=>{k({...t,categories:d}),p(!0)},ot=async t=>{try{await m(t),y({title:"Aporte excluÃ­do com sucesso!"})}catch(n){y({title:"Erro ao excluir aporte",description:n.message,variant:"destructive"})}},nt=t=>{t>0&&t<=re&&v(t)},it=t=>{t||k(null),p(t)};return e.jsxs(e.Fragment,{children:[e.jsxs(vt,{children:[e.jsx("title",{children:"GestÃ£o de Investimentos - Lumify"}),e.jsx("meta",{name:"description",content:"Acompanhe seus aportes e metas de investimento."})]}),e.jsxs("div",{className:"space-y-4 md:space-y-5 page-top",children:[e.jsx(_t,{title:"GestÃ£o de Investimentos",subtitle:"Acompanhe seus aportes e metas de investimento",actionButton:e.jsx(Ht,{onSubmit:st,investmentToEdit:_,isOpen:u,onOpenChange:it})}),e.jsxs(At,{value:g,onValueChange:q,className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs(Pt,{className:"grid w-full md:w-auto grid-cols-2",children:[e.jsxs(Ae,{value:"relatorio",className:"flex items-center gap-2",children:[e.jsx(bt,{className:"h-4 w-4"})," RelatÃ³rio"]}),e.jsxs(Ae,{value:"dashboard",className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-4 w-4"})," Dashboard"]})]}),e.jsxs("div",{className:"w-full md:w-auto flex items-center gap-2",children:[e.jsxs(Q,{variant:"outline",onClick:()=>s(!0),className:"flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"})," Importar OFX"]}),e.jsx(Ft,{periodType:a.periodType,setPeriodType:Qe,dateRange:a.dateRange,setDateRange:Xe,month:a.month,setMonth:Ke,year:a.year,setYear:Je})]})]}),e.jsx(Pe,{value:"relatorio",className:"mt-4 md:mt-5 space-y-4 md:space-y-5",children:e.jsxs(L,{children:[e.jsxs(G,{children:[e.jsx(T,{children:"Seus Aportes"}),e.jsx(ge,{children:"Lista de todos os aportes no perÃ­odo selecionado."})]}),e.jsxs($,{children:[e.jsx(Ct,{transactions:tt,categories:d,accounts:x,type:"investment",onEdit:rt,onDelete:ot,searchTerm:F,onSearchChange:H,selectedCategory:O,onCategoryChange:K,sortBy:Y,onSortChange:ae}),re>1&&e.jsx(wt,{currentPage:I,totalPages:re,onPageChange:nt})]})]})}),e.jsxs(Pe,{value:"dashboard",className:"mt-4 md:mt-5 space-y-4 md:space-y-5",children:[et&&e.jsxs(L,{children:[e.jsx(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4 text-warning"}),"ComeÃ§o de mÃªs: ainda sem aportes"]})}),e.jsx($,{children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"FaÃ§a um pequeno aporte agora para manter o ritmo e alcanÃ§ar sua meta."}),e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-3 py-1.5 bg-primary text-white rounded-md hover:opacity-90",children:[e.jsx(le,{className:"w-4 h-4 mr-2"})," Registrar Aporte"]})]})})]}),e.jsxs("div",{className:"grid gap-3 md:gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(L,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Total Aportado"}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs($,{children:[e.jsx("div",{className:"text-2xl font-bold text-income",children:B.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total de aportes no perÃ­odo selecionado."})]})]}),e.jsxs(L,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"NÃºmero de Aportes"}),e.jsx(le,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs($,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Quantidade de aportes realizados."})]})]}),e.jsxs(L,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Aporte MÃ©dio"}),e.jsx(ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs($,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.length>0?(B/P.length).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor mÃ©dio por aporte."})]})]}),e.jsxs(L,{children:[e.jsxs(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(T,{className:"text-sm font-medium",children:"Maior Aporte"}),e.jsx(je,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs($,{children:[e.jsx("div",{className:"text-2xl font-bold",children:P.length>0?Math.max(...P.map(t=>t.valor_aporte)).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maior aporte do perÃ­odo."})]})]}),e.jsxs(L,{children:[e.jsx(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsxs(T,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Te,{className:"h-4 w-4 text-primary"})," Progresso da Meta (perÃ­odo)"]})}),e.jsx($,{children:z>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Math.round(B/z*100),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["R$ ",B.toLocaleString("pt-BR",{minimumFractionDigits:2})," de R$ ",z.toLocaleString("pt-BR",{minimumFractionDigits:2}),B>z&&e.jsxs("span",{className:"block text-green-600 font-medium",children:["R$ ",(B-z).toLocaleString("pt-BR",{minimumFractionDigits:2})," alÃ©m da meta! ðŸŽ‰"]})]})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:"Defina uma meta mensal para acompanhar o progresso."})})]}),oe!==null&&e.jsxs(L,{children:[e.jsx(G,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:e.jsx(T,{className:"text-sm font-medium",children:"VariaÃ§Ã£o m/m"})}),e.jsxs($,{children:[e.jsxs("div",{className:`text-2xl font-bold ${oe>=0?"text-income":"text-expense"}`,children:[oe.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Comparado ao mÃªs anterior."})]})]})]}),e.jsxs(L,{children:[e.jsxs(G,{children:[e.jsx(T,{children:"EvoluÃ§Ã£o de Aportes (12 meses)"}),e.jsx(ge,{children:"Meses com meta batida ficam destacados."})]}),e.jsx($,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:at.map((t,n)=>e.jsxs("div",{className:`p-3 rounded-md border ${t.achieved?"bg-success-muted border-success":"bg-muted"}`,children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:t.label}),e.jsxs("div",{className:"text-sm font-semibold mt-1",children:["R$ ",t.invested.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),Number(f)>0&&e.jsx("div",{className:`text-xs mt-1 ${t.achieved?"text-success":"text-muted-foreground"}`,children:t.achieved?"Meta batida":"Abaixo da meta"})]},n))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:[pe.length>0?e.jsx(ve,{data:pe,title:"DivisÃ£o de Aportes por Categoria",description:"AnÃ¡lise percentual dos seus investimentos no perÃ­odo."}):e.jsx("div",{className:"text-center text-muted-foreground py-12 bg-card border rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-10 h-10 opacity-50"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-lg",children:"Nenhum dado de investimento por categoria."}),e.jsx("p",{className:"text-sm max-w-md",children:"Registre seus aportes para ver a divisÃ£o por categoria."})]})]})}),x.length>0?e.jsx(ve,{data:x.map(t=>({categoryName:t.nome_banco,total:Number(t.saldo)||0})),title:"PatrimÃ´nio por InstituiÃ§Ã£o",description:"DistribuiÃ§Ã£o dos saldos nas suas instituiÃ§Ãµes financeiras (incluindo dÃ­vidas)"}):e.jsx("div",{className:"text-center text-muted-foreground py-12 bg-card border rounded-lg",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-20 h-20 bg-muted rounded-full flex items-center justify-center",children:e.jsx(ee,{className:"w-10 h-10 opacity-50"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-lg",children:"Nenhuma instituiÃ§Ã£o registrada."}),e.jsx("p",{className:"text-sm max-w-md",children:"Adicione suas instituiÃ§Ãµes financeiras para visualizar a distribuiÃ§Ã£o do patrimÃ´nio."})]})]})})]})]})]}),e.jsx(St,{isOpen:se,onOpenChange:s,type:"investment",categories:d,institutions:x,existingTransactions:i,onImport:We,onUndoImport:Ze,onClose:()=>s(!1)})]})]})}export{ha as InvestmentsPage};
