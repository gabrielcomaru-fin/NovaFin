import{c as Y,r as o,R as J,j,v as K,g as Q}from"./index-f09e9372.js";import{_ as M}from"./select-157e3a99.js";import{e as B,s as W,p as I}from"./index-a49341d7.js";import{r as ee,t as F}from"./index-a53a69e9.js";import{f as te}from"./CompactHeader-ab4c6809.js";const Se=Y("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function ne(e,t=[]){let n=[];function r(s,c){const i=o.createContext(c),l=n.length;n=[...n,c];function p(g){const{scope:m,children:y,...u}=g,$=(m==null?void 0:m[e][l])||i,h=o.useMemo(()=>u,Object.values(u));return o.createElement($.Provider,{value:h},y)}function x(g,m){const y=(m==null?void 0:m[e][l])||i,u=o.useContext(y);if(u)return u;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${s}\``)}return p.displayName=s+"Provider",[p,x]}const a=()=>{const s=n.map(c=>o.createContext(c));return function(i){const l=(i==null?void 0:i[e])||s;return o.useMemo(()=>({[`__scope${e}`]:{...i,[e]:l}}),[i,l])}};return a.scopeName=e,[r,re(a,...t)]}function re(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const c=r.reduce((i,{useScope:l,scopeName:p})=>{const g=l(s)[`__scope${p}`];return{...i,...g}},{});return o.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return n.scopeName=t.scopeName,n}function ae(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function oe(...e){return t=>e.forEach(n=>ae(n,t))}const T=o.forwardRef((e,t)=>{const{children:n,...r}=e,a=o.Children.toArray(n),s=a.find(ce);if(s){const c=s.props.children,i=a.map(l=>l===s?o.Children.count(c)>1?o.Children.only(null):o.isValidElement(c)?c.props.children:null:l);return o.createElement(_,M({},r,{ref:t}),o.isValidElement(c)?o.cloneElement(c,void 0,i):null)}return o.createElement(_,M({},r,{ref:t}),n)});T.displayName="Slot";const _=o.forwardRef((e,t)=>{const{children:n,...r}=e;return o.isValidElement(n)?o.cloneElement(n,{...ie(r,n.props),ref:t?oe(t,n.ref):n.ref}):o.Children.count(n)>1?o.Children.only(null):null});_.displayName="SlotClone";const se=({children:e})=>o.createElement(o.Fragment,null,e);function ce(e){return o.isValidElement(e)&&e.type===se}function ie(e,t){const n={...t};for(const r in t){const a=e[r],s=t[r];/^on[A-Z]/.test(r)?a&&s?n[r]=(...i)=>{s(...i),a(...i)}:a&&(n[r]=a):r==="style"?n[r]={...a,...s}:r==="className"&&(n[r]=[a,s].filter(Boolean).join(" "))}return{...e,...n}}const le=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],k=le.reduce((e,t)=>{const n=o.forwardRef((r,a)=>{const{asChild:s,...c}=r,i=s?T:t;return o.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),o.createElement(i,M({},c,{ref:a}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),z="Progress",P=100,[ue,Ce]=ne(z),[de,fe]=ue(z),q=o.forwardRef((e,t)=>{const{__scopeProgress:n,value:r,max:a,getValueLabel:s=$e,...c}=e,i=V(a)?a:P,l=Z(r,i)?r:null,p=E(l)?s(l,i):void 0;return o.createElement(de,{scope:n,value:l,max:i},o.createElement(k.div,M({"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":E(l)?l:void 0,"aria-valuetext":p,role:"progressbar","data-state":U(l,i),"data-value":l??void 0,"data-max":i},c,{ref:t})))});q.propTypes={max(e,t,n){const r=e[t],a=String(r);return r&&!V(r)?new Error(ve(a,n)):null},value(e,t,n){const r=e[t],a=String(r),s=V(e.max)?e.max:P;return r!=null&&!Z(r,s)?new Error(ge(a,n)):null}};const pe="ProgressIndicator",me=o.forwardRef((e,t)=>{var n;const{__scopeProgress:r,...a}=e,s=fe(pe,r);return o.createElement(k.div,M({"data-state":U(s.value,s.max),"data-value":(n=s.value)!==null&&n!==void 0?n:void 0,"data-max":s.max},a,{ref:t}))});function $e(e,t){return`${Math.round(e/t*100)}%`}function U(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function E(e){return typeof e=="number"}function V(e){return E(e)&&!isNaN(e)&&e>0}function Z(e,t){return E(e)&&!isNaN(e)&&e<=t&&e>=0}function ve(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${P}\`.`}function ge(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${P} if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`}const G=q,xe=me,he=J.forwardRef(({className:e,value:t,...n},r)=>j.jsx(G,{ref:r,className:K("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:j.jsx(xe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));he.displayName=G.displayName;function H(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function L(e,t){ee(2,arguments);var n=F(e),r=F(t),a=H(n,r),s=Math.abs(te(n,r));n.setDate(n.getDate()-a*s);var c=+(H(n,r)===-a),i=a*(s-c);return i===0?0:i}const Ne=()=>{const{incomes:e,expenses:t,investments:n,totalIncome:r,availableBalance:a}=Q();return o.useMemo(()=>{const c=new Date,i=B(c),l=Math.max(1,L(i,c)),p=W(c),x=B(c),g=e.filter(f=>{const d=I(f.data);return d>=p&&d<=x}),m=t.filter(f=>{const d=I(f.data);return d>=p&&d<=x}),y=n.filter(f=>{const d=I(f.data);return d>=p&&d<=x}),u=g.reduce((f,d)=>f+d.valor,0),$=m.filter(f=>f.pago).reduce((f,d)=>f+d.valor,0),h=y.reduce((f,d)=>f+d.valor_aporte,0),b=u-$-h,S=b/l,C=u>0?h/u*100:0,D=$>0?u/$*100:u>0?100:0,A=L(c,p)+1,N=A>0?$/A:0,w=N>0?Math.ceil(b/N):1/0,X=b>u*.2,R=u<$+h,O=D>100,v=[];return R?v.push({type:"warning",message:"Suas receitas não cobrem seus gastos e investimentos. Considere aumentar a renda ou reduzir gastos.",action:"Revisar orçamento"}):O?v.push({type:"warning",message:"Você está gastando mais do que recebe. Atenção ao orçamento!",action:"Controlar gastos"}):C<10?v.push({type:"tip",message:"Sua taxa de poupança está baixa. Tente investir pelo menos 10% da sua renda.",action:"Aumentar investimentos"}):C>=20&&v.push({type:"success",message:"Excelente taxa de poupança! Você está no caminho certo para a independência financeira.",action:"Manter disciplina"}),b<0?v.push({type:"warning",message:"Saldo negativo! Você está gastando mais do que tem disponível.",action:"Revisar gastos urgentemente"}):b>0&&w<7&&v.push({type:"tip",message:"Seu saldo pode se esgotar em breve. Planeje suas próximas receitas.",action:"Planejar receitas"}),S>0&&S<50&&v.push({type:"tip",message:"Sua capacidade de gasto diário está baixa. Considere otimizar seu orçamento.",action:"Otimizar orçamento"}),{availableBalance:b,dailySpendingCapacity:S,incomeVsExpensesRatio:D,savingsRate:C,daysUntilBalanceZero:w===1/0?null:w,averageDailySpending:N,isBalanceHealthy:X,needsMoreIncome:R,isSpendingTooMuch:O,totalCurrentMonthIncome:u,totalCurrentMonthExpenses:$,totalCurrentMonthInvestments:h,daysRemaining:l,recommendations:v}},[e,t,n,r,a])};export{Se as L,he as P,Ne as u};
