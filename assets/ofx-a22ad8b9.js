import{e as V,r as x,q as aa,j as e,s as ge,v as sa,K as ra,R as p,z as m,M as fe,B as T,l as ta,m as oa,F as la,G as na,I as ia,J as ca,N as da,O as ma}from"./index-e054d3da.js";import{g as je,T as xa,O as ua,W as pa,h as ha,i as ga,j as fa,k as ve,l as ja,R as va,m as Na,D as wa,b as ba,c as ya,d as Ta,e as Da,C as ie}from"./dialog-e2414073.js";import{I as Aa}from"./label-ed88c509.js";import{S as ce,a as de,b as me,c as xe,d as k}from"./select-127d756a.js";import{P as z,b as B,F as H,c as U}from"./CompactPeriodFilter-2b2a5a53.js";import{B as C}from"./badge-1d421c36.js";import{C as W}from"./check-circle-2-a27e51b8.js";import{C as ue}from"./clock-ad208001.js";import{S as Ca}from"./shield-check-df8a5410.js";import{T as Sa}from"./trash-2-a7db4722.js";import{W as pe}from"./wallet-ddf46cbb.js";import{C as Ra,a as Ea}from"./extends-d4fa9dad.js";import{B as Oa,S as Pa,F as ka}from"./smartphone-5222ac50.js";import{B as Fa}from"./building-2-a5b5cc7c.js";const Ns=V("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),ws=V("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),_a=V("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function bs(a,s){const r=x.useRef(!0),[o,l]=x.useState(()=>{try{const c=localStorage.getItem(a);return c!==null?JSON.parse(c):typeof s=="function"?s():s}catch{return typeof s=="function"?s():s}});return x.useEffect(()=>{if(r.current){r.current=!1;return}try{localStorage.setItem(a,JSON.stringify(o))}catch{}},[a,o]),[o,l]}var Ne="AlertDialog",[Ma,ys]=aa(Ne,[je]),w=je(),we=a=>{const{__scopeAlertDialog:s,...r}=a,o=w(s);return e.jsx(va,{...o,...r,modal:!0})};we.displayName=Ne;var Ia="AlertDialogTrigger",be=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,l=w(r);return e.jsx(xa,{...l,...o,ref:s})});be.displayName=Ia;var $a="AlertDialogPortal",ye=a=>{const{__scopeAlertDialog:s,...r}=a,o=w(s);return e.jsx(ja,{...o,...r})};ye.displayName=$a;var La="AlertDialogOverlay",Te=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,l=w(r);return e.jsx(ua,{...l,...o,ref:s})});Te.displayName=La;var R="AlertDialogContent",[Xa,qa]=Ma(R),za=ra("AlertDialogContent"),De=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,children:o,...l}=a,c=w(r),n=x.useRef(null),D=ge(s,n),N=x.useRef(null);return e.jsx(pa,{contentName:R,titleName:Ae,docsSlug:"alert-dialog",children:e.jsx(Xa,{scope:r,cancelRef:N,children:e.jsxs(ha,{role:"alertdialog",...c,...l,ref:D,onOpenAutoFocus:sa(l.onOpenAutoFocus,h=>{var b;h.preventDefault(),(b=N.current)==null||b.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[e.jsx(za,{children:o}),e.jsx(Ha,{contentRef:n})]})})})});De.displayName=R;var Ae="AlertDialogTitle",Ce=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,l=w(r);return e.jsx(ga,{...l,...o,ref:s})});Ce.displayName=Ae;var Se="AlertDialogDescription",Re=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,l=w(r);return e.jsx(fa,{...l,...o,ref:s})});Re.displayName=Se;var Ba="AlertDialogAction",Ee=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,l=w(r);return e.jsx(ve,{...l,...o,ref:s})});Ee.displayName=Ba;var Oe="AlertDialogCancel",Pe=x.forwardRef((a,s)=>{const{__scopeAlertDialog:r,...o}=a,{cancelRef:l}=qa(Oe,r),c=w(r),n=ge(s,l);return e.jsx(ve,{...c,...o,ref:n})});Pe.displayName=Oe;var Ha=({contentRef:a})=>{const s=`\`${R}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${R}\` by passing a \`${Se}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${R}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var o;document.getElementById((o=a.current)==null?void 0:o.getAttribute("aria-describedby"))||console.warn(s)},[s,a]),null},Ua=we,Wa=be,Ga=ye,ke=Te,Fe=De,_e=Ee,Me=Pe,Ie=Ce,$e=Re;const Va=Ua,Ja=Wa,Ka=Ga,Le=p.forwardRef(({className:a,...s},r)=>e.jsx(ke,{className:m("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s,ref:r}));Le.displayName=ke.displayName;const Xe=p.forwardRef(({className:a,...s},r)=>e.jsxs(Ka,{children:[e.jsx(Le,{}),e.jsx(Fe,{ref:r,className:m("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...s})]}));Xe.displayName=Fe.displayName;const qe=({className:a,...s})=>e.jsx("div",{className:m("flex flex-col space-y-2 text-center sm:text-left",a),...s});qe.displayName="AlertDialogHeader";const ze=({className:a,...s})=>e.jsx("div",{className:m("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s});ze.displayName="AlertDialogFooter";const Be=p.forwardRef(({className:a,...s},r)=>e.jsx(Ie,{ref:r,className:m("text-lg font-semibold",a),...s}));Be.displayName=Ie.displayName;const He=p.forwardRef(({className:a,...s},r)=>e.jsx($e,{ref:r,className:m("text-sm text-muted-foreground",a),...s}));He.displayName=$e.displayName;const Ue=p.forwardRef(({className:a,...s},r)=>e.jsx(_e,{ref:r,className:m(fe(),a),...s}));Ue.displayName=_e.displayName;const We=p.forwardRef(({className:a,...s},r)=>e.jsx(Me,{ref:r,className:m(fe({variant:"outline"}),"mt-2 sm:mt-0",a),...s}));We.displayName=Me.displayName;const Ge=p.forwardRef(({className:a,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:m("w-full caption-bottom text-sm",a),...s})}));Ge.displayName="Table";const Ve=p.forwardRef(({className:a,...s},r)=>e.jsx("thead",{ref:r,className:m("[&_tr]:border-b",a),...s}));Ve.displayName="TableHeader";const Je=p.forwardRef(({className:a,...s},r)=>e.jsx("tbody",{ref:r,className:m("[&_tr:last-child]:border-0",a),...s}));Je.displayName="TableBody";const Ya=p.forwardRef(({className:a,...s},r)=>e.jsx("tfoot",{ref:r,className:m("bg-primary font-medium text-primary-foreground",a),...s}));Ya.displayName="TableFooter";const G=p.forwardRef(({className:a,...s},r)=>e.jsx("tr",{ref:r,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s}));G.displayName="TableRow";const v=p.forwardRef(({className:a,...s},r)=>e.jsx("th",{ref:r,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s}));v.displayName="TableHead";const j=p.forwardRef(({className:a,...s},r)=>e.jsx("td",{ref:r,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s}));j.displayName="TableCell";const Za=p.forwardRef(({className:a,...s},r)=>e.jsx("caption",{ref:r,className:m("mt-4 text-sm text-muted-foreground",a),...s}));Za.displayName="TableCaption";const Ts=({transactions:a,categories:s,accounts:r,paymentMethods:o,type:l,onEdit:c,onDelete:n,onTogglePayment:D,onUpdatePaymentMethod:N,selectable:h,selectedIds:b=[],onSelectOne:F,onSelectAll:_,searchTerm:E,onSearchChange:M,selectedCategory:O,onCategoryChange:I,paymentStatus:L,onPaymentStatusChange:J,sortBy:P,onSortChange:$})=>{const d=l==="expense",[Ke,X]=x.useState(!1),[K,Y]=x.useState(null),Z=t=>{Y(t),X(!0)},Ye=async t=>{if(!(!K||!N))try{await N(K.id,{meio_pagamento_id:t}),X(!1),Y(null)}catch(i){console.error("Erro ao atualizar meio de pagamento:",i)}},Q=t=>({cartao_credito:ie,cartao_debito:ie,dinheiro:Oa,pix:Pa,transferencia:Fa,boleto:ka,outros:pe})[t]||pe,ee=t=>{if(!t)return"hsl(var(--primary))";if(!document.documentElement.classList.contains("dark"))return t;let y,S,A;if(t.startsWith("#")){const g=t.replace("#","");y=parseInt(g.substring(0,2),16),S=parseInt(g.substring(2,4),16),A=parseInt(g.substring(4,6),16)}else if(t.startsWith("rgb")){const g=t.match(/\d+/g);if(g&&g.length>=3)y=parseInt(g[0]),S=parseInt(g[1]),A=parseInt(g[2]);else return"hsl(var(--primary))"}else return"hsl(var(--primary))";const u=(.299*y+.587*S+.114*A)/255;if(u<.5){const q=Math.max(.6,u*2.5)/u;let oe=Math.min(255,Math.round(y*q)),le=Math.min(255,Math.round(S*q)),ne=Math.min(255,Math.round(A*q));return Math.max(oe,le,ne)<150?"hsl(var(--primary))":`rgb(${oe}, ${le}, ${ne})`}return t},Ze=!!(E&&String(E).trim()!==""),Qe=!!(O&&O!=="all"),ea=!!(d&&L&&L!=="all"),ae=(t,i)=>P?P===t?e.jsx(Ra,{className:"inline-block h-3.5 w-3.5 ml-1 opacity-70"}):P===i?e.jsx(Ea,{className:"inline-block h-3.5 w-3.5 ml-1 opacity-70"}):null:null,se=(t,i)=>{$&&$(P===i?t:i)};return e.jsxs("div",{className:"rounded-lg border overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ge,{children:[e.jsx(Ve,{children:e.jsxs(G,{children:[h&&e.jsx(v,{className:"w-[40px] align-middle",children:e.jsx("input",{type:"checkbox",className:"rounded accent-primary",checked:a.length>0&&a.every(t=>b.includes(t.id)),onChange:t=>_&&_(a.map(i=>i.id),t.target.checked),"aria-label":"Selecionar todos"})}),e.jsx(v,{className:"align-middle whitespace-nowrap w-[38%]",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Descrição"}),M&&e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 ${Ze?"text-primary bg-primary/10":"text-muted-foreground"} hover:text-foreground`,title:"Filtrar descrição",children:e.jsx(H,{className:"h-3.5 w-3.5"})})}),e.jsx(U,{className:"w-72",align:"start",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Filtrar Descrição"}),e.jsx(Aa,{value:E||"",onChange:t=>M(t.target.value),placeholder:"Digite parte da descrição",className:"h-8 text-sm"})]})})]})]})}),e.jsx(v,{className:"hidden sm:table-cell align-middle whitespace-nowrap w-[12%]",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Categoria"}),I&&e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 ${Qe?"text-primary bg-primary/10":"text-muted-foreground"} hover:text-foreground`,title:"Filtrar categoria",children:e.jsx(H,{className:"h-3.5 w-3.5"})})}),e.jsx(U,{className:"w-56",align:"start",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Filtrar Categoria"}),e.jsxs(ce,{value:O||"all",onValueChange:I,children:[e.jsx(de,{className:"h-8 text-sm",children:e.jsx(me,{placeholder:"Todas"})}),e.jsxs(xe,{children:[e.jsx(k,{value:"all",children:"Todas"}),s.map(t=>e.jsx(k,{value:t.id,children:t.nome},t.id))]})]})]})})]})]})}),d&&e.jsx(v,{className:"hidden md:table-cell align-middle whitespace-nowrap w-[8%]",children:e.jsx("div",{className:"flex items-center justify-center gap-1.5",children:e.jsx("span",{className:"text-xs uppercase text-muted-foreground",children:"Meio"})})}),!d&&e.jsx(v,{className:"hidden md:table-cell align-middle whitespace-nowrap w-[18%]",children:e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:"text-xs uppercase text-muted-foreground",children:"Instituição"})})}),e.jsx(v,{className:"align-middle cursor-pointer select-none w-[15%]",children:e.jsxs("div",{className:"flex items-center gap-1.5",onClick:()=>se("value-asc","value-desc"),children:[e.jsx("span",{className:"text-xs uppercase text-muted-foreground",children:"Valor"}),ae("value-asc","value-desc")]})}),e.jsx(v,{className:"hidden md:table-cell align-middle cursor-pointer select-none w-[10%]",children:e.jsxs("div",{className:"flex items-center gap-1.5",onClick:()=>se("date-asc","date-desc"),children:[e.jsx("span",{className:"text-xs uppercase text-muted-foreground",children:"Data"}),ae("date-asc","date-desc")]})}),d&&e.jsx(v,{className:"hidden sm:table-cell align-middle whitespace-nowrap w-[10%]",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[11px] uppercase text-muted-foreground",children:"Status"}),J&&e.jsxs(z,{children:[e.jsx(B,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:`h-6 w-6 p-0 ${ea?"text-primary bg-primary/10":"text-muted-foreground"} hover:text-foreground`,title:"Filtrar status",children:e.jsx(H,{className:"h-3.5 w-3.5"})})}),e.jsx(U,{className:"w-56",align:"center",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Filtrar Status"}),e.jsxs(ce,{value:L||"all",onValueChange:J,children:[e.jsx(de,{className:"h-8 text-sm",children:e.jsx(me,{placeholder:"Todos"})}),e.jsxs(xe,{children:[e.jsx(k,{value:"all",children:"Todos"}),e.jsx(k,{value:"paid",children:"Pagos"}),e.jsx(k,{value:"pending",children:"Pendentes"})]})]})]})})]})]})}),e.jsx(v,{className:"align-middle whitespace-nowrap w-[8%]",children:e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:"text-xs uppercase text-muted-foreground",children:"Ações"})})})]})}),e.jsxs(Je,{children:[e.jsx(ta,{children:a.map(t=>{const i=s.find(u=>u.id===t.categoria_id),y=r==null?void 0:r.find(u=>u.id===t.instituicao_id),S=d?t.valor:t.valor_aporte||t.valor,A=t.descricao;return e.jsxs(oa.tr,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"hover:bg-muted/50",children:[h&&e.jsx(j,{className:"w-[40px]",children:e.jsx("input",{type:"checkbox",className:"rounded accent-primary",checked:b.includes(t.id),onChange:u=>F&&F(t.id,u.target.checked),"aria-label":`Selecionar ${A}`})}),e.jsx(j,{className:"font-medium w-[38%]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{children:A}),e.jsx("div",{className:"sm:hidden",children:e.jsx(C,{variant:"outline",className:"text-xs",children:(i==null?void 0:i.nome)||"Sem categoria"})}),d&&e.jsx("div",{className:"sm:hidden",children:t.pago?e.jsxs(C,{variant:"default",className:"bg-green-100 text-green-800 border-green-200 text-xs",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Pago"]}):e.jsxs(C,{variant:"outline",className:"text-orange-600 border-orange-200 text-xs",children:[e.jsx(ue,{className:"w-3 h-3 mr-1"}),"Pendente"]})})]})}),e.jsx(j,{className:"hidden sm:table-cell w-[12%]",children:e.jsx(C,{variant:"outline",children:(i==null?void 0:i.nome)||"Sem categoria"})}),d&&e.jsx(j,{className:"hidden md:table-cell w-[8%] align-middle",children:e.jsx("div",{className:"flex justify-center items-center",children:(()=>{const u=o==null?void 0:o.find(te=>te.id===t.meio_pagamento_id);if(!u)return e.jsx("button",{onClick:()=>Z(t),className:"w-4 h-4 rounded-full bg-muted hover:bg-muted/80 transition-colors inline-flex items-center justify-center",title:"Adicionar meio de pagamento",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})});const g=Q(u.tipo),re=ee(u.cor);return e.jsx("button",{onClick:()=>Z(t),className:"w-4 h-4 hover:scale-110 transition-transform inline-flex items-center justify-center",title:`${u.nome} - Clique para alterar`,children:e.jsx(g,{className:"w-4 h-4",style:{color:re||"hsl(var(--primary))"}})})})()})}),!d&&e.jsx(j,{className:"hidden md:table-cell w-[18%]",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"secondary",children:(y==null?void 0:y.nome_banco)||"Sem instituição"}),t.is_reserva_emergencia&&e.jsx(la,{children:e.jsxs(na,{children:[e.jsx(ia,{asChild:!0,children:e.jsx(Ca,{className:"h-4 w-4 text-emerald-500 flex-shrink-0"})}),e.jsx(ca,{side:"top",children:e.jsx("p",{className:"text-xs",children:"Reserva de Emergência"})})]})})]})}),e.jsxs(j,{className:`font-semibold w-[15%] ${d?"text-destructive text-left":"text-green-500 text-left"}`,children:[d?"- R$ ":"+ R$ "," ",S.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx(j,{className:"hidden md:table-cell text-muted-foreground w-[10%] text-left",children:new Date(t.data).toLocaleDateString("pt-BR",{timeZone:"UTC"})}),d&&e.jsx(j,{className:"hidden sm:table-cell w-[10%]",children:e.jsx("div",{className:"flex items-center",children:t.pago?e.jsxs(C,{variant:"default",className:"bg-green-100 text-green-800 border-green-200",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Pago"]}):e.jsxs(C,{variant:"outline",className:"text-orange-600 border-orange-200",children:[e.jsx(ue,{className:"w-3 h-3 mr-1"}),"Pendente"]})})}),e.jsx(j,{className:"w-[8%]",children:e.jsxs("div",{className:"flex items-center gap-1",children:[d&&D&&e.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>D(t.id),title:t.pago?"Marcar como não pago":"Marcar como pago",children:t.pago?e.jsx(_a,{className:"h-4 w-4 text-orange-600 hover:text-orange-700"}):e.jsx(W,{className:"h-4 w-4 text-green-600 hover:text-green-700"})}),e.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>c(t),children:e.jsx(Na,{className:"h-4 w-4"})}),e.jsxs(Va,{children:[e.jsx(Ja,{asChild:!0,children:e.jsx(T,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",children:e.jsx(Sa,{className:"h-4 w-4"})})}),e.jsxs(Xe,{children:[e.jsxs(qe,{children:[e.jsx(Be,{children:"Você tem certeza?"}),e.jsx(He,{children:"Esta ação não pode ser desfeita. Isso excluirá permanentemente esta transação."})]}),e.jsxs(ze,{children:[e.jsx(We,{children:"Cancelar"}),e.jsx(Ue,{onClick:()=>n(t.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Excluir"})]})]})]})]})})]},t.id)})}),a.length===0&&e.jsx(G,{children:e.jsx(j,{colSpan:6,className:"py-10 text-center text-sm text-muted-foreground",children:"Nenhum resultado para os filtros aplicados."})})]})]})}),e.jsx(wa,{open:Ke,onOpenChange:X,children:e.jsxs(ba,{className:"sm:max-w-md",children:[e.jsxs(ya,{children:[e.jsx(Ta,{children:"Alterar Meio de Pagamento"}),e.jsx(Da,{children:"Selecione um novo meio de pagamento para esta despesa."})]}),e.jsx("div",{className:"space-y-3",children:o==null?void 0:o.map(t=>{const i=Q(t.tipo);return e.jsxs("button",{onClick:()=>Ye(t.id),className:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsx(i,{className:"w-4 h-4",style:{color:ee(t.cor)||"hsl(var(--primary))"}}),e.jsx("span",{className:"font-medium text-card-foreground",children:t.nome})]},t.id)})})]})})]})},Ds=({currentPage:a,totalPages:s,onPageChange:r})=>s<=1?null:e.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>r(a-1),disabled:a===1,children:[e.jsx(da,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Anterior"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Página ",a," de ",s]}),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>r(a+1),disabled:a===s,children:[e.jsx("span",{className:"mr-2",children:"Próxima"}),e.jsx(ma,{className:"h-4 w-4"})]})]}),he=typeof TextDecoder<"u"?new TextDecoder("utf-8"):null;async function Qa(a){if(typeof a=="string")return a;if(typeof window<"u"&&a instanceof File)try{return await a.text()}catch(s){throw console.error("[OFX Parser] Erro ao ler arquivo como texto:",s),new Error(`Erro ao ler arquivo: ${(s==null?void 0:s.message)||"Arquivo pode estar corrompido"}`)}if(a&&a.byteLength!=null)return he?he.decode(a):String.fromCharCode.apply(null,new Uint8Array(a));throw console.error("[OFX Parser] Entrada inválida:",typeof a,a),new Error("Entrada inválida para leitura de texto OFX. Selecione um arquivo .ofx válido.")}function es(a){if(!a)return null;const s=String(a).match(/(\d{4})(\d{2})(\d{2})/);if(!s)return null;const[r,o,l,c]=s,n=Number(o),D=Number(l)-1,N=Number(c);return new Date(n,D,N).toISOString().split("T")[0]}function as(a){if(a==null)return 0;const s=Number(String(a).replace(",","."));return isNaN(s)?0:s}function f(a,s){const r=new RegExp(`<${s}>([^\r
<]*)`,"i"),o=a.match(r);if(o)return o[1].trim();const l=new RegExp(`<${s}>([sS]*?)</${s}>`,"i"),c=a.match(l);return c?c[1].trim():""}function ss(a){const s=/<STMTTRN>([\s\S]*?)<\/STMTTRN>/gi,r=[];let o;for(;(o=s.exec(a))!==null;)r.push(o[1]);if(r.length)return r;const l=/<STMTTRN>[\s\S]*?(?=<STMTTRN>|<\/BANKTRANLIST>|<\/STMTRS>|$)/gi;return(a.match(l)||[]).map(n=>n.replace(/^<STMTTRN>/i,""))}function rs(a){return/<OFX[>\s]/i.test(a)||/<OFX>/i.test(a)}function ts(a){if(console.log("[OFX Parser] Iniciando parse, tamanho do texto:",(a==null?void 0:a.length)||0),!a)throw new Error("Arquivo vazio ou não pôde ser lido");if(!rs(a))throw console.error("[OFX Parser] Arquivo não reconhecido como OFX. Primeiros 500 caracteres:",a.substring(0,500)),new Error("Arquivo OFX inválido ou não reconhecido. Verifique se o arquivo é um OFX válido do seu banco.");const s=/\<banktranlist\>([\s\S]*?)\<\/banktranlist\>/i.exec(a),r=(s==null?void 0:s[1])||a;console.log("[OFX Parser] Bloco BANKTRANLIST encontrado:",!!s);const o=ss(r);if(console.log("[OFX Parser] Chunks de transação encontrados:",o.length),o.length===0)throw new Error("Nenhuma transação (STMTTRN) encontrada no arquivo OFX. O arquivo pode estar vazio ou em formato não suportado.");const l=o.map((n,D)=>{const N=f(n,"TRNTYPE")||f(n,"trntype"),h=f(n,"DTPOSTED")||f(n,"dtposted")||f(n,"DTUSER"),b=f(n,"TRNAMT")||f(n,"trnamt"),F=f(n,"MEMO")||f(n,"memo")||f(n,"NAME"),_=f(n,"FITID")||f(n,"fitid"),E=es(h),M=as(b),O=(F||"").trim(),I=(N||"").toUpperCase();return{data:E,valor:M,descricao:O,tipo:I,identificador:_,_rawDt:h,_rawAmt:b}}),c=l.filter(n=>n.data&&(n.valor||n.valor===0));if(console.log("[OFX Parser] Transações totais:",l.length,"Válidas:",c.length),l.length>0&&c.length===0)throw console.warn("[OFX Parser] Transações encontradas mas nenhuma válida. Exemplos:",l.slice(0,3)),new Error(`Foram encontradas ${l.length} transações, mas nenhuma com data e valor válidos.`);return c}async function As(a){try{console.log("[OFX Parser] Lendo arquivo...",(a==null?void 0:a.name)||"string input");const s=await Qa(a);return console.log("[OFX Parser] Arquivo lido com sucesso, tamanho:",(s==null?void 0:s.length)||0),ts(s)}catch(s){throw console.error("[OFX Parser] Erro ao processar arquivo:",s),s}}export{Ns as L,Ds as P,Ts as T,ws as U,As as p,bs as u};
