import{c as w}from"./index-f09e9372.js";const O=w("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),d=typeof TextDecoder<"u"?new TextDecoder("utf-8"):null;async function S(t){if(typeof t=="string")return t;if(typeof window<"u"&&t instanceof File)return await t.text();if(t&&t.byteLength!=null)return d?d.decode(t):String.fromCharCode.apply(null,new Uint8Array(t));throw new Error("Entrada inválida para leitura de texto OFX")}function g(t){if(!t)return null;const e=String(t).match(/(\d{4})(\d{2})(\d{2})/);if(!e)return null;const[i,o,s,n]=e,a=Number(o),c=Number(s)-1,l=Number(n);return new Date(a,c,l).toISOString().split("T")[0]}function N(t){if(t==null)return 0;const e=Number(String(t).replace(",","."));return isNaN(e)?0:e}function r(t,e){const i=new RegExp(`<${e}>([^\r
<]*)`,"i"),o=t.match(i);if(o)return o[1].trim();const s=new RegExp(`<${e}>([sS]*?)</${e}>`,"i"),n=t.match(s);return n?n[1].trim():""}function x(t){const e=/<STMTTRN>([\s\S]*?)<\/STMTTRN>/gi,i=[];let o;for(;(o=e.exec(t))!==null;)i.push(o[1]);if(i.length)return i;const s=/<STMTTRN>[\s\S]*?(?=<STMTTRN>|<\/BANKTRANLIST>|<\/STMTRS>|$)/gi;return(t.match(s)||[]).map(a=>a.replace(/^<STMTTRN>/i,""))}function M(t){return/<OFX[>\s]/i.test(t)||/<OFX>/i.test(t)}function R(t){var s;if(!t||!M(t))throw new Error("Arquivo OFX inválido ou não reconhecido");t.toLowerCase();const e=((s=/\<banktranlist\>([\s\S]*?)\<\/banktranlist\>/i.exec(t))==null?void 0:s[1])||t;return x(e).map(n=>{const a=r(n,"TRNTYPE")||r(n,"trntype"),c=r(n,"DTPOSTED")||r(n,"dtposted")||r(n,"DTUSER"),l=r(n,"TRNAMT")||r(n,"trnamt"),u=r(n,"MEMO")||r(n,"memo")||r(n,"NAME"),T=r(n,"FITID")||r(n,"fitid"),f=g(c),m=N(l),p=(u||"").trim(),y=(a||"").toUpperCase();return{data:f,valor:m,descricao:p,tipo:y,identificador:T}}).filter(n=>n.data&&(n.valor||n.valor===0))}async function D(t){const e=await S(t);return R(e)}export{O as U,D as p};
