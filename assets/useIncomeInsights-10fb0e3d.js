import{e as O,g as q,r as H}from"./index-e054d3da.js";import{e as w,s as P,p as b}from"./index-a49341d7.js";import{r as N,t as B}from"./index-a53a69e9.js";import{d as T}from"./CompactPeriodFilter-2b2a5a53.js";const _=O("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),G=O("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function E(n,a){var s=n.getFullYear()-a.getFullYear()||n.getMonth()-a.getMonth()||n.getDate()-a.getDate()||n.getHours()-a.getHours()||n.getMinutes()-a.getMinutes()||n.getSeconds()-a.getSeconds()||n.getMilliseconds()-a.getMilliseconds();return s<0?-1:s>0?1:s}function k(n,a){N(2,arguments);var s=B(n),l=B(a),m=E(s,l),h=Math.abs(T(s,l));s.setDate(s.getDate()-m*h);var i=+(E(s,l)===-m),p=m*(h-i);return p===0?0:p}const J=()=>{const{incomes:n,expenses:a,investments:s,totalIncome:l,availableBalance:m}=q();return H.useMemo(()=>{const i=new Date,p=w(i),I=Math.max(1,k(p,i)),d=P(i),v=w(i),z=n.filter(t=>{const e=b(t.data);return e>=d&&e<=v}),F=a.filter(t=>{const e=b(t.data);return e>=d&&e<=v}),V=s.filter(t=>{const e=b(t.data);return e>=d&&e<=v}),o=z.reduce((t,e)=>t+e.valor,0),c=F.filter(t=>t.pago).reduce((t,e)=>t+e.valor,0),g=V.reduce((t,e)=>t+e.valor_aporte,0),u=o-c-g,M=u/I,f=o>0?g/o*100:0,D=c>0?o/c*100:o>0?100:0,S=k(i,d)+1,y=S>0?c/S:0,x=y>0?Math.ceil(u/y):1/0,j=u>o*.2,A=o<c+g,C=D>100,r=[];return A?r.push({type:"warning",message:"Suas receitas não cobrem seus gastos e investimentos. Considere aumentar a renda ou reduzir gastos.",action:"Revisar orçamento"}):C?r.push({type:"warning",message:"Você está gastando mais do que recebe. Atenção ao orçamento!",action:"Controlar gastos"}):f<10?r.push({type:"tip",message:"Sua taxa de poupança está baixa. Tente investir pelo menos 10% da sua renda.",action:"Aumentar investimentos"}):f>=20&&r.push({type:"success",message:"Excelente taxa de poupança! Você está no caminho certo para a independência financeira.",action:"Manter disciplina"}),u<0?r.push({type:"warning",message:"Saldo negativo! Você está gastando mais do que tem disponível.",action:"Revisar gastos urgentemente"}):u>0&&x<7&&r.push({type:"tip",message:"Seu saldo pode se esgotar em breve. Planeje suas próximas receitas.",action:"Planejar receitas"}),M>0&&M<50&&r.push({type:"tip",message:"Sua capacidade de gasto diário está baixa. Considere otimizar seu orçamento.",action:"Otimizar orçamento"}),{availableBalance:u,dailySpendingCapacity:M,incomeVsExpensesRatio:D,savingsRate:f,daysUntilBalanceZero:x===1/0?null:x,averageDailySpending:y,isBalanceHealthy:j,needsMoreIncome:A,isSpendingTooMuch:C,totalCurrentMonthIncome:o,totalCurrentMonthExpenses:c,totalCurrentMonthInvestments:g,daysRemaining:I,recommendations:r}},[n,a,s,l,m])};export{_ as A,G as L,k as d,J as u};
