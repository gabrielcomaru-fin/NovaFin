import{c as k,g as q,r as H}from"./index-9965e3b2.js";import{e as B,s as P,p as x}from"./index-a49341d7.js";import{r as N,t as E}from"./index-a53a69e9.js";import{f as T}from"./CompactHeader-3b1ef90b.js";const _=k("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function w(n,a){var s=n.getFullYear()-a.getFullYear()||n.getMonth()-a.getMonth()||n.getDate()-a.getDate()||n.getHours()-a.getHours()||n.getMinutes()-a.getMinutes()||n.getSeconds()-a.getSeconds()||n.getMilliseconds()-a.getMilliseconds();return s<0?-1:s>0?1:s}function O(n,a){N(2,arguments);var s=E(n),l=E(a),m=w(s,l),h=Math.abs(T(s,l));s.setDate(s.getDate()-m*h);var i=+(w(s,l)===-m),p=m*(h-i);return p===0?0:p}const G=()=>{const{incomes:n,expenses:a,investments:s,totalIncome:l,availableBalance:m}=q();return H.useMemo(()=>{const i=new Date,p=B(i),I=Math.max(1,O(p,i)),d=P(i),f=B(i),z=n.filter(t=>{const e=x(t.data);return e>=d&&e<=f}),F=a.filter(t=>{const e=x(t.data);return e>=d&&e<=f}),V=s.filter(t=>{const e=x(t.data);return e>=d&&e<=f}),o=z.reduce((t,e)=>t+e.valor,0),c=F.filter(t=>t.pago).reduce((t,e)=>t+e.valor,0),g=V.reduce((t,e)=>t+e.valor_aporte,0),u=o-c-g,v=u/I,M=o>0?g/o*100:0,D=c>0?o/c*100:o>0?100:0,S=O(i,d)+1,y=S>0?c/S:0,b=y>0?Math.ceil(u/y):1/0,j=u>o*.2,C=o<c+g,A=D>100,r=[];return C?r.push({type:"warning",message:"Suas receitas não cobrem seus gastos e investimentos. Considere aumentar a renda ou reduzir gastos.",action:"Revisar orçamento"}):A?r.push({type:"warning",message:"Você está gastando mais do que recebe. Atenção ao orçamento!",action:"Controlar gastos"}):M<10?r.push({type:"tip",message:"Sua taxa de poupança está baixa. Tente investir pelo menos 10% da sua renda.",action:"Aumentar investimentos"}):M>=20&&r.push({type:"success",message:"Excelente taxa de poupança! Você está no caminho certo para a independência financeira.",action:"Manter disciplina"}),u<0?r.push({type:"warning",message:"Saldo negativo! Você está gastando mais do que tem disponível.",action:"Revisar gastos urgentemente"}):u>0&&b<7&&r.push({type:"tip",message:"Seu saldo pode se esgotar em breve. Planeje suas próximas receitas.",action:"Planejar receitas"}),v>0&&v<50&&r.push({type:"tip",message:"Sua capacidade de gasto diário está baixa. Considere otimizar seu orçamento.",action:"Otimizar orçamento"}),{availableBalance:u,dailySpendingCapacity:v,incomeVsExpensesRatio:D,savingsRate:M,daysUntilBalanceZero:b===1/0?null:b,averageDailySpending:y,isBalanceHealthy:j,needsMoreIncome:C,isSpendingTooMuch:A,totalCurrentMonthIncome:o,totalCurrentMonthExpenses:c,totalCurrentMonthInvestments:g,daysRemaining:I,recommendations:r}},[n,a,s,l,m])};export{_ as L,G as u};
