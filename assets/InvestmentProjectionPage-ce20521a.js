import{c as $t,i as It,r as N,j as t,H as Bt,C as S,a as F,b as w,d as R,e as D,B as L,T as Lt,m as zt}from"./index-0f4f9cbc.js";import{L as f,C as J,I as V}from"./label-cb5d17e1.js";import{T as qt,a as Ot,b as jt,c as ft}from"./tabs-97a1f38e.js";import{f as Et}from"./index-65722b09.js";import{B as yt}from"./bar-chart-6a880829.js";import{P as Kt}from"./piggy-bank-2ba416dd.js";import{R as vt,T as bt,L as Mt}from"./generateCategoricalChart-71812082.js";import{A as At,L as Yt}from"./AreaChart-97dc207d.js";import{C as Ct,X as Nt,Y as St}from"./YAxis-c072bbe5.js";import{A as U}from"./Area-8590cddd.js";import"./index-a53a69e9.js";const Ft=$t("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function ae(){const{investments:H,accounts:tt,investmentGoal:et}=It(),at=N.useMemo(()=>!tt||tt.length===0?0:tt.reduce((e,a)=>e+(a.saldo||0),0),[tt]),nt=N.useMemo(()=>{if(!H||H.length===0)return 0;const e=H.reduce((r,m)=>{const x=new Date(m.data),l=Et(x,"yyyy-MM");return r[l]||(r[l]=[]),r[l].push(m.valor_aporte||0),r},{}),a=Object.keys(e);if(a.length===0)return 0;a.map(r=>e[r].reduce((m,x)=>m+x,0)).reduce((r,m)=>r+m,0)/a.length;const u=H.map(r=>r.valor_aporte||0);return u.reduce((r,m)=>r+m,0)/u.length,u.reduce((r,m)=>r+m,0)/a.length},[H]),[s,k]=N.useState({initialAmount:"0",monthlyContribution:"0",goalContribution:"0",annualRate:"10",volatilityAnnual:"12",inflationAnnual:"4",contributionGrowthAnnual:"0",years:"10",targetAmount:"",targetDate:""});N.useEffect(()=>{const e=a=>!a||a===0?"0":Number(a.toFixed(2)).toString();k(a=>({...a,initialAmount:e(at||0),monthlyContribution:e(nt||0),goalContribution:e(et||0)}))},[at,nt,et]);const[v,ot]=N.useState(null),[st,rt]=N.useState([]),[xt,it]=N.useState([]),[T,mt]=N.useState("moderado"),[E,ut]=N.useState(5),wt=e=>{let a=2166136261;for(let n=0;n<e.length;n++)a^=e.charCodeAt(n),a=Math.imul(a,16777619);return a>>>0},Rt=e=>{let a=e>>>0;return()=>{a+=1831565813;let n=Math.imul(a^a>>>15,1|a);return n^=n+Math.imul(n^n>>>7,61|n),((n^n>>>14)>>>0)/4294967296}},pt=e=>{const a=JSON.stringify({ia:e.initialAmount,mc:e.monthlyContribution,gc:e.goalContribution,ar:e.annualRate,vv:e.volatilityAnnual,iaa:e.inflationAnnual,cg:e.contributionGrowthAnnual,y:e.years,ta:e.targetAmount,td:e.targetDate});return Rt(wt(a))},W=(e,a)=>{k({...s,[a]:e})},y=e=>{if(typeof e=="number")return Number.isFinite(e)?e:0;if(typeof e!="string")return 0;const a=e.trim();if(a==="")return 0;const n=a.replace(/[^\d.,-]/g,""),u=n.includes(","),g=n.includes(".");let p=n;u&&g?p=n.replace(/\./g,"").replace(",","."):u&&!g?p=n.replace(",","."):p=n;const r=parseFloat(p);return isNaN(r)?0:r},Dt=()=>{const e=y(s.initialAmount),a=y(s.monthlyContribution),n=y(s.goalContribution),u=parseFloat(s.annualRate)/100,g=parseFloat(s.volatilityAnnual)/100,p=parseFloat(s.inflationAnnual)/100,r=parseFloat(s.contributionGrowthAnnual)/100,x=parseInt(s.years)*12,l=y(s.targetAmount)||0,j=s.targetDate?new Date(s.targetDate):null;if(isNaN(x)||x<=0){ot(null),rt([]),it([]);return}const b=Math.pow(1+u,1/12)-1,$=g/Math.sqrt(12),K=Math.pow(1+p,1/12)-1,Q=Math.pow(1+r,1/12)-1;let C=e,M=e,P=a,I=n;const Y=[];let X=0;for(let i=0;i<=x;i++)(i%12===0||i===x)&&Y.push({name:`Ano ${Math.floor(i/12)}`,"Projeção (Média)":parseFloat(C.toFixed(2)),"Projeção (Meta)":parseFloat(M.toFixed(2))}),i<x&&(C=C*(1+b)+P,M=M*(1+b)+I,P=P*(1+Q),I=I*(1+Q),X+=P);const lt=300,ct=pt(s),B=new Array(x+1).fill(0).map(()=>[]);for(let i=0;i<lt;i++){let o=e,c=a;for(let d=0;d<=x;d++)if(B[d]||(B[d]=[]),B[d].push(o),d<x){const h=Math.max(1e-12,ct()),A=ct(),O=Math.sqrt(-2*Math.log(h))*Math.cos(2*Math.PI*A),ht=b+$*O;o=o*(1+ht)+c,c=c*(1+Q)}}const G=(i,o)=>{if(i.length===0)return 0;const c=[...i].sort((h,A)=>h-A),d=Math.min(c.length-1,Math.max(0,Math.floor(o/100*(c.length-1))));return c[d]},Z=B.map((i,o)=>({name:o%12===0||o===x?`Ano ${Math.floor(o/12)}`:"",p10:G(i,10),p50:G(i,50),p90:G(i,90)})).filter(i=>i.name!=="");let dt=null,z=null;if(l>0&&j){const i=new Date,o=Math.max(0,Math.round((j.getFullYear()-i.getFullYear())*12+(j.getMonth()-i.getMonth())));z=Math.min(o,x);const d=B[z]||[],h=d.filter(A=>A>=l).length;dt=d.length>0?h/d.length:null}let q=null;if(l>0&&z!==null){const i=b,o=z,c=e*Math.pow(1+i,o),d=i===0?o:(Math.pow(1+i,o)-1)/i;q=Math.max(0,(l-c)/d)}const _=C>0?Math.min(100,Math.max(0,X/C*100)):0;ot({average:{total:C},goal:{total:M},probabilityToTarget:dt,requiredMonthlyContribution:q,monthlyInflation:K,composition:{contributionShare:_,growthShare:Math.max(0,100-_)}}),rt(Y),it(Z)},kt=e=>{const a=y(e.initialAmount),n=y(e.monthlyContribution),u=parseFloat(e.annualRate)/100,g=parseFloat(e.contributionGrowthAnnual)/100,r=parseInt(e.years)*12,m=Math.pow(1+u,1/12)-1,x=Math.pow(1+g,1/12)-1;let l=a,j=n,b=0;for(let K=0;K<r;K++)l=l*(1+m)+j,j=j*(1+x),b+=j;const $=l>0?Math.min(100,Math.max(0,b/l*100)):0;return{total:l,contributionShare:$}},Pt=e=>{const a=y(e.initialAmount),n=y(e.targetAmount)||0,u=parseFloat(e.annualRate)/100,p=parseInt(e.years)*12;if(!n||p<=0)return null;const r=Math.pow(1+u,1/12)-1,m=p,x=a*Math.pow(1+r,m),l=r===0?m:(Math.pow(1+r,m)-1)/r;return Math.max(0,(n-x)/l)},gt=()=>{const e={conservador:{rate:6,vol:8},moderado:{rate:10,vol:12},arrojado:{rate:14,vol:18}},{rate:a,vol:n}=e[T]||e.moderado,u=new Date;u.setFullYear(u.getFullYear()+E);const g=u.toISOString().split("T")[0],p=m=>!m||m===0?"0":Number(m.toFixed(2)).toString(),r={initialAmount:p(at||0),monthlyContribution:p(nt||0),goalContribution:p(et||0),annualRate:String(a),volatilityAnnual:String(n),inflationAnnual:s.inflationAnnual,contributionGrowthAnnual:s.contributionGrowthAnnual,years:String(E),targetAmount:s.targetAmount,targetDate:g};k(r),Gt(r)},Gt=e=>{const a=y(e.initialAmount),n=y(e.monthlyContribution),u=y(e.goalContribution),g=parseFloat(e.annualRate)/100,p=parseFloat(e.volatilityAnnual)/100,r=parseFloat(e.inflationAnnual)/100,m=parseFloat(e.contributionGrowthAnnual)/100,l=parseInt(e.years)*12,j=y(e.targetAmount)||0,b=e.targetDate?new Date(e.targetDate):null;if(isNaN(l)||l<=0){ot(null),rt([]),it([]);return}const $=Math.pow(1+g,1/12)-1,K=p/Math.sqrt(12),Q=Math.pow(1+r,1/12)-1,C=Math.pow(1+m,1/12)-1;let M=a,P=a,I=n,Y=u;const X=[];let lt=0;for(let o=0;o<=l;o++)(o%12===0||o===l)&&X.push({name:`Ano ${Math.floor(o/12)}`,"Projeção (Média)":parseFloat(M.toFixed(2)),"Projeção (Meta)":parseFloat(P.toFixed(2))}),o<l&&(M=M*(1+$)+I,P=P*(1+$)+Y,I=I*(1+C),Y=Y*(1+C),lt+=I);const ct=300,B=pt(e),G=new Array(l+1).fill(0).map(()=>[]);for(let o=0;o<ct;o++){let c=a,d=n;for(let h=0;h<=l;h++)if(G[h]||(G[h]=[]),G[h].push(c),h<l){const A=Math.max(1e-12,B()),O=B(),ht=Math.sqrt(-2*Math.log(A))*Math.cos(2*Math.PI*O),Tt=$+K*ht;c=c*(1+Tt)+d,d=d*(1+C)}}const Z=(o,c)=>{if(o.length===0)return 0;const d=[...o].sort((A,O)=>A-O),h=Math.min(d.length-1,Math.max(0,Math.floor(c/100*(d.length-1))));return d[h]},dt=G.map((o,c)=>({name:c%12===0||c===l?`Ano ${Math.floor(c/12)}`:"",p10:Z(o,10),p50:Z(o,50),p90:Z(o,90)})).filter(o=>o.name!=="");let z=null,q=null;if(j>0&&b){const o=new Date,c=Math.max(0,Math.round((b.getFullYear()-o.getFullYear())*12+(b.getMonth()-o.getMonth())));q=Math.min(c,l);const h=G[q]||[],A=h.filter(O=>O>=j).length;z=h.length>0?A/h.length:null}let _=null;if(j>0&&q!==null){const o=$,c=q,d=a*Math.pow(1+o,c),h=o===0?c:(Math.pow(1+o,c)-1)/o;_=Math.max(0,(j-d)/h)}const i=M>0?Math.min(100,Math.max(0,lt/M*100)):0;ot({average:{total:M},goal:{total:P},probabilityToTarget:z,requiredMonthlyContribution:_,monthlyInflation:Q,composition:{contributionShare:i,growthShare:Math.max(0,100-i)}}),rt(X),it(dt)};return N.useEffect(()=>{gt()},[T,E,at,nt,et]),t.jsxs(t.Fragment,{children:[t.jsxs(Bt,{children:[t.jsx("title",{children:"Projeção de Investimentos - Lumify"}),t.jsx("meta",{name:"description",content:"Simule o crescimento do seu patrimônio com base em suas metas e rendimentos."})]}),t.jsxs("div",{className:"space-y-4 md:space-y-5 page-top",children:[t.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Projeção de Investimentos"}),t.jsxs(qt,{defaultValue:"simple",children:[t.jsxs(Ot,{className:"mb-2",children:[t.jsx(jt,{value:"simple",children:"Simples"}),t.jsx(jt,{value:"advanced",children:"Avançado"})]}),t.jsx(ft,{value:"simple",children:t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(Ft,{className:"text-primary"}),"Projeção Automática"]}),t.jsx(R,{children:"Usa seu histórico para preencher e simular automaticamente."})]}),t.jsxs(D,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 mb-3",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{children:"Perfil de Risco"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(L,{variant:T==="conservador"?"default":"secondary",onClick:()=>mt("conservador"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold",children:"Conservador"}),t.jsx("div",{className:"text-xs opacity-75",children:"6% a.a."})]})}),t.jsx(L,{variant:T==="moderado"?"default":"secondary",onClick:()=>mt("moderado"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold",children:"Moderado"}),t.jsx("div",{className:"text-xs opacity-75",children:"10% a.a."})]})}),t.jsx(L,{variant:T==="arrojado"?"default":"secondary",onClick:()=>mt("arrojado"),children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"font-semibold",children:"Arrojado"}),t.jsx("div",{className:"text-xs opacity-75",children:"14% a.a."})]})})]}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:[T==="conservador"&&"Renda fixa, CDB, Tesouro. Menor risco, retorno mais previsível.",T==="moderado"&&"Mistura de renda fixa e variável. Equilíbrio entre risco e retorno.",T==="arrojado"&&"Mais ações, fundos de ações. Maior potencial, mais volatilidade."]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{children:"Horizonte"}),t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(L,{variant:E===3?"default":"secondary",onClick:()=>ut(3),children:"3 anos"}),t.jsx(L,{variant:E===5?"default":"secondary",onClick:()=>ut(5),children:"5 anos"}),t.jsx(L,{variant:E===10?"default":"secondary",onClick:()=>ut(10),children:"10 anos"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"targetAmountSimple",children:"Meta (opcional)"}),t.jsx(J,{id:"targetAmountSimple",value:s.targetAmount,onChange:e=>W(e,"targetAmount")})]})]}),t.jsx("div",{className:"mb-4",children:t.jsx(L,{onClick:gt,className:"w-full",children:"Atualizar Projeção"})}),v&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 md:gap-4 mt-4 md:mt-5",children:[t.jsxs(S,{children:[t.jsxs(F,{className:"pb-2",children:[t.jsx(w,{className:"text-sm font-medium",children:"Patrimônio estimado no fim"}),t.jsx(R,{children:"Com base no seu histórico"})]}),t.jsx(D,{children:t.jsxs("div",{className:"text-2xl font-bold",children:["R$ ",v.average.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})})]}),t.jsxs(S,{children:[t.jsxs(F,{className:"pb-2",children:[t.jsx(w,{className:"text-sm font-medium",children:"Composição: Aportes vs Rendimentos"}),t.jsx(R,{children:"Quanto vem de disciplina x juros"})]}),t.jsxs(D,{children:[t.jsx("div",{className:"w-full h-3 bg-muted rounded overflow-hidden",children:t.jsx("div",{className:"h-full bg-primary",style:{width:`${Math.round(v.composition.contributionShare)}%`}})}),t.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[Math.round(v.composition.contributionShare),"% aportes • ",Math.round(v.composition.growthShare),"% rendimentos"]})]})]}),t.jsxs(S,{children:[t.jsxs(F,{className:"pb-2",children:[t.jsx(w,{className:"text-sm font-medium",children:"Probabilidade de atingir a meta"}),t.jsx(R,{children:"Se você definiu meta e data"})]}),t.jsxs(D,{children:[t.jsx("div",{className:"text-2xl font-bold",children:v.probabilityToTarget===null?"-":`${Math.round(v.probabilityToTarget*100)}%`}),t.jsx("p",{className:"text-xs text-muted-foreground",children:"Dica: aumentar um pouco o aporte eleva muito a chance."})]})]})]}),st.length>0&&t.jsxs("div",{className:"mt-4 md:mt-5",children:[t.jsxs("div",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[t.jsx(Lt,{className:"h-5 w-5 text-primary"}),"Marcos por ano"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:st.map((e,a)=>t.jsxs(S,{className:"relative overflow-hidden",children:[t.jsxs(F,{className:"pb-2",children:[t.jsx(w,{className:"text-lg font-bold text-primary",children:e.name}),t.jsx(R,{children:a===0?"Situação atual":a===1?"Primeiro ano":a===2?"Segundo ano":`Ano ${a}`})]}),t.jsx(D,{children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Cenário Média"}),t.jsxs("span",{className:"font-bold text-lg",children:["R$ ",e["Projeção (Média)"].toLocaleString("pt-BR",{minimumFractionDigits:0})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Cenário Meta"}),t.jsxs("span",{className:"font-bold text-lg text-primary",children:["R$ ",e["Projeção (Meta)"].toLocaleString("pt-BR",{minimumFractionDigits:0})]})]}),a>0&&t.jsx("div",{className:"pt-2 border-t",children:t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Diferença: R$ ",(e["Projeção (Meta)"]-e["Projeção (Média)"]).toLocaleString("pt-BR",{minimumFractionDigits:0})]})})]})})]},e.name))})]}),v&&t.jsx("div",{className:"mt-6 text-sm text-muted-foreground",children:v.requiredMonthlyContribution!==null?t.jsxs("div",{children:["Para alcançar sua meta no prazo, um aporte de cerca de ",t.jsxs("span",{className:"font-medium",children:["R$ ",v.requiredMonthlyContribution.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/mês"]})," seria suficiente (assumindo as premissas)."]}):t.jsx("div",{children:"Defina uma meta e data-alvo para receber uma sugestão prática de aporte mensal."})})]})]})}),t.jsx(ft,{value:"advanced",children:t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(Ft,{className:"text-primary"}),"Simulador de Patrimônio (Pressupostos)"]}),t.jsx(R,{children:"Defina premissas e projete seu patrimônio com bandas de incerteza."})]}),t.jsxs(D,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 mb-4 md:mb-5",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"initialAmount",children:"Patrimônio Inicial (R$)"}),t.jsx(J,{id:"initialAmount",value:s.initialAmount,onChange:e=>W(e,"initialAmount")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"annualRate",children:"Rendimento Anual (%)"}),t.jsx(V,{id:"annualRate",type:"number",value:s.annualRate,onChange:e=>k({...s,annualRate:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"volatilityAnnual",children:"Volatilidade Anual (%)"}),t.jsx(V,{id:"volatilityAnnual",type:"number",value:s.volatilityAnnual,onChange:e=>k({...s,volatilityAnnual:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"years",children:"Período (anos)"}),t.jsx(V,{id:"years",type:"number",value:s.years,onChange:e=>k({...s,years:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"inflationAnnual",children:"Inflação Anual (%)"}),t.jsx(V,{id:"inflationAnnual",type:"number",value:s.inflationAnnual,onChange:e=>k({...s,inflationAnnual:e.target.value})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"contributionGrowthAnnual",children:"Crescimento do Aporte (% a.a.)"}),t.jsx(V,{id:"contributionGrowthAnnual",type:"number",value:s.contributionGrowthAnnual,onChange:e=>k({...s,contributionGrowthAnnual:e.target.value})})]}),t.jsxs("div",{className:"space-y-2 md:col-span-2 lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"monthlyContribution",children:"Aporte Mensal (Média Atual)"}),t.jsx(J,{id:"monthlyContribution",value:s.monthlyContribution,onChange:e=>W(e,"monthlyContribution")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"goalContribution",children:"Aporte Mensal (Meta)"}),t.jsx(J,{id:"goalContribution",value:s.goalContribution,onChange:e=>W(e,"goalContribution")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"targetAmount",children:"Meta de Patrimônio (R$)"}),t.jsx(J,{id:"targetAmount",value:s.targetAmount,onChange:e=>W(e,"targetAmount")})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(f,{htmlFor:"targetDate",children:"Data-Alvo"}),t.jsx(V,{id:"targetDate",type:"date",value:s.targetDate,onChange:e=>k({...s,targetDate:e.target.value})})]})]})]}),t.jsx(L,{onClick:Dt,className:"w-full",children:"Calcular Projeção Comparativa"})]})]})})]}),v&&t.jsxs(zt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4 md:space-y-5",children:[t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:[t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(yt,{className:"h-4 w-4"}),"Comparativo de Cenários"]}),t.jsx(R,{children:"Estimativa determinística ao fim do horizonte atual."})]}),t.jsx(D,{children:(()=>{const a=[{key:"conservador",label:"Conservador",rate:6,vol:8},{key:"moderado",label:"Moderado",rate:10,vol:12},{key:"arrojado",label:"Arrojado",rate:14,vol:18}].map(n=>{const u={...s,annualRate:String(n.rate),volatilityAnnual:String(n.vol)},g=kt(u);return{...n,total:g.total,contributionShare:g.contributionShare}});return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:a.map(n=>t.jsxs("div",{className:"p-3 rounded border",children:[t.jsx("div",{className:"text-sm text-muted-foreground",children:n.label}),t.jsxs("div",{className:"text-xl font-bold",children:["R$ ",n.total.toLocaleString("pt-BR",{minimumFractionDigits:0})]}),t.jsx("div",{className:"mt-2 h-2 bg-muted rounded overflow-hidden",children:t.jsx("div",{className:"h-full bg-primary",style:{width:`${Math.round(n.contributionShare)}%`}})}),t.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[Math.round(n.contributionShare),"% aportes"]})]},n.key))})})()})]}),t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(Kt,{className:"h-4 w-4"}),"Sensibilidade de Aporte"]}),t.jsx(R,{children:"Quanto falta por mês para atingir sua meta no prazo."})]}),t.jsx(D,{children:(()=>{const e=Pt(s);if(e===null)return t.jsx("div",{className:"text-sm text-muted-foreground",children:"Defina uma meta (R$) e data-alvo para ver a sugestão de aporte."});const a=parseFloat(s.goalContribution||s.monthlyContribution||"0"),n=Math.max(0,e-a);return t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"text-2xl font-semibold",children:["R$ ",e.toLocaleString("pt-BR",{minimumFractionDigits:2})," / mês"]}),n>0?t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Faltam cerca de R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2}),"/mês para atingir sua meta no prazo."]}):t.jsx("div",{className:"text-sm text-muted-foreground",children:"Você já está no caminho para bater a meta com o aporte atual."})]})})()})]})]}),st.length>0&&t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(yt,{className:"text-primary"}),"Comparativo de Projeções"]}),t.jsx(R,{children:"Evolução do seu patrimônio: Meta vs. Média de Aportes e bandas (p10/p50/p90)."})]}),t.jsx(D,{children:t.jsx(vt,{width:"100%",height:350,children:t.jsxs(At,{data:st,children:[t.jsxs("defs",{children:[t.jsxs("linearGradient",{id:"colorGoal",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.8}),t.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]}),t.jsxs("linearGradient",{id:"colorAverage",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"hsl(var(--vibrant-accent))",stopOpacity:.7}),t.jsx("stop",{offset:"95%",stopColor:"hsl(var(--vibrant-accent))",stopOpacity:0})]}),t.jsxs("linearGradient",{id:"colorP50",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#22c55e",stopOpacity:.7}),t.jsx("stop",{offset:"95%",stopColor:"#22c55e",stopOpacity:0})]})]}),t.jsx(Ct,{strokeDasharray:"3 3",vertical:!1}),t.jsx(Nt,{dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),t.jsx(St,{tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:e=>`R$${e/1e3}k`}),t.jsx(bt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"},formatter:(e,a)=>[`R$ ${e.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,a]}),t.jsx(Mt,{}),t.jsx(U,{type:"monotone",dataKey:"Projeção (Meta)",stroke:"hsl(var(--primary))",fillOpacity:1,fill:"url(#colorGoal)"}),t.jsx(U,{type:"monotone",dataKey:"Projeção (Média)",stroke:"hsl(var(--vibrant-accent))",fillOpacity:1,fill:"url(#colorAverage)"})]})})})]}),xt.length>0&&t.jsxs(S,{children:[t.jsxs(F,{children:[t.jsxs(w,{className:"flex items-center gap-2",children:[t.jsx(Yt,{className:"text-primary"}),"Bandas de Projeção (Monte Carlo)"]}),t.jsx(R,{children:"Percentis p10/p50/p90 por ano."})]}),t.jsx(D,{children:t.jsx(vt,{width:"100%",height:350,children:t.jsxs(At,{data:xt,children:[t.jsx(Ct,{strokeDasharray:"3 3",vertical:!1}),t.jsx(Nt,{dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))",fontSize:12}}),t.jsx(St,{tick:{fill:"hsl(var(--muted-foreground))",fontSize:12},tickFormatter:e=>`R$${e/1e3}k`}),t.jsx(bt,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))"},formatter:(e,a)=>[`R$ ${e.toLocaleString("pt-BR",{minimumFractionDigits:2})}`,a]}),t.jsx(Mt,{}),t.jsx(U,{type:"monotone",dataKey:"p90",name:"p90 (otimista)",stroke:"#60a5fa",fill:"#60a5fa33"}),t.jsx(U,{type:"monotone",dataKey:"p50",name:"p50 (mediano)",stroke:"#22c55e",fill:"#22c55e33"}),t.jsx(U,{type:"monotone",dataKey:"p10",name:"p10 (pessimista)",stroke:"#f59e0b",fill:"#f59e0b33"})]})})})]})]})]})]})}export{ae as InvestmentProjectionPage};
