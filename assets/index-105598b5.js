import{e as Be,f as at,r as H,j as e,A as je,B as fe,C as _e,d as Oe,D as be,X as ot,p as it}from"./index-e054d3da.js";import{D as st,b as lt,c as ct,d as ut,f as dt}from"./dialog-e2414073.js";import{S as oe,a as ie,b as se,c as le,d as ne}from"./select-127d756a.js";import{P as ft}from"./progress-22404871.js";import{U as pt,p as mt}from"./ofx-a22ad8b9.js";import{F as ht}from"./smartphone-5222ac50.js";import{C as vt}from"./CompactPeriodFilter-2b2a5a53.js";import{C as Le}from"./check-circle-2-a27e51b8.js";const xt=Be("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),Pe=Be("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);function kt({isOpen:we,onOpenChange:ge,type:ce="expense",categories:T=[],paymentMethods:s=[],institutions:o=[],existingTransactions:d=[],onImport:f,onUndoImport:p,onClose:v}){var Ce,Ae;const{toast:h}=at(),y=H.useRef(null),[w,_]=H.useState("upload"),[P,S]=H.useState(!1),[a,n]=H.useState(!1),[m,r]=H.useState([]),[t,c]=H.useState({}),[g,b]=H.useState({}),[N,R]=H.useState({}),[Y,M]=H.useState({}),[Q,J]=H.useState({}),[K,re]=H.useState(""),[F,k]=H.useState(""),[X,D]=H.useState(""),[Z,de]=H.useState(!1),[u,j]=H.useState([]),[q,I]=H.useState({}),[C,z]=H.useState(0),[E,L]=H.useState(0),[W,V]=H.useState(0),[ee,pe]=H.useState(0),[ye,Ne]=H.useState([]),[Me,Te]=H.useState(!1),[he,De]=H.useState(""),U=H.useMemo(()=>{const i={expense:{title:"Importar Despesas do OFX",filterFn:l=>l.valor<0||String(l.tipo).toUpperCase()==="DEBIT",transformValue:l=>Math.abs(l),defaultDescription:"Lan√ßamento OFX",emptyMessage:"Nenhuma despesa encontrada no OFX",emptyDescription:"Verifique se o arquivo cont√©m lan√ßamentos de sa√≠da.",showPaymentMethods:!0,showInstitutions:!1,showPaidCheckbox:!0,valueColor:"text-red-600",icon:e.jsx(be,{className:"h-5 w-5 text-red-600"})},income:{title:"Importar Receitas do OFX",filterFn:l=>l.valor>0||String(l.tipo).toUpperCase()==="CREDIT",transformValue:l=>Math.abs(l),defaultDescription:"Receita OFX",emptyMessage:"Nenhuma receita encontrada no OFX",emptyDescription:"Verifique se o arquivo cont√©m lan√ßamentos de entrada.",showPaymentMethods:!1,showInstitutions:!1,showPaidCheckbox:!1,valueColor:"text-green-600",icon:e.jsx(be,{className:"h-5 w-5 text-green-600"})},investment:{title:"Importar Aportes do OFX",filterFn:l=>l.valor<0||String(l.tipo).toUpperCase()==="DEBIT",transformValue:l=>Math.abs(l),defaultDescription:"Aporte OFX",emptyMessage:"Nenhum aporte encontrado no OFX",emptyDescription:"Verifique se o arquivo cont√©m lan√ßamentos de sa√≠da relacionados a investimentos.",showPaymentMethods:!1,showInstitutions:!0,showPaidCheckbox:!1,valueColor:"text-blue-600",icon:e.jsx(be,{className:"h-5 w-5 text-blue-600"})}};return i[ce]||i.expense},[ce]),me=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),Xe=H.useCallback(i=>{if(!i||!d.length)return"";const l=i.toLowerCase().trim(),O=d.find(A=>{const x=(A.descricao||"").toLowerCase().trim();return x===l||x.includes(l)||l.includes(x)});return(O==null?void 0:O.categoria_id)||""},[d]),qe=H.useCallback(i=>{const l=[];return i.forEach((O,A)=>{var G;const x=O.data,B=((G=O.descricao)==null?void 0:G.toLowerCase().trim())||"",te=Number(O.valor)||0,$=d.find(ae=>{var Fe;const ue=ae.data,ke=((Fe=ae.descricao)==null?void 0:Fe.toLowerCase().trim())||"",rt=Number(ae.valor||ae.valor_aporte)||0;return ue===x&&ke===B&&Math.abs(rt-Math.abs(te))<.01});$&&l.push({ofxIndex:A,ofxTransaction:O,existingTransaction:$})}),l},[d]),ze=i=>{i.preventDefault(),i.stopPropagation(),S(!0)},We=i=>{i.preventDefault(),i.stopPropagation(),S(!1)},Ue=i=>{i.preventDefault(),i.stopPropagation()},Ve=async i=>{i.preventDefault(),i.stopPropagation(),S(!1);const l=i.dataTransfer.files;l&&l.length>0&&await Ee(Array.from(l))},He=async i=>{const l=i.target.files;l&&l.length>0&&await Ee(Array.from(l)),i.target&&(i.target.value="")},Ee=async i=>{if(!i||i.length===0)return;console.log("[OFX Import] Iniciando processamento de",i.length,"arquivo(s)"),n(!0);const l=[],O=[];try{for(const $ of i){console.log("[OFX Import] Processando arquivo:",$.name,"Tamanho:",$.size,"bytes");try{const G=await mt($);console.log("[OFX Import] Transa√ß√µes encontradas no arquivo:",G.length);const ae=G.filter(U.filterFn).map(ue=>({...ue,valor:U.transformValue(ue.valor),sourceFile:$.name}));console.log("[OFX Import] Transa√ß√µes ap√≥s filtro (",ce,"):",ae.length),l.push(...ae)}catch(G){console.error("[OFX Import] Erro ao processar arquivo:",$.name,G),O.push(`${$.name}: ${(G==null?void 0:G.message)||"Erro desconhecido"}`)}}if(console.log("[OFX Import] Total de transa√ß√µes:",l.length,"Erros:",O.length),l.length===0){const $=O.length>0?`Erros: ${O.join(", ")}`:U.emptyDescription;console.warn("[OFX Import] Nenhuma transa√ß√£o encontrada:",$),h({title:U.emptyMessage,description:$,variant:"destructive"});return}O.length>0&&h({title:"Alguns arquivos tiveram erros",description:O.join("; "),variant:"destructive"});const A=qe(l);j(A),I({}),r(l);const x={};l.forEach(($,G)=>{x[G]=!0}),c(x);const B={},te={};l.forEach(($,G)=>{B[G]=$.descricao||U.defaultDescription;const ae=Xe($.descricao);ae&&(te[G]=ae)}),b(B),R(te),M({}),J({}),A.length>0?_("duplicates"):_("review")}catch(A){h({title:"Falha ao processar arquivos",description:(A==null?void 0:A.message)||"Erro desconhecido.",variant:"destructive"})}finally{n(!1)}},Ie=i=>{c(l=>({...l,[i]:!l[i]}))},Ge=()=>{const i={};m.forEach((l,O)=>{i[O]=!0}),c(i)},Ye=()=>{c({})},Re=(i,l)=>{I(O=>({...O,[i]:l}))},Qe=()=>{const i={};u.forEach(l=>{i[l.ofxIndex]="skip"}),I(i)},Je=()=>{const i={};u.forEach(l=>{i[l.ofxIndex]="import"}),I(i)},Ke=()=>{const i=[],l={},O={},A={},x={},B={};m.forEach((te,$)=>{const G=u.some(ke=>ke.ofxIndex===$),ae=q[$];if(G&&ae==="skip")return;const ue=i.length;i.push(te),g[$]!=null&&(l[ue]=g[$]),N[$]!=null&&(O[ue]=N[$]),Y[$]!=null&&(A[ue]=Y[$]),Q[$]!=null&&(x[ue]=Q[$]),B[ue]=t[$]??!0}),r(i),b(l),R(O),M(A),J(x),c(B),j([]),I({}),i.length>0?_("review"):(h({title:"Nenhuma transa√ß√£o para importar",description:"Todas as transa√ß√µes foram ignoradas."}),ve())},Ze=async()=>{var O;if(!m.some((A,x)=>t[x]&&(N[x]||K))){h({title:"Selecione uma categoria",description:"Defina ao menos a categoria padr√£o ou por item.",variant:"destructive"});return}if(U.showInstitutions&&!m.some((x,B)=>t[B]&&(Q[B]||X))){h({title:"Selecione uma institui√ß√£o",description:"Defina ao menos a institui√ß√£o padr√£o ou por item.",variant:"destructive"});return}_("importing"),z(0),L(0),V(0),pe(0),Ne([]);const l=[];m.forEach((A,x)=>{if(!t[x])return;const B=N[x]||K;if(!B)return;const te={descricao:g[x]??A.descricao??U.defaultDescription,categoria_id:B,data:A.data||new Date().toISOString().split("T")[0]};ce==="investment"?te.valor_aporte=Number(A.valor)||0:te.valor=Number(A.valor)||0,U.showPaymentMethods&&(te.meio_pagamento_id=Y[x]||F||null,te.pago=Z,te.recorrente=!1),U.showInstitutions&&(te.instituicao_id=Q[x]||X),l.push(te)});try{let A=0,x=0;const B=[];for(let $=0;$<l.length;$++){try{const G=await f([l[$]]);G&&Array.isArray(G)&&((O=G[0])!=null&&O.id)?B.push(G[0].id):G!=null&&G.id&&B.push(G.id),A++}catch{x++}z(Math.round(($+1)/l.length*100)),L(A),pe(x)}Ne(B),_("complete");const te=m.length-l.length;V(te)}catch(A){h({title:"Erro na importa√ß√£o",description:(A==null?void 0:A.message)||"Tente novamente.",variant:"destructive"}),_("review")}},et=async()=>{if(!(!p||ye.length===0)){Te(!0);try{await p(ye),h({title:"Importa√ß√£o desfeita",description:`${ye.length} transa√ß√µes removidas com sucesso.`}),ve()}catch(i){h({title:"Erro ao desfazer",description:(i==null?void 0:i.message)||"Tente novamente.",variant:"destructive"})}finally{Te(!1)}}},ve=()=>{_("upload"),r([]),c({}),b({}),R({}),M({}),J({}),re(""),k(""),D(""),de(!1),j([]),I({}),z(0),L(0),V(0),pe(0),De(""),S(!1),n(!1),Ne([]),Te(!1),v==null||v(),ge==null||ge(!1)},tt=H.useMemo(()=>{if(!he)return m.map((l,O)=>({...l,originalIndex:O}));const i=he.toLowerCase();return m.map((l,O)=>({...l,originalIndex:O})).filter(l=>(g[l.originalIndex]||l.descricao||"").toLowerCase().includes(i)||String(l.valor).includes(he))},[m,g,he]),xe=Object.values(t).filter(Boolean).length,Se=m.reduce((i,l,O)=>t[O]?i+(Number(l.valor)||0):i,0),nt=i=>u.some(l=>l.ofxIndex===i);return e.jsx(st,{open:we,onOpenChange:i=>!i&&ve(),children:e.jsxs(lt,{className:"sm:max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsx(ct,{children:e.jsxs(ut,{className:"flex items-center gap-2",children:[U.icon,U.title]})}),w==="upload"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-6",children:[e.jsx("input",{ref:y,type:"file",accept:".ofx,.qfx,.ofc,.xml,.txt",multiple:!0,className:"hidden",onChange:He}),e.jsx("div",{className:`
                w-full max-w-md p-8 border-2 border-dashed rounded-xl transition-all duration-300 cursor-pointer
                flex flex-col items-center justify-center gap-4
                ${P?"border-primary bg-primary/10 scale-105":"border-muted-foreground/30 hover:border-primary/50 hover:bg-muted/50"}
                ${a?"opacity-50 pointer-events-none":""}
              `,onDragEnter:ze,onDragLeave:We,onDragOver:Ue,onDrop:Ve,onClick:()=>{var i;return(i=y.current)==null?void 0:i.click()},children:a?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-12 w-12 text-primary animate-spin"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Processando arquivo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-primary/10 rounded-full",children:e.jsx(pt,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium",children:P?"Solte o(s) arquivo(s) aqui":"Arraste arquivo(s) OFX"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"ou clique para selecionar (m√∫ltiplos arquivos suportados)"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsx("span",{children:"Formatos: .ofx, .qfx, .ofc, .xml, .txt"})]})]})})]}),w==="duplicates"&&e.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsx(je,{className:"h-5 w-5 text-yellow-600 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["Foram encontradas ",e.jsx("strong",{children:u.length})," transa√ß√£o(√µes) que podem ser duplicatas. Escolha o que fazer com cada uma."]})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 p-3 bg-muted/50 text-xs font-medium text-muted-foreground border-b sticky top-0",children:[e.jsx("div",{className:"col-span-3",children:"Descri√ß√£o OFX"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-3",children:"Existente"}),e.jsx("div",{className:"col-span-2",children:"A√ß√£o"})]}),u.map(i=>e.jsxs("div",{className:"p-3 border-b last:border-b-0 bg-yellow-50/50 dark:bg-yellow-900/10",children:[e.jsxs("div",{className:"md:hidden space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:i.ofxTransaction.descricao}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.ofxTransaction.data})]}),e.jsx("span",{className:`font-bold ${U.valueColor}`,children:me.format(Number(i.ofxTransaction.valor)||0)})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Existente: ",i.existingTransaction.descricao]}),e.jsxs(oe,{value:q[i.ofxIndex]||void 0,onValueChange:l=>Re(i.ofxIndex,l),children:[e.jsx(ie,{className:"w-full",children:e.jsx(se,{placeholder:"Escolher a√ß√£o"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"import",children:"Importar mesmo assim"}),e.jsx(ne,{value:"skip",children:"Ignorar (√© duplicata)"})]})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-3 text-sm truncate",title:i.ofxTransaction.descricao,children:i.ofxTransaction.descricao}),e.jsx("div",{className:"col-span-2 text-xs",children:i.ofxTransaction.data}),e.jsx("div",{className:`col-span-2 text-right font-medium ${U.valueColor}`,children:me.format(Number(i.ofxTransaction.valor)||0)}),e.jsx("div",{className:"col-span-3 text-xs text-muted-foreground truncate",title:i.existingTransaction.descricao,children:i.existingTransaction.descricao}),e.jsx("div",{className:"col-span-2",children:e.jsxs(oe,{value:q[i.ofxIndex]||void 0,onValueChange:l=>Re(i.ofxIndex,l),children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Escolher"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"import",children:"Importar"}),e.jsx(ne,{value:"skip",children:"Ignorar"})]})]})})]})]},i.ofxIndex))]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(fe,{variant:"outline",size:"sm",onClick:Qe,children:"Ignorar Todas"}),e.jsx(fe,{variant:"outline",size:"sm",onClick:Je,children:"Importar Todas"}),e.jsx("div",{className:"flex-1"}),e.jsx(fe,{onClick:Ke,children:"Prosseguir"})]})]}),w==="review"&&e.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(_e,{children:e.jsxs(Oe,{className:"p-3 flex items-center gap-3",children:[e.jsx(xt,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecionados"}),e.jsxs("p",{className:"text-lg font-bold",children:[xe,"/",m.length]})]})]})}),e.jsx(_e,{children:e.jsxs(Oe,{className:"p-3 flex items-center gap-3",children:[U.icon,e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total"}),e.jsx("p",{className:`text-lg font-bold ${U.valueColor}`,children:me.format(Se)})]})]})}),e.jsx(_e,{className:"col-span-2",children:e.jsxs(Oe,{className:"p-3 flex items-center gap-3",children:[e.jsx(vt,{className:"h-8 w-8 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Per√≠odo"}),e.jsx("p",{className:"text-sm font-medium",children:m.length>0?`${(Ce=m[m.length-1])==null?void 0:Ce.data} a ${(Ae=m[0])==null?void 0:Ae.data}`:"-"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Categoria padr√£o"}),e.jsxs(oe,{value:K||void 0,onValueChange:re,children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione uma categoria"})}),e.jsx(le,{children:T.map(i=>e.jsx(ne,{value:String(i.id),children:i.nome},i.id))})]})]}),U.showPaymentMethods&&s.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Meio de pagamento"}),e.jsxs(oe,{value:F||void 0,onValueChange:i=>k(i==="none"?"":i),children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"N√£o especificado"}),s.map(i=>e.jsx(ne,{value:String(i.id),children:i.nome},i.id))]})]})]}),U.showInstitutions&&o.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Institui√ß√£o"}),e.jsxs(oe,{value:X||void 0,onValueChange:D,children:[e.jsx(ie,{className:"w-full mt-1",children:e.jsx(se,{placeholder:"Selecione"})}),e.jsx(le,{children:o.map(i=>e.jsx(ne,{value:String(i.id),children:i.nome},i.id))})]})]}),U.showPaidCheckbox&&e.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[e.jsx("input",{id:"markAsPaid",type:"checkbox",className:"rounded accent-primary h-4 w-4",checked:Z,onChange:i=>de(i.target.checked)}),e.jsx("label",{htmlFor:"markAsPaid",className:"text-sm",children:"Marcar como pago"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Buscar por descri√ß√£o ou valor...",className:"flex-1 min-w-[200px] px-3 py-2 border rounded-md text-sm",value:he,onChange:i=>De(i.target.value)}),e.jsx(fe,{variant:"outline",size:"sm",onClick:Ge,children:"Selecionar Todas"}),e.jsx(fe,{variant:"outline",size:"sm",onClick:Ye,children:"Desmarcar Todas"})]}),e.jsxs("div",{className:"flex-1 overflow-auto border rounded-lg",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 p-3 bg-muted/50 text-xs font-medium text-muted-foreground border-b sticky top-0 z-10",children:[e.jsx("div",{className:"col-span-1 text-center",children:"‚úì"}),e.jsx("div",{className:"col-span-3",children:"Descri√ß√£o"}),e.jsx("div",{className:"col-span-2",children:"Data"}),e.jsx("div",{className:"col-span-2 text-right",children:"Valor"}),e.jsx("div",{className:"col-span-2",children:"Categoria"}),e.jsx("div",{className:"col-span-2",children:U.showPaymentMethods?"Pagamento":U.showInstitutions?"Institui√ß√£o":""})]}),tt.map(i=>{const l=i.originalIndex,O=t[l],A=nt(l);return e.jsxs("div",{className:`
                      p-3 border-b last:border-b-0 transition-colors
                      ${O?"bg-white dark:bg-background":"bg-muted/30 opacity-60"}
                      ${A?"border-l-4 border-l-yellow-500":""}
                    `,children:[e.jsxs("div",{className:"md:hidden space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:()=>Ie(l),className:"mt-1 h-4 w-4 rounded accent-primary"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",value:g[l]??i.descricao??U.defaultDescription,onChange:x=>b(B=>({...B,[l]:x.target.value})),disabled:!O}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:i.data}),e.jsx("span",{className:`font-bold ${U.valueColor}`,children:me.format(Number(i.valor)||0)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-7",children:[e.jsxs(oe,{value:N[l]||K||void 0,onValueChange:x=>R(B=>({...B,[l]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Categoria"})}),e.jsx(le,{children:T.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]}),U.showPaymentMethods&&e.jsxs(oe,{value:Y[l]||F||void 0,onValueChange:x=>M(B=>({...B,[l]:x==="none"?"":x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Pagamento"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"N√£o especificado"}),s.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))]})]}),U.showInstitutions&&e.jsxs(oe,{value:Q[l]||X||void 0,onValueChange:x=>J(B=>({...B,[l]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8 text-xs",children:e.jsx(se,{placeholder:"Institui√ß√£o"})}),e.jsx(le,{children:o.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})]}),A&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600 pl-7",children:[e.jsx(je,{className:"h-3 w-3"}),e.jsx("span",{children:"Poss√≠vel duplicata"})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-2 items-center",children:[e.jsx("div",{className:"col-span-1 flex justify-center",children:e.jsx("input",{type:"checkbox",checked:O,onChange:()=>Ie(l),className:"h-4 w-4 rounded accent-primary"})}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("input",{className:"w-full px-2 py-1 border rounded text-sm",value:g[l]??i.descricao??U.defaultDescription,onChange:x=>b(B=>({...B,[l]:x.target.value})),disabled:!O}),A&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-yellow-600 mt-1",children:[e.jsx(je,{className:"h-3 w-3"}),e.jsx("span",{children:"Poss√≠vel duplicata"})]})]}),e.jsx("div",{className:"col-span-2 text-xs",children:i.data}),e.jsx("div",{className:`col-span-2 text-right font-medium ${U.valueColor}`,children:me.format(Number(i.valor)||0)}),e.jsx("div",{className:"col-span-2",children:e.jsxs(oe,{value:N[l]||K||void 0,onValueChange:x=>R(B=>({...B,[l]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Categoria"})}),e.jsx(le,{children:T.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})}),e.jsxs("div",{className:"col-span-2",children:[U.showPaymentMethods&&e.jsxs(oe,{value:Y[l]||F||void 0,onValueChange:x=>M(B=>({...B,[l]:x==="none"?"":x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Pagamento"})}),e.jsxs(le,{children:[e.jsx(ne,{value:"none",children:"N√£o especificado"}),s.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))]})]}),U.showInstitutions&&e.jsxs(oe,{value:Q[l]||X||void 0,onValueChange:x=>J(B=>({...B,[l]:x})),disabled:!O,children:[e.jsx(ie,{className:"w-full h-8",children:e.jsx(se,{placeholder:"Institui√ß√£o"})}),e.jsx(le,{children:o.map(x=>e.jsx(ne,{value:String(x.id),children:x.nome},x.id))})]})]})]})]},l)})]}),e.jsxs(dt,{className:"gap-2",children:[e.jsx(fe,{variant:"ghost",onClick:ve,children:"Cancelar"}),e.jsxs(fe,{onClick:Ze,disabled:xe===0,children:["Importar ",xe," ",xe===1?"item":"itens"]})]})]}),w==="importing"&&e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-6 p-6",children:[e.jsx(Pe,{className:"h-12 w-12 text-primary animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-lg",children:"Importando transa√ß√µes..."}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[E," de ",xe," processados"]})]}),e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(ft,{value:C,className:"h-3"}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-2",children:[C,"%"]})]})]}),w==="complete"&&e.jsxs("div",{className:"flex-1 flex flex-col gap-6 p-6 overflow-auto",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Le,{className:"h-12 w-12 text-green-600"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-lg",children:"Importa√ß√£o conclu√≠da!"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[E," transa√ß√µes importadas com sucesso"]})]})]}),e.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-4",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(be,{className:"h-4 w-4 text-primary"}),"Resumo da Importa√ß√£o"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total importado"}),e.jsx("p",{className:`text-lg font-bold ${U.valueColor}`,children:me.format(Se)})]}),e.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Transa√ß√µes"}),e.jsx("p",{className:"text-lg font-bold",children:E})]}),e.jsxs("div",{className:"bg-background rounded-lg p-3 border",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Valor m√©dio"}),e.jsx("p",{className:"text-lg font-bold",children:me.format(E>0?Se/E:0)})]})]}),(()=>{const i=m.filter((O,A)=>t[A]&&!N[A]&&K).length,l=Object.values(N).filter(Boolean).length;return e.jsxs("div",{className:"space-y-2",children:[l>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-success",children:[e.jsx(Le,{className:"h-4 w-4"}),e.jsxs("span",{children:[l," transa√ß√µes com categoria sugerida automaticamente"]})]}),i>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-warning",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsxs("span",{children:[i," transa√ß√µes usaram a categoria padr√£o"]})]})]})})(),e.jsx("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"üí°"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-primary",children:"Dica:"}),e.jsxs("p",{className:"text-muted-foreground mt-1",children:[ce==="expense"&&"Revise suas despesas e marque as recorrentes. Isso ajuda a prever gastos futuros!",ce==="income"&&"Identifique suas fontes de renda principais para um melhor planejamento.",ce==="investment"&&"Acompanhe seus aportes mensais para manter a consist√™ncia nos investimentos!"]})]})]})}),W>0&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[W," transa√ß√µes n√£o foram selecionadas para importa√ß√£o"]}),ee>0&&e.jsxs("p",{className:"text-xs text-red-600",children:[ee," transa√ß√µes tiveram erro durante a importa√ß√£o"]})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[p&&ye.length>0&&e.jsx(fe,{variant:"outline",onClick:et,disabled:Me,className:"flex items-center gap-2",children:Me?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 animate-spin"}),"Desfazendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ot,{className:"h-4 w-4"}),"Desfazer Importa√ß√£o"]})}),e.jsx(fe,{onClick:ve,children:"Concluir"})]})]})]})})}var $e={exports:{}};(function(we,ge){(function(T,s){we.exports=s(H)})(it,function(ce){return function(T){var s={};function o(d){if(s[d])return s[d].exports;var f=s[d]={i:d,l:!1,exports:{}};return T[d].call(f.exports,f,f.exports,o),f.l=!0,f.exports}return o.m=T,o.c=s,o.d=function(d,f,p){o.o(d,f)||Object.defineProperty(d,f,{configurable:!1,enumerable:!0,get:p})},o.n=function(d){var f=d&&d.__esModule?function(){return d.default}:function(){return d};return o.d(f,"a",f),f},o.o=function(d,f){return Object.prototype.hasOwnProperty.call(d,f)},o.p="/",o(o.s=11)}([function(T,s,o){(function(d){T.exports=o(16)()}).call(s,o(2))},function(T,s){T.exports=ce},function(T,s){var o=T.exports={},d,f;function p(){throw new Error("setTimeout has not been defined")}function v(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?d=setTimeout:d=p}catch{d=p}try{typeof clearTimeout=="function"?f=clearTimeout:f=v}catch{f=v}})();function h(t){if(d===setTimeout)return setTimeout(t,0);if((d===p||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch{try{return d.call(null,t,0)}catch{return d.call(this,t,0)}}}function y(t){if(f===clearTimeout)return clearTimeout(t);if((f===v||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch{try{return f.call(null,t)}catch{return f.call(this,t)}}}var w=[],_=!1,P,S=-1;function a(){!_||!P||(_=!1,P.length?w=P.concat(w):S=-1,w.length&&n())}function n(){if(!_){var t=h(a);_=!0;for(var c=w.length;c;){for(P=w,w=[];++S<c;)P&&P[S].run();S=-1,c=w.length}P=null,_=!1,y(t)}}o.nextTick=function(t){var c=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)c[g-1]=arguments[g];w.push(new m(t,c)),w.length===1&&!_&&h(n)};function m(t,c){this.fun=t,this.array=c}m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={};function r(){}o.on=r,o.addListener=r,o.once=r,o.off=r,o.removeListener=r,o.removeAllListeners=r,o.emit=r,o.prependListener=r,o.prependOnceListener=r,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(d){return d.reduce(function(f,p){return f+p})/d.length}},function(T,s,o){function d(p){return function(){return p}}var f=function(){};f.thatReturns=d,f.thatReturnsFalse=d(!1),f.thatReturnsTrue=d(!0),f.thatReturnsNull=d(null),f.thatReturnsThis=function(){return this},f.thatReturnsArgument=function(p){return p},T.exports=f},function(T,s,o){(function(d){function f(p,v,h,y,w,_,P,S){if(!p){var a;if(v===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var n=[h,y,w,_,P,S],m=0;a=new Error(v.replace(/%s/g,function(){return n[m++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}}T.exports=f}).call(s,o(2))},function(T,s,o){var d="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";T.exports=d},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(d){return Math.min.apply(Math,d)}},function(T,s,o){(function(d){var f=o(4),p=f;T.exports=p}).call(s,o(2))},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(d){return Math.max.apply(Math,d)}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=o(3),f=p(d);function p(v){return v&&v.__esModule?v:{default:v}}s.default=function(v){var h=(0,f.default)(v),y=v.map(function(_){return Math.pow(_-h,2)}),w=(0,f.default)(y);return Math.sqrt(w)}},function(T,s,o){T.exports=o(12)},function(T,s,o){T.exports=o(13)},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.SparklinesText=s.SparklinesNormalBand=s.SparklinesReferenceLine=s.SparklinesSpots=s.SparklinesBars=s.SparklinesCurve=s.SparklinesLine=s.Sparklines=void 0;var d=function(){function F(k,X){for(var D=0;D<X.length;D++){var Z=X[D];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(k,Z.key,Z)}}return function(k,X,D){return X&&F(k.prototype,X),D&&F(k,D),k}}(),f=o(0),p=M(f),v=o(1),h=M(v),y=o(17),w=M(y),_=o(18),P=M(_),S=o(19),a=M(S),n=o(20),m=M(n),r=o(21),t=M(r),c=o(22),g=M(c),b=o(27),N=M(b),R=o(28),Y=M(R);function M(F){return F&&F.__esModule?F:{default:F}}function Q(F,k){if(!(F instanceof k))throw new TypeError("Cannot call a class as a function")}function J(F,k){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:F}function K(F,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);F.prototype=Object.create(k&&k.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(F,k):F.__proto__=k)}var re=function(F){K(k,F);function k(X){return Q(this,k),J(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,X))}return d(k,[{key:"render",value:function(){var D=this.props,Z=D.data,de=D.limit,u=D.width,j=D.height,q=D.svgWidth,I=D.svgHeight,C=D.preserveAspectRatio,z=D.margin,E=D.style,L=D.max,W=D.min;if(Z.length===0)return null;var V=(0,Y.default)({data:Z,limit:de,width:u,height:j,margin:z,max:L,min:W}),ee={style:E,viewBox:"0 0 "+u+" "+j,preserveAspectRatio:C};return q>0&&(ee.width=q),I>0&&(ee.height=I),h.default.createElement("svg",ee,h.default.Children.map(this.props.children,function(pe){return h.default.cloneElement(pe,{data:Z,points:V,width:u,height:j,margin:z})}))}}]),k}(v.PureComponent);re.propTypes={data:p.default.array,limit:p.default.number,width:p.default.number,height:p.default.number,svgWidth:p.default.number,svgHeight:p.default.number,preserveAspectRatio:p.default.string,margin:p.default.number,style:p.default.object,min:p.default.number,max:p.default.number,onMouseMove:p.default.func},re.defaultProps={data:[],width:240,height:60,preserveAspectRatio:"none",margin:2},s.Sparklines=re,s.SparklinesLine=P.default,s.SparklinesCurve=a.default,s.SparklinesBars=m.default,s.SparklinesSpots=t.default,s.SparklinesReferenceLine=g.default,s.SparklinesNormalBand=N.default,s.SparklinesText=w.default},function(T,s,o){(function(d){var f=o(4),p=o(5),v=o(8),h=o(6),y=o(15);T.exports=function(w,_){var P=typeof Symbol=="function"&&Symbol.iterator,S="@@iterator";function a(u){var j=u&&(P&&u[P]||u[S]);if(typeof j=="function")return j}var n="<<anonymous>>",m={array:g("array"),bool:g("boolean"),func:g("function"),number:g("number"),object:g("object"),string:g("string"),symbol:g("symbol"),any:b(),arrayOf:N,element:R(),instanceOf:Y,node:K(),objectOf:Q,oneOf:M,oneOfType:J,shape:re};function r(u,j){return u===j?u!==0||1/u===1/j:u!==u&&j!==j}function t(u){this.message=u,this.stack=""}t.prototype=Error.prototype;function c(u){function j(I,C,z,E,L,W,V){return E=E||n,W=W||z,V!==h&&_&&p(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types"),C[z]==null?I?C[z]===null?new t("The "+L+" `"+W+"` is marked as required "+("in `"+E+"`, but its value is `null`.")):new t("The "+L+" `"+W+"` is marked as required in "+("`"+E+"`, but its value is `undefined`.")):null:u(C,z,E,L,W)}var q=j.bind(null,!1);return q.isRequired=j.bind(null,!0),q}function g(u){function j(q,I,C,z,E,L){var W=q[I],V=X(W);if(V!==u){var ee=D(W);return new t("Invalid "+z+" `"+E+"` of type "+("`"+ee+"` supplied to `"+C+"`, expected ")+("`"+u+"`."))}return null}return c(j)}function b(){return c(f.thatReturnsNull)}function N(u){function j(q,I,C,z,E){if(typeof u!="function")return new t("Property `"+E+"` of component `"+C+"` has invalid PropType notation inside arrayOf.");var L=q[I];if(!Array.isArray(L)){var W=X(L);return new t("Invalid "+z+" `"+E+"` of type "+("`"+W+"` supplied to `"+C+"`, expected an array."))}for(var V=0;V<L.length;V++){var ee=u(L,V,C,z,E+"["+V+"]",h);if(ee instanceof Error)return ee}return null}return c(j)}function R(){function u(j,q,I,C,z){var E=j[q];if(!w(E)){var L=X(E);return new t("Invalid "+C+" `"+z+"` of type "+("`"+L+"` supplied to `"+I+"`, expected a single ReactElement."))}return null}return c(u)}function Y(u){function j(q,I,C,z,E){if(!(q[I]instanceof u)){var L=u.name||n,W=de(q[I]);return new t("Invalid "+z+" `"+E+"` of type "+("`"+W+"` supplied to `"+C+"`, expected ")+("instance of `"+L+"`."))}return null}return c(j)}function M(u){if(!Array.isArray(u))return f.thatReturnsNull;function j(q,I,C,z,E){for(var L=q[I],W=0;W<u.length;W++)if(r(L,u[W]))return null;var V=JSON.stringify(u);return new t("Invalid "+z+" `"+E+"` of value `"+L+"` "+("supplied to `"+C+"`, expected one of "+V+"."))}return c(j)}function Q(u){function j(q,I,C,z,E){if(typeof u!="function")return new t("Property `"+E+"` of component `"+C+"` has invalid PropType notation inside objectOf.");var L=q[I],W=X(L);if(W!=="object")return new t("Invalid "+z+" `"+E+"` of type "+("`"+W+"` supplied to `"+C+"`, expected an object."));for(var V in L)if(L.hasOwnProperty(V)){var ee=u(L,V,C,z,E+"."+V,h);if(ee instanceof Error)return ee}return null}return c(j)}function J(u){if(!Array.isArray(u))return f.thatReturnsNull;for(var j=0;j<u.length;j++){var q=u[j];if(typeof q!="function")return v(!1,"Invalid argument supplid to oneOfType. Expected an array of check functions, but received %s at index %s.",Z(q),j),f.thatReturnsNull}function I(C,z,E,L,W){for(var V=0;V<u.length;V++){var ee=u[V];if(ee(C,z,E,L,W,h)==null)return null}return new t("Invalid "+L+" `"+W+"` supplied to "+("`"+E+"`."))}return c(I)}function K(){function u(j,q,I,C,z){return F(j[q])?null:new t("Invalid "+C+" `"+z+"` supplied to "+("`"+I+"`, expected a ReactNode."))}return c(u)}function re(u){function j(q,I,C,z,E){var L=q[I],W=X(L);if(W!=="object")return new t("Invalid "+z+" `"+E+"` of type `"+W+"` "+("supplied to `"+C+"`, expected `object`."));for(var V in u){var ee=u[V];if(ee){var pe=ee(L,V,C,z,E+"."+V,h);if(pe)return pe}}return null}return c(j)}function F(u){switch(typeof u){case"number":case"string":case"undefined":return!0;case"boolean":return!u;case"object":if(Array.isArray(u))return u.every(F);if(u===null||w(u))return!0;var j=a(u);if(j){var q=j.call(u),I;if(j!==u.entries){for(;!(I=q.next()).done;)if(!F(I.value))return!1}else for(;!(I=q.next()).done;){var C=I.value;if(C&&!F(C[1]))return!1}}else return!1;return!0;default:return!1}}function k(u,j){return u==="symbol"||j["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&j instanceof Symbol}function X(u){var j=typeof u;return Array.isArray(u)?"array":u instanceof RegExp?"object":k(j,u)?"symbol":j}function D(u){if(typeof u>"u"||u===null)return""+u;var j=X(u);if(j==="object"){if(u instanceof Date)return"date";if(u instanceof RegExp)return"regexp"}return j}function Z(u){var j=D(u);switch(j){case"array":case"object":return"an "+j;case"boolean":case"date":case"regexp":return"a "+j;default:return j}}function de(u){return!u.constructor||!u.constructor.name?n:u.constructor.name}return m.checkPropTypes=y,m.PropTypes=m,m}}).call(s,o(2))},function(T,s,o){(function(d){function f(p,v,h,y,w){}T.exports=f}).call(s,o(2))},function(T,s,o){var d=o(4),f=o(5),p=o(6);T.exports=function(){function v(w,_,P,S,a,n){n!==p&&f(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}v.isRequired=v;function h(){return v}var y={array:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:h,element:v,instanceOf:h,node:v,objectOf:h,oneOf:h,oneOfType:h,shape:h};return y.checkPropTypes=d,y.PropTypes=y,y}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),f=o(0),p=y(f),v=o(1),h=y(v);function y(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var S=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,[{key:"render",value:function(){var r=this.props,t=r.point,c=r.text,g=r.fontSize,b=r.fontFamily,N=t.x,R=t.y;return h.default.createElement("g",null,h.default.createElement("text",{x:N,y:R,fontFamily:b||"Verdana",fontSize:g||10},c))}}]),n}(h.default.Component);S.propTypes={text:p.default.string,point:p.default.object,fontSize:p.default.number,fontFamily:p.default.string},S.defaultProps={text:"",point:{x:0,y:0}},s.default=S},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),f=o(0),p=y(f),v=o(1),h=y(v);function y(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var S=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,[{key:"render",value:function(){var r=this.props,t=r.data,c=r.points;r.width;var g=r.height,b=r.margin,N=r.color,R=r.style,Y=r.onMouseMove,M=c.map(function(k){return[k.x,k.y]}).reduce(function(k,X){return k.concat(X)}),Q=[c[c.length-1].x,g-b,b,g-b,b,c[0].y],J=M.concat(Q),K={stroke:N||R.stroke||"slategray",strokeWidth:R.strokeWidth||"1",strokeLinejoin:R.strokeLinejoin||"round",strokeLinecap:R.strokeLinecap||"round",fill:"none"},re={stroke:R.stroke||"none",strokeWidth:"0",fillOpacity:R.fillOpacity||".1",fill:R.fill||N||"slategray",pointerEvents:"auto"},F=c.map(function(k,X){return h.default.createElement("circle",{key:X,cx:k.x,cy:k.y,r:2,style:re,onMouseEnter:function(Z){return Y("enter",t[X],k)},onClick:function(Z){return Y("click",t[X],k)}})});return h.default.createElement("g",null,F,h.default.createElement("polyline",{points:J.join(" "),style:re}),h.default.createElement("polyline",{points:M.join(" "),style:K}))}}]),n}(h.default.Component);S.propTypes={color:p.default.string,style:p.default.object},S.defaultProps={style:{},onMouseMove:function(){}},s.default=S},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),f=o(0),p=y(f),v=o(1),h=y(v);function y(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var S=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,[{key:"render",value:function(){var r=this.props,t=r.points;r.width;var c=r.height,g=r.margin,b=r.color,N=r.style,R=r.divisor,Y=R===void 0?.25:R,M=void 0,Q=function(D){var Z=void 0;if(!M)Z=[D.x,D.y];else{var de=(D.x-M.x)*Y;Z=["C",M.x+de,M.y,D.x-de,D.y,D.x,D.y]}return M=D,Z},J=t.map(function(X){return Q(X)}).reduce(function(X,D){return X.concat(D)}),K=["L"+t[t.length-1].x,c-g,g,c-g,g,t[0].y],re=J.concat(K),F={stroke:b||N.stroke||"slategray",strokeWidth:N.strokeWidth||"1",strokeLinejoin:N.strokeLinejoin||"round",strokeLinecap:N.strokeLinecap||"round",fill:"none"},k={stroke:N.stroke||"none",strokeWidth:"0",fillOpacity:N.fillOpacity||".1",fill:N.fill||b||"slategray"};return h.default.createElement("g",null,h.default.createElement("path",{d:"M"+re.join(" "),style:k}),h.default.createElement("path",{d:"M"+J.join(" "),style:F}))}}]),n}(h.default.Component);S.propTypes={color:p.default.string,style:p.default.object},S.defaultProps={style:{}},s.default=S},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),f=o(0),p=y(f),v=o(1),h=y(v);function y(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var S=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,[{key:"render",value:function(){var r=this,t=this.props,c=t.points,g=t.height,b=t.style,N=t.barWidth,R=t.margin,Y=t.onMouseMove,M=1*(b&&b.strokeWidth||0),Q=R?2*R:0,J=N||(c&&c.length>=2?Math.max(0,c[1].x-c[0].x-M-Q):0);return h.default.createElement("g",{transform:"scale(1,-1)"},c.map(function(K,re){return h.default.createElement("rect",{key:re,x:K.x-(J+M)/2,y:-g,width:J,height:Math.max(0,g-K.y),style:b,onMouseMove:Y&&Y.bind(r,K)})}))}}]),n}(h.default.Component);S.propTypes={points:p.default.arrayOf(p.default.object),height:p.default.number,style:p.default.object,barWidth:p.default.number,margin:p.default.number,onMouseMove:p.default.func},S.defaultProps={style:{fill:"slategray"}},s.default=S},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function a(n,m){for(var r=0;r<m.length;r++){var t=m[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(n,m,r){return m&&a(n.prototype,m),r&&a(n,r),n}}(),f=o(0),p=y(f),v=o(1),h=y(v);function y(a){return a&&a.__esModule?a:{default:a}}function w(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function _(a,n){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n&&(typeof n=="object"||typeof n=="function")?n:a}function P(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof n);a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(a,n):a.__proto__=n)}var S=function(a){P(n,a);function n(){return w(this,n),_(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,[{key:"lastDirection",value:function(r){return Math.sign=Math.sign||function(t){return t>0?1:-1},r.length<2?0:Math.sign(r[r.length-2].y-r[r.length-1].y)}},{key:"render",value:function(){var r=this.props,t=r.points;r.width,r.height;var c=r.size,g=r.style,b=r.spotColors,N=h.default.createElement("circle",{cx:t[0].x,cy:t[0].y,r:c,style:g}),R=h.default.createElement("circle",{cx:t[t.length-1].x,cy:t[t.length-1].y,r:c,style:g||{fill:b[this.lastDirection(t)]}});return h.default.createElement("g",null,g&&N,R)}}]),n}(h.default.Component);S.propTypes={size:p.default.number,style:p.default.object,spotColors:p.default.object},S.defaultProps={size:2,spotColors:{"-1":"red",0:"black",1:"green"}},s.default=S},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function r(t,c){for(var g=0;g<c.length;g++){var b=c[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(t,b.key,b)}}return function(t,c,g){return c&&r(t.prototype,c),g&&r(t,g),t}}(),f=o(0),p=P(f),v=o(1),h=P(v),y=o(23),w=_(y);function _(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c]);return t.default=r,t}function P(r){return r&&r.__esModule?r:{default:r}}function S(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function a(r,t){if(!r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:r}function n(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(r,t):r.__proto__=t)}var m=function(r){n(t,r);function t(){return S(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,[{key:"render",value:function(){var g=this.props,b=g.points,N=g.margin,R=g.type,Y=g.style,M=g.value,Q=b.map(function(K){return K.y}),J=R=="custom"?M:w[R](Q);return h.default.createElement("line",{x1:b[0].x,y1:J+N,x2:b[b.length-1].x,y2:J+N,style:Y})}}]),t}(h.default.Component);m.propTypes={type:p.default.oneOf(["max","min","mean","avg","median","custom"]),value:p.default.number,style:p.default.object},m.defaultProps={type:"mean",style:{stroke:"red",strokeOpacity:.75,strokeDasharray:"2, 2"}},s.default=m},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.variance=s.stdev=s.median=s.midRange=s.avg=s.mean=s.max=s.min=void 0;var d=o(7),f=m(d),p=o(3),v=m(p),h=o(24),y=m(h),w=o(25),_=m(w),P=o(10),S=m(P),a=o(26),n=m(a);function m(r){return r&&r.__esModule?r:{default:r}}s.min=f.default,s.max=f.default,s.mean=v.default,s.avg=v.default,s.midRange=y.default,s.median=_.default,s.stdev=S.default,s.variance=n.default},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=o(7),f=h(d),p=o(9),v=h(p);function h(y){return y&&y.__esModule?y:{default:y}}s.default=function(y){return(0,v.default)(y)-(0,f.default)(y)/2}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(d){return d.sort(function(f,p){return f-p})[Math.floor(d.length/2)]}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=o(3),f=p(d);function p(v){return v&&v.__esModule?v:{default:v}}s.default=function(v){var h=(0,f.default)(v),y=v.map(function(w){return Math.pow(w-h,2)});return(0,f.default)(y)}},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=function(){function t(c,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(c,N.key,N)}}return function(c,g,b){return g&&t(c.prototype,g),b&&t(c,b),c}}(),f=o(0),p=S(f),v=o(1),h=S(v),y=o(3),w=S(y),_=o(10),P=S(_);function S(t){return t&&t.__esModule?t:{default:t}}function a(t,c){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}function n(t,c){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:t}function m(t,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);t.prototype=Object.create(c&&c.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(t,c):t.__proto__=c)}var r=function(t){m(c,t);function c(){return a(this,c),n(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return d(c,[{key:"render",value:function(){var b=this.props,N=b.points,R=b.margin,Y=b.style,M=N.map(function(K){return K.y}),Q=(0,w.default)(M),J=(0,P.default)(M);return h.default.createElement("rect",{x:N[0].x,y:Q-J+R,width:N[N.length-1].x-N[0].x,height:P.default*2,style:Y})}}]),c}(h.default.Component);r.propTypes={style:p.default.object},r.defaultProps={style:{fill:"red",fillOpacity:.1}},s.default=r},function(T,s,o){Object.defineProperty(s,"__esModule",{value:!0});var d=o(7),f=h(d),p=o(9),v=h(p);function h(y){return y&&y.__esModule?y:{default:y}}s.default=function(y){var w=y.data,_=y.limit,P=y.width,S=P===void 0?1:P,a=y.height,n=a===void 0?1:a,m=y.margin,r=m===void 0?0:m,t=y.max,c=t===void 0?(0,v.default)(w):t,g=y.min,b=g===void 0?(0,f.default)(w):g,N=w.length;_&&_<N&&(w=w.slice(N-_));var R=(n-r*2)/(c-b||2),Y=(S-r*2)/((_||N)-(N>1?1:0));return w.map(function(M,Q){return{x:Q*Y+r,y:(c===b?1:c-M)*R+r}})}}])})})($e);var _t=$e.exports;export{kt as O,_t as b};
