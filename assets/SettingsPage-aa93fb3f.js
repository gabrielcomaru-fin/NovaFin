import{c as A,r,R as Z,j as t,b as V,I as y,a as I,X as Y,H as J,B as x,e as K,Y as Q,Z as ee,h as te,i as se,k as ne,l as ae,n as re,p as ce,t as ie,_ as F}from"./index-dab93e87.js";import{C as k,a as w,b as S,c as E,d as P}from"./card-def18805.js";import{L as _}from"./label-0103d346.js";import{_ as C}from"./extends-4c19d496.js";import{U as oe}from"./upload-f3626435.js";import{a as le,P as de}from"./plus-9435e49b.js";import{T as ue}from"./trash-2-01873c4f.js";import{A as fe}from"./alert-triangle-25aaea16.js";const he=A("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),me=A("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),pe=A("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function xe(e,s,{checkForDefaultPrevented:n=!0}={}){return function(c){if(e==null||e(c),n===!1||!c.defaultPrevented)return s==null?void 0:s(c)}}function ge(e,s){typeof e=="function"?e(s):e!=null&&(e.current=s)}function L(...e){return s=>e.forEach(n=>ge(n,s))}function be(...e){return r.useCallback(L(...e),e)}function ve(e,s=[]){let n=[];function a(i,l){const o=r.createContext(l),d=n.length;n=[...n,l];function h(u){const{scope:p,children:v,...g}=u,$=(p==null?void 0:p[e][d])||o,b=r.useMemo(()=>g,Object.values(g));return r.createElement($.Provider,{value:b},v)}function m(u,p){const v=(p==null?void 0:p[e][d])||o,g=r.useContext(v);if(g)return g;if(l!==void 0)return l;throw new Error(`\`${u}\` must be used within \`${i}\``)}return h.displayName=i+"Provider",[h,m]}const c=()=>{const i=n.map(l=>r.createContext(l));return function(o){const d=(o==null?void 0:o[e])||i;return r.useMemo(()=>({[`__scope${e}`]:{...o,[e]:d}}),[o,d])}};return c.scopeName=e,[a,$e(c,...s)]}function $e(...e){const s=e[0];if(e.length===1)return s;const n=()=>{const a=e.map(c=>({useScope:c(),scopeName:c.scopeName}));return function(i){const l=a.reduce((o,{useScope:d,scopeName:h})=>{const u=d(i)[`__scope${h}`];return{...o,...u}},{});return r.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return n.scopeName=s.scopeName,n}function H(e){const s=r.useRef(e);return r.useEffect(()=>{s.current=e}),r.useMemo(()=>(...n)=>{var a;return(a=s.current)===null||a===void 0?void 0:a.call(s,...n)},[])}function je({prop:e,defaultProp:s,onChange:n=()=>{}}){const[a,c]=Ce({defaultProp:s,onChange:n}),i=e!==void 0,l=i?e:a,o=H(n),d=r.useCallback(h=>{if(i){const u=typeof h=="function"?h(e):h;u!==e&&o(u)}else c(h)},[i,e,c,o]);return[l,d]}function Ce({defaultProp:e,onChange:s}){const n=r.useState(e),[a]=n,c=r.useRef(a),i=H(s);return r.useEffect(()=>{c.current!==a&&(i(a),c.current=a)},[a,c,i]),n}function ye(e){const s=r.useRef({value:e,previous:e});return r.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}const Ne=globalThis!=null&&globalThis.document?r.useLayoutEffect:()=>{};function ke(e){const[s,n]=r.useState(void 0);return Ne(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const i=c[0];let l,o;if("borderBoxSize"in i){const d=i.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,o=h.blockSize}else l=e.offsetWidth,o=e.offsetHeight;n({width:l,height:o})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else n(void 0)},[e]),s}const q=r.forwardRef((e,s)=>{const{children:n,...a}=e,c=r.Children.toArray(n),i=c.find(Se);if(i){const l=i.props.children,o=c.map(d=>d===i?r.Children.count(l)>1?r.Children.only(null):r.isValidElement(l)?l.props.children:null:d);return r.createElement(D,C({},a,{ref:s}),r.isValidElement(l)?r.cloneElement(l,void 0,o):null)}return r.createElement(D,C({},a,{ref:s}),n)});q.displayName="Slot";const D=r.forwardRef((e,s)=>{const{children:n,...a}=e;return r.isValidElement(n)?r.cloneElement(n,{...Ee(a,n.props),ref:s?L(s,n.ref):n.ref}):r.Children.count(n)>1?r.Children.only(null):null});D.displayName="SlotClone";const we=({children:e})=>r.createElement(r.Fragment,null,e);function Se(e){return r.isValidElement(e)&&e.type===we}function Ee(e,s){const n={...s};for(const a in s){const c=e[a],i=s[a];/^on[A-Z]/.test(a)?c&&i?n[a]=(...o)=>{i(...o),c(...o)}:c&&(n[a]=c):a==="style"?n[a]={...c,...i}:a==="className"&&(n[a]=[c,i].filter(Boolean).join(" "))}return{...e,...n}}const Pe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],O=Pe.reduce((e,s)=>{const n=r.forwardRef((a,c)=>{const{asChild:i,...l}=a,o=i?q:s;return r.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),r.createElement(o,C({},l,{ref:c}))});return n.displayName=`Primitive.${s}`,{...e,[s]:n}},{}),U="Switch",[Re,Ye]=ve(U),[_e,ze]=Re(U),De=r.forwardRef((e,s)=>{const{__scopeSwitch:n,name:a,checked:c,defaultChecked:i,required:l,disabled:o,value:d="on",onCheckedChange:h,...m}=e,[u,p]=r.useState(null),v=be(s,f=>p(f)),g=r.useRef(!1),$=u?!!u.closest("form"):!0,[b=!1,R]=je({prop:c,defaultProp:i,onChange:h});return r.createElement(_e,{scope:n,checked:b,disabled:o},r.createElement(O.button,C({type:"button",role:"switch","aria-checked":b,"aria-required":l,"data-state":W(b),"data-disabled":o?"":void 0,disabled:o,value:d},m,{ref:v,onClick:xe(e.onClick,f=>{R(j=>!j),$&&(g.current=f.isPropagationStopped(),g.current||f.stopPropagation())})})),$&&r.createElement(Ve,{control:u,bubbles:!g.current,name:a,value:d,checked:b,required:l,disabled:o,style:{transform:"translateX(-100%)"}}))}),Ae="SwitchThumb",Me=r.forwardRef((e,s)=>{const{__scopeSwitch:n,...a}=e,c=ze(Ae,n);return r.createElement(O.span,C({"data-state":W(c.checked),"data-disabled":c.disabled?"":void 0},a,{ref:s}))}),Ve=e=>{const{control:s,checked:n,bubbles:a=!0,...c}=e,i=r.useRef(null),l=ye(n),o=ke(s);return r.useEffect(()=>{const d=i.current,h=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&u){const p=new Event("click",{bubbles:a});u.call(d,n),d.dispatchEvent(p)}},[l,n,a]),r.createElement("input",C({type:"checkbox","aria-hidden":!0,defaultChecked:n},c,{tabIndex:-1,ref:i,style:{...e.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function W(e){return e?"checked":"unchecked"}const G=De,Fe=Me,X=Z.forwardRef(({className:e,...s},n)=>t.jsx(G,{className:V("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:n,children:t.jsx(Fe,{className:V("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));X.displayName=G.displayName;const z=e=>{if(!e)return"";const s=e.startsWith("-"),n=s?e.substring(1):e,a=parseFloat(n.replace(/\./g,"").replace(",","."));if(isNaN(a))return"";const c=new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).format(a);return s?"-"+c:c},Te=e=>{if(!e)return"";const s=e.startsWith("-"),a=(s?e.substring(1):e).replace(/\./g,"").replace(",",".");return s?"-"+a:a},T=({value:e,onChange:s,...n})=>{const[a,c]=r.useState("");r.useEffect(()=>{c(z(e))},[e]);const i=o=>{let d=o.target.value,h=d.startsWith("-"),m=d.replace(/[^0-9-]/g,"");m.includes("-")&&(m="-"+m.replace(/-/g,"")),h&&!m.startsWith("-")&&(m="-"+m);let u=m.replace("-","");u.length>2?u=u.slice(0,-2)+"."+u.slice(-2):u.length>0?u="0."+("00"+u).slice(-2):u="";const p=h&&u?"-"+u:u;s(p),c(z(p))},l=o=>{const d=z(Te(o.target.value));c(d)};return t.jsx(y,{...n,value:a,onChange:i,onBlur:l,type:"text",inputMode:"decimal"})};function B({type:e}){const{categories:s,addCategory:n,updateCategory:a,deleteCategory:c}=K(),{toast:i}=I(),[l,o]=r.useState(!1),[d,h]=r.useState(null),[m,u]=r.useState({nome:"",limite:""}),p=s.filter(f=>f.tipo===e),v=e==="gasto"?"Gerenciar Categorias de Gastos":"Gerenciar Categorias de Investimentos",g=async()=>{if(!m.nome){i({title:"Erro",description:"O nome da categoria é obrigatório.",variant:"destructive"});return}const f=m.limite?m.limite.replace(/\./g,"").replace(",","."):null;await n({...m,tipo:e,limite:f?parseFloat(f):null}),i({title:"Sucesso",description:"Categoria adicionada."}),u({nome:"",limite:""}),o(!1)},$=f=>{h({...f,limite:f.limite?f.limite.toString().replace(".",","):""})},b=async()=>{const{id:f,created_at:j,usuario_id:Be,icone:Ie,tipo:Le,...N}=d,M=N.limite?N.limite.replace(/\./g,"").replace(",","."):null;N.limite=M?parseFloat(M):null,await a(f,N),i({title:"Sucesso",description:"Categoria atualizada."}),h(null)},R=async f=>{await c(f),i({title:"Sucesso",description:"Categoria excluída."})};return t.jsxs(k,{children:[t.jsxs(w,{children:[t.jsx(S,{children:v}),t.jsx(E,{children:"Adicione, edite ou remova categorias."})]}),t.jsxs(P,{className:"space-y-4",children:[t.jsx("div",{className:"space-y-2",children:p.map(f=>t.jsx("div",{className:"flex items-center justify-between p-2 rounded-lg bg-secondary group",children:d&&d.id===f.id?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2 flex-grow",children:[t.jsx(y,{value:d.nome,onChange:j=>h({...d,nome:j.target.value}),className:"h-8"}),e==="gasto"&&t.jsx(T,{placeholder:"Limite",value:d.limite||"",onChange:j=>h({...d,limite:j}),className:"h-8 w-24"})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(x,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:b,children:t.jsx(Q,{className:"w-4 h-4 text-green-500"})}),t.jsx(x,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>h(null),children:t.jsx(ee,{className:"w-4 h-4 text-destructive"})})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:f.nome}),f.limite>0&&t.jsxs("span",{className:"text-xs text-muted-foreground",children:["(Limite: R$ ",f.limite.toLocaleString("pt-BR"),")"]})]}),t.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx(x,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>$(f),children:t.jsx(le,{className:"w-4 h-4"})}),t.jsxs(te,{children:[t.jsx(se,{asChild:!0,children:t.jsx(x,{size:"icon",variant:"ghost",className:"h-8 w-8",children:t.jsx(ue,{className:"w-4 h-4 text-destructive"})})}),t.jsxs(ne,{children:[t.jsxs(ae,{children:[t.jsxs(re,{className:"flex items-center gap-2",children:[t.jsx(fe,{className:"text-destructive"})," Excluir Categoria"]}),t.jsxs(ce,{children:['Tem certeza que deseja excluir a categoria "',t.jsx("strong",{children:f.nome}),'"? Esta ação não pode ser desfeita. As transações associadas a esta categoria não serão excluídas, mas ficarão sem categoria.']})]}),t.jsxs(ie,{children:[t.jsx(F,{asChild:!0,children:t.jsx(x,{variant:"outline",children:"Cancelar"})}),t.jsx(F,{asChild:!0,children:t.jsx(x,{variant:"destructive",onClick:()=>R(f.id),children:"Excluir"})})]})]})]})]})]})},f.id))}),l?t.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border border-dashed",children:[t.jsx(y,{placeholder:"Nome da categoria",value:m.nome,onChange:f=>u({...m,nome:f.target.value}),className:"h-9"}),e==="gasto"&&t.jsx(T,{placeholder:"Limite (opcional)",value:m.limite,onChange:f=>u({...m,limite:f}),className:"h-9 w-32"}),t.jsx(x,{onClick:g,className:"h-9",children:"Salvar"}),t.jsx(x,{variant:"ghost",onClick:()=>o(!1),className:"h-9",children:"Cancelar"})]}):t.jsxs(x,{variant:"outline",onClick:()=>o(!0),className:"w-full",children:[t.jsx(de,{className:"w-4 h-4 mr-2"})," Adicionar Categoria"]})]})]})}function Je(){const{toast:e}=I(),{theme:s,toggleTheme:n}=Y(),a=()=>{e({title:"🚧 Funcionalidade em desenvolvimento!",description:"Esta funcionalidade ainda não foi implementada, mas você pode solicitá-la no próximo prompt!"})};return t.jsxs(t.Fragment,{children:[t.jsxs(J,{children:[t.jsx("title",{children:"Configurações - Lumify"}),t.jsx("meta",{name:"description",content:"Gerencie suas preferências e configurações de conta."})]}),t.jsxs("div",{className:"space-y-5 md:space-y-6 page-top",children:[t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Configurações"}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs(k,{children:[t.jsxs(w,{children:[t.jsx(S,{children:"Aparência"}),t.jsx(E,{children:"Personalize a aparência do aplicativo."})]}),t.jsx(P,{className:"space-y-4",children:t.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[t.jsx("div",{className:"space-y-0.5",children:t.jsx(_,{htmlFor:"dark-mode",className:"text-base",children:"Modo Escuro"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pe,{className:"h-[1.2rem] w-[1.2rem]"}),t.jsx(X,{id:"dark-mode",checked:s==="dark",onCheckedChange:n}),t.jsx(me,{className:"h-[1.2rem] w-[1.2rem]"})]})]})})]}),t.jsxs(k,{children:[t.jsxs(w,{children:[t.jsx(S,{children:"Perfil do Usuário"}),t.jsx(E,{children:"Atualize suas informações pessoais."})]}),t.jsxs(P,{className:"space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"name",children:"Nome"}),t.jsx(y,{id:"name",placeholder:"Seu nome",defaultValue:"Usuário Exemplo"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(_,{htmlFor:"email",children:"Email"}),t.jsx(y,{id:"email",type:"email",placeholder:"Seu email",defaultValue:"exemplo@email.com",disabled:!0})]}),t.jsx(x,{onClick:a,children:"Salvar Alterações"})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(B,{type:"gasto"}),t.jsx(B,{type:"investimento"})]})]}),t.jsxs(k,{children:[t.jsxs(w,{children:[t.jsx(S,{children:"Dados"}),t.jsx(E,{children:"Gerencie seus dados financeiros."})]}),t.jsxs(P,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs(x,{variant:"outline",onClick:a,className:"flex gap-2",children:[t.jsx(oe,{className:"w-4 h-4"}),"Importar CSV"]}),t.jsxs(x,{variant:"outline",onClick:a,className:"flex gap-2",children:[t.jsx(he,{className:"w-4 h-4"}),"Exportar CSV/Excel"]})]})]})]})]})}export{Je as SettingsPage};
